(function(t){function e(e){for(var a,c,s=e[0],i=e[1],l=e[2],d=0,p=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&p.push(r[c][0]),r[c]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,s=1;s<n.length;s++){var i=n[s];0!==r[i]&&(a=!1)}a&&(o.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},r={app:0},o=[];function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/sound-flow/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=i;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"0b20":function(t,e,n){"use strict";n("8273")},"25a8":function(t,e,n){"use strict";n("5a54")},"27d1":function(t,e,n){"use strict";n("2a79")},"2a79":function(t,e,n){},"31ae":function(t,e,n){},"366c":function(t,e,n){"use strict";n("91f4")},"395a":function(t,e,n){t.exports=n.p+"img/control-repeat.1b31dc56.svg"},"427b":function(t,e,n){},"44e8":function(t,e,n){"use strict";n("6b3e")},"49d8":function(t,e,n){},"5a54":function(t,e,n){},"68b9":function(t,e,n){},"6b3e":function(t,e,n){},"6e62":function(t,e,n){"use strict";n("427b")},"7dfe":function(t,e,n){},8273:function(t,e,n){},"8ba3":function(t,e,n){t.exports=n.p+"img/control-back.5fcd24e1.svg"},"91f4":function(t,e,n){},"945c":function(t,e,n){"use strict";n("68b9")},"96ac":function(t,e,n){"use strict";n("7dfe")},"96bc":function(t,e,n){},cab9:function(t,e,n){t.exports=n.p+"img/control-shuffle.aa0319cb.svg"},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23");function r(t,e,n,r,o,c){var s=Object(a["resolveComponent"])("router-view");return t.inited?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:0})):Object(a["createCommentVNode"])("",!0)}var o=n("1da1"),c=n("5530"),s=n("bee2"),i=n("d4ec"),l=n("262e"),u=n("2caf"),d=(n("96cf"),n("9ab4")),p=n("ce1f"),h=n("5502"),f=function(t){Object(l["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);f=Object(d["a"])([Object(p["a"])({components:{},computed:Object(c["a"])({},Object(h["c"])({inited:"app/getInitState",status:"app/getStatus"})),methods:Object(c["a"])({},Object(h["b"])({init:"app/init"})),created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.init();case 1:case"end":return e.stop()}}),e)})))()}})],f);var b=f,m=(n("6e62"),n("6b0d")),v=n.n(m);const y=v()(b,[["render",r]]);var g=y,O=n("6c02"),k={key:1,class:"home"},j={class:"home-content"};function _(t,e,n,r,o,c){var s=Object(a["resolveComponent"])("CircleLoader"),i=Object(a["resolveComponent"])("InfoBar"),l=Object(a["resolveComponent"])("router-view"),u=Object(a["resolveComponent"])("ControlBar");return"loaded"!==t.status?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:0})):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",k,[Object(a["createVNode"])(i),Object(a["createElementVNode"])("div",j,[Object(a["createVNode"])(l)]),Object(a["createVNode"])(u)]))}function T(t,e,n,r,o,c){return Object(a["openBlock"])(),Object(a["createElementBlock"])("span")}var S=function(t){Object(l["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);n("25a8");const E=v()(S,[["render",T],["__scopeId","data-v-dcff6744"]]);var w=E,P={class:"info-bar"};function C(t,e,n,r,o,c){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",P)}var N=function(t){Object(l["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);N=Object(d["a"])([Object(p["a"])({})],N);var x=N;n("945c");const A=v()(x,[["render",C],["__scopeId","data-v-c9343808"]]);var I=A,V=function(t){return Object(a["pushScopeId"])("data-v-0e569806"),t=t(),Object(a["popScopeId"])(),t},B={class:"control-bar"},G=V((function(){return Object(a["createElementVNode"])("div",{class:"cb-left"},null,-1)})),R={class:"cb-center"},L=V((function(){return Object(a["createElementVNode"])("div",{class:"cb-right"},null,-1)}));function U(t,e,n,r,o,c){var s=Object(a["resolveComponent"])("ControlButtons"),i=Object(a["resolveComponent"])("ControlPlayback");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",B,[G,Object(a["createElementVNode"])("div",R,[Object(a["createVNode"])(s),Object(a["createVNode"])(i)]),L])}var D={class:"cb-buttons"};function $(t,e,r,o,c,s){var i=Object(a["resolveComponent"])("inline-svg");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",D,[Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["cb-shuffle",{active:this.$store.state.player.playback_state.shuffle}]),onClick:e[0]||(e[0]=function(){return t.toggleShuffle&&t.toggleShuffle.apply(t,arguments)})},[Object(a["createVNode"])(i,{src:n("cab9"),width:"30",height:"30"},null,8,["src"])],2),Object(a["createElementVNode"])("button",{class:"cb-back",onClick:e[1]||(e[1]=function(){return t.previousTrack&&t.previousTrack.apply(t,arguments)})},[Object(a["createVNode"])(i,{src:n("8ba3"),width:"20",height:"20"},null,8,["src"])]),Object(a["createElementVNode"])("button",{class:"cb-playpause",onClick:e[2]||(e[2]=function(){return t.playPause&&t.playPause.apply(t,arguments)})},[this.$store.state.player.playback_state.paused?(Object(a["openBlock"])(),Object(a["createBlock"])(i,{key:0,src:n("d08e"),width:"35",height:"35"},null,8,["src"])):(Object(a["openBlock"])(),Object(a["createBlock"])(i,{key:1,src:n("dd7f"),width:"35",height:"35"},null,8,["src"]))]),Object(a["createElementVNode"])("button",{class:"cb-forward",onClick:e[3]||(e[3]=function(){return t.nextTrack&&t.nextTrack.apply(t,arguments)})},[Object(a["createVNode"])(i,{src:n("ce1e"),width:"20",height:"20"},null,8,["src"])]),Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["cb-repeat",[{active:0!==this.$store.state.player.playback_state.repeat_mode},{track:2===this.$store.state.player.playback_state.repeat_mode}]]),onClick:e[4]||(e[4]=function(){return t.toggleRepeatMode&&t.toggleRepeatMode.apply(t,arguments)})},[Object(a["createVNode"])(i,{src:n("395a"),width:"20",height:"20"},null,8,["src"])],2)])}n("d3b7");var M="https://api-sf.mznx.xyz",z=function(t){var e=t.method,n=M+t.path;return fetch(n,{method:e}).then((function(t){return t.json()}))},J=z,K={getUserAuthURL:function(){var t={method:"GET",path:"/auth/login"};return J(t)},checkToken:function(t){var e={method:"GET",path:"/auth/check_token?access_token=".concat(t)};return J(e)}},F={auth:K},H={init:function(t){return new Promise((function(e){window.onSpotifyWebPlaybackSDKReady=function(){var n=new window.Spotify.Player({name:"Sound Flow (Web Playback SDK)",getOAuthToken:function(e){e(t)},volume:.5});e(n)}}))},connect:function(t){return new Promise((function(e){t.connect().then((function(t){t&&(console.log("The Web Playback SDK successfully connected to Spotify!"),e(!0))}))}))},disconnect:function(t){t.disconnect()},togglePlay:function(t){t.togglePlay()},previousTrack:function(t){t.previousTrack()},nextTrack:function(t){t.nextTrack()}};n("99af"),n("e9c4"),n("b65f");function q(t){var e="";return JSON.parse(JSON.stringify(t),(function(t,n){e+="".concat(t,"=").concat(n,"&")})),e}function Y(t){var e=Math.trunc(t/6e4),n=Math.trunc((t-6e4*e)/1e3),a=String(n);return n<10&&(a="0"+a),e+":"+a}var X="https://api.spotify.com/v1",W=function(t){var e=t.method,n=X+t.path;return fetch(n,{method:e,headers:{Authorization:"Bearer "+localStorage.getItem("access_token")},body:t.body?t.body:null}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(){return null}))},Q=W,Z={getAlbum:function(t){var e=q(t),n={method:"GET",path:"/albums/".concat(t.id,"?").concat(e)};return Q(n)},getAlbums:function(t){var e=q(t),n={method:"GET",path:"/albums?".concat(e)};return Q(n)},getAlbumsTracks:function(t){var e=q(t),n={method:"GET",path:"/albums/".concat(t.id,"/tracks?").concat(e)};return Q(n)},getSavedAlbums:function(t){var e=q(t),n={method:"GET",path:"/me/albums?".concat(e)};return Q(n)},saveAlbums:function(t){var e={method:"PUT",path:"/me/albums",body:JSON.stringify(t)};return Q(e)},removeAlbums:function(t){var e={method:"DELETE",path:"/me/albums",body:JSON.stringify(t)};return Q(e)},checkSavedAlbums:function(t){var e=q(t),n={method:"GET",path:"/me/albums/contains?".concat(e)};return Q(n)},getNewReleases:function(t){var e=q(t),n={method:"GET",path:"/browse/new-releases?".concat(e)};return Q(n)}},tt={getArtist:function(t){var e={method:"GET",path:"/artists/".concat(t.id)};return Q(e)},getArtists:function(t){var e=q(t),n={method:"GET",path:"/artists?".concat(e)};return Q(n)},getArtisAlbums:function(t){var e=q(t),n={method:"GET",path:"/artists/".concat(t.id,"/albums?").concat(e)};return Q(n)},getArtisTopTracks:function(t){var e=q(t),n={method:"GET",path:"/artists/".concat(t.id,"/top-tracks?").concat(e)};return Q(n)},getArtistRelatedArtists:function(t){var e={method:"GET",path:"/artists/".concat(t.id,"/related-artists")};return Q(e)}},et={getTrack:function(t){var e=q(t),n={method:"GET",path:"/tracks/".concat(t.id,"?").concat(e)};return Q(n)},getTracks:function(t){var e=q(t),n={method:"GET",path:"/tracks?".concat(e)};return Q(n)},getSavedTracks:function(t){var e=q(t),n={method:"GET",path:"/me/tracks?".concat(e)};return Q(n)},saveTracks:function(t){var e={method:"PUT",path:"/me/tracks",body:JSON.stringify(t)};return Q(e)},removeTracks:function(t){var e={method:"DELETE",path:"/me/tracks",body:JSON.stringify(t)};return Q(e)},checkSavedTracks:function(t){var e=q(t),n={method:"GET",path:"/me/tracks/contains?".concat(e)};return Q(n)},getTracksAudioFeatures:function(t){var e=q(t),n={method:"GET",path:"/audio-features?".concat(e)};return Q(n)},getTrackAudioFeatures:function(t){var e={method:"GET",path:"/audio-features/".concat(t.id)};return Q(e)},getTrackAudioAnalysis:function(t){var e={method:"GET",path:"/audio-analysis/".concat(t.id)};return Q(e)},getRecommendations:function(t){var e=q(t),n={method:"GET",path:"/recommendations?".concat(e)};return Q(n)}},nt={search:function(t){var e=q(t),n={method:"GET",path:"/search?".concat(e)};return Q(n)}},at={getCurrentUsersProfile:function(){var t={method:"GET",path:"/me"};return Q(t)},getUserTopArtists:function(t){var e=q(t),n={method:"GET",path:"/me/top/artists?".concat(e)};return Q(n)},getUserTopTracks:function(t){var e=q(t),n={method:"GET",path:"/me/top/tracks?".concat(e)};return Q(n)},getUserProfile:function(t){var e={method:"GET",path:"/users/".concat(t.user_id)};return Q(e)},followPlaylist:function(t){var e={method:"PUT",path:"/playlists/".concat(t.playlist_id,"/followers"),body:JSON.stringify(t)};return Q(e)},unfollowPlaylist:function(t){var e={method:"DELETE",path:"/playlists/".concat(t.playlist_id,"/followers")};return Q(e)},getFollowedArtists:function(t){var e=q(t),n={method:"GET",path:"/me/following?".concat(e)};return Q(n)},followArtistsOrUsers:function(t){var e=q(t),n={method:"PUT",path:"/me/following?".concat(e)};return Q(n)},unfollowArtistsOrUsers:function(t){var e=q(t),n={method:"DELETE",path:"/me/following?".concat(e)};return Q(n)},checkUserFollowArtistsOrUsers:function(t){var e=q(t),n={method:"GET",path:"/me/following/contains?".concat(e)};return Q(n)},checkUsersFollowPlaylist:function(t){var e=q(t),n={method:"GET",path:"/playlists/".concat(t.playlist_id,"/followers/contains?").concat(e)};return Q(n)}},rt={getPlaylist:function(t){var e=q(t),n={method:"GET",path:"/playlists/".concat(t.playlist_id,"?").concat(e)};return Q(n)},changePlaylistDetails:function(t){var e={method:"PUT",path:"/playlists/".concat(t.playlist_id),body:JSON.stringify(t)};return Q(e)},getPlaylistTracks:function(t){var e=q(t),n={method:"GET",path:"/playlists/".concat(t.playlist_id,"/tracks?").concat(e)};return Q(n)},addTracksToPlaylist:function(t){var e={method:"POST",path:"/playlists/".concat(t.playlist_id,"/tracks"),body:JSON.stringify(t)};return Q(e)},reorderPlaylistTracks:function(t){var e={method:"PUT",path:"/playlists/".concat(t.playlist_id,"/tracks"),body:JSON.stringify(t)};return Q(e)},replacePlaylistTracks:function(t){var e={method:"PUT",path:"/playlists/".concat(t.playlist_id,"/tracks"),body:JSON.stringify(t)};return Q(e)},removePlaylistTracks:function(t){var e={method:"DELETE",path:"/playlists/".concat(t.playlist_id,"/tracks"),body:JSON.stringify(t)};return Q(e)},getCurrentUserPlaylists:function(t){var e=q(t),n={method:"GET",path:"/me/playlists?".concat(e)};return Q(n)},getUserPlaylists:function(t){var e=q(t),n={method:"GET",path:"/users/".concat(t.user_id,"/playlists?").concat(e)};return Q(n)},createPlaylist:function(t){var e={method:"POST",path:"/users/".concat(t.user_id,"/playlists"),body:JSON.stringify(t)};return Q(e)},getFeaturedPlaylists:function(t){var e=q(t),n={method:"GET",path:"/browse/featured-playlists?".concat(e)};return Q(n)},getCategorysPlaylists:function(t){var e=q(t),n={method:"GET",path:"/browse/categories/".concat(t.category_id,"/playlists?").concat(e)};return Q(n)},getPlaylistImage:function(t){var e={method:"GET",path:"/playlists/".concat(t.playlist_id,"/images")};return Q(e)},setPlaylistImage:function(t){var e={method:"PUT",path:"/playlists/".concat(t.playlist_id,"/images")};return Q(e)}},ot={getPlaybackState:function(t){var e=q(t),n={method:"GET",path:"/me/player?".concat(e)};return Q(n)},transferPlayback:function(t){var e={method:"PUT",path:"/me/player",body:JSON.stringify(t)};return Q(e)},getAvailableDevices:function(){var t={method:"GET",path:"/me/player/devices"};return Q(t)},getCurrentTrack:function(t){var e=q(t),n={method:"GET",path:"/me/player/currently-playing?".concat(e)};return Q(n)},togglePlayback:function(t){var e={method:"PUT",path:"/me/player/play?device_id=".concat(t.device_id),body:JSON.stringify(t)};return Q(e)},pausePlayback:function(t){var e={method:"PUT",path:"/me/player/pause?device_id=".concat(t.device_id)};return Q(e)},nextTrack:function(t){var e={method:"POST",path:"/me/player/next?device_id=".concat(t.device_id)};return Q(e)},prevTrack:function(t){var e={method:"POST",path:"/me/player/previous?device_id=".concat(t.device_id)};return Q(e)},seek:function(t){var e=q(t),n={method:"POST",path:"/me/player/seek?".concat(e)};return Q(n)},setRepeatMode:function(t){var e=q(t),n={method:"PUT",path:"/me/player/repeat?".concat(e)};return Q(n)},setVolume:function(t){var e=q(t),n={method:"PUT",path:"/me/player/volume?".concat(e)};return Q(n)},togglePlaybackShuffle:function(t){var e=q(t),n={method:"PUT",path:"/me/player/shuffle?".concat(e)};return Q(n)},getRecentlyPlayedTracks:function(t){var e=q(t),n={method:"GET",path:"/me/player/recently-played?".concat(e)};return Q(n)},addToPlaybackQueue:function(t){var e=q(t),n={method:"POST",path:"/me/player/queue?".concat(e)};return Q(n)}},ct={SDK:H,albums:Z,artists:tt,tracks:et,search:nt,users:at,playlists:rt,player:ot},st={backend:F,spotify:ct},it=function(t){Object(l["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);it=Object(d["a"])([Object(p["a"])({data:function(){return{}},methods:{playPause:function(){st.spotify.SDK.togglePlay(this.$store.state.player.player)},previousTrack:function(){st.spotify.SDK.previousTrack(this.$store.state.player.player)},nextTrack:function(){st.spotify.SDK.nextTrack(this.$store.state.player.player)},toggleShuffle:function(){st.spotify.player.togglePlaybackShuffle({state:!this.$store.state.player.playback_state.shuffle,device_id:this.$store.state.player.device_id})},toggleRepeatMode:function(){var t="";switch(this.$store.state.player.playback_state.repeat_mode){case 0:t="context";break;case 1:t="track";break;case 2:t="off";break}st.spotify.player.setRepeatMode({state:t,device_id:this.$store.state.player.device_id})}}})],it);var lt=it;n("27d1");const ut=v()(lt,[["render",$],["__scopeId","data-v-0fc13958"]]);var dt=ut,pt={class:"cb-playback"},ht={class:"cb-progress-time"},ft={class:"cb-progress-bar"},bt={class:"cb-progress-time"};function mt(t,e,n,r,o,c){var s=Object(a["resolveComponent"])("Slider");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",pt,[Object(a["createElementVNode"])("div",ht,Object(a["toDisplayString"])(t.getTime(t.progress)),1),Object(a["createElementVNode"])("div",ft,[Object(a["createVNode"])(s,{modelValue:t.progress,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.progress=e}),style_bg:{backgroundColor:"var(--color-control)"},style_fg:{backgroundColor:"var(--color-accent)"},style_dot:{backgroundColor:"var(--color-control-light)"},max:t.duration,onUp:t.onProgressChange},null,8,["modelValue","style_bg","style_fg","style_dot","max","onUp"])]),Object(a["createElementVNode"])("div",bt,Object(a["toDisplayString"])(t.getTime(t.duration)),1)])}function vt(t,e,n,r,o,c){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"slider",style:Object(a["normalizeStyle"])(t.style.general),ref:"slider",onMouseover:e[0]||(e[0]=function(){return t.onSliderOver&&t.onSliderOver.apply(t,arguments)}),onMouseout:e[1]||(e[1]=function(){return t.onSliderOut&&t.onSliderOut.apply(t,arguments)}),onMousedown:e[2]||(e[2]=function(){return t.onSliderDown&&t.onSliderDown.apply(t,arguments)})},[Object(a["createElementVNode"])("div",{class:"slider-backgroound",style:Object(a["normalizeStyle"])(t.style.bg)},[Object(a["createElementVNode"])("div",{class:"slider-fill",style:Object(a["normalizeStyle"])(t.style.fg)},null,4)],4),Object(a["createElementVNode"])("div",{class:"slider-dot",style:Object(a["normalizeStyle"])(t.style.dot)},null,4)],36)}n("a9e3");var yt=function(t){Object(l["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);yt=Object(d["a"])([Object(p["a"])({props:{style_bg:Object,style_fg:Object,style_dot:Object,height:Number,dot_size:Number,min:Number,max:Number,modelValue:Number},emits:["update:modelValue","down","up","move"],data:function(){return{_dot_size:12,_min:0,_max:100,slider_pressed:!1,slider_over:!1,style:{}}},methods:{setValue:function(t){t<this._min?t=this._min:t>this._max&&(t=this._max),this.$emit("update:modelValue",t)},updateSlider:function(){var t=(this.modelValue-this._min)/(this._max-this._min)*100;this.style.fg.transform="translateX(calc(-100% + ".concat(t,"%))"),this.style.dot.left="".concat(t,"%"),this.slider_over?this.style.dot.display="block":this.slider_pressed||(this.style.dot.display="none")},onSliderDown:function(){this.slider_pressed=!0,window.addEventListener("mouseup",this.onSliderUp),window.addEventListener("mousemove",this.onSliderMove),this.$emit("down")},onSliderUp:function(t){this.slider_pressed=!1,window.removeEventListener("mouseup",this.onSliderUp),window.removeEventListener("mousemove",this.onSliderMove),this.onSliderMove(t),this.updateSlider(),this.$emit("up")},onSliderMove:function(t){var e=this.$refs.slider.getBoundingClientRect(),n=t.clientX-e.left;n<0&&(n=0),n>e.width&&(n=e.width);var a=n/e.width;this.setValue((this._max-this._min)*a+this._min),this.$emit("move");var r=window.getSelection();null!==r&&r.removeAllRanges()},onSliderOver:function(){this.slider_over=!0,this.updateSlider()},onSliderOut:function(){this.slider_over=!1,this.updateSlider()}},mounted:function(){this.min&&(this._min=this.min),this.max&&(this._max=this.max),this.dot_size&&(this._dot_size=this.dot_size),this.style={general:{height:"".concat(this.height+8,"px")},bg:{},fg:{},dot:{width:"".concat(this._dot_size,"px"),height:"".concat(this._dot_size,"px"),top:"calc(-50% - ".concat(this._dot_size/2,"px)"),transform:"translateX(-".concat(this._dot_size/2,"px)")}},Object.assign(this.style.bg,this.style_bg),Object.assign(this.style.fg,this.style_fg),Object.assign(this.style.dot,this.style_dot),this.updateSlider()},watch:{min:function(){this._min=this.min,this.updateSlider()},max:function(){this._max=this.max,this.updateSlider()},modelValue:function(){this.updateSlider()}}})],yt);var gt=yt;n("366c");const Ot=v()(gt,[["render",vt],["__scopeId","data-v-3ff17a22"]]);var kt=Ot,jt=function(t){Object(l["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);jt=Object(d["a"])([Object(p["a"])({data:function(){return{progress:0,duration:0,inverval:null}},components:{Slider:kt},computed:{is_playing:function(){return this.$store.state.player.playback_state.paused},context:function(){return this.$store.state.player.playback_state.context}},methods:{updateProgress:function(){var t=this;clearInterval(this.inverval),this.progress=this.$store.state.player.playback_state.position,this.$store.state.player.playback_state.paused||(this.inverval=setInterval((function(){t.progress+1e3<=t.duration&&(t.progress+=1e3)}),1e3))},onProgressChange:function(){this.$store.state.player.player.seek(this.progress)},getTime:function(t){return Y(t)}},watch:{context:function(){this.duration=this.$store.state.player.playback_state.duration,this.progress=this.$store.state.player.playback_state.position},is_playing:function(){this.updateProgress()}},mounted:function(){this.duration=this.$store.state.player.playback_state.duration,this.updateProgress()}})],jt);var _t=jt;n("96ac");const Tt=v()(_t,[["render",mt],["__scopeId","data-v-68d9e795"]]);var St=Tt,Et=function(t){Object(l["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);Et=Object(d["a"])([Object(p["a"])({components:{ControlButtons:dt,ControlPlayback:St}})],Et);var wt=Et;n("de16");const Pt=v()(wt,[["render",U],["__scopeId","data-v-0e569806"]]);var Ct=Pt,Nt=function(t){Object(l["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);Nt=Object(d["a"])([Object(p["a"])({components:{CircleLoader:w,InfoBar:I,ControlBar:Ct},computed:Object(c["a"])({},Object(h["c"])({status:"app/getStatus"})),methods:Object(c["a"])({},Object(h["b"])({init:"player/init"})),created:function(){if(console.log("[debug] Home (created)"),"not-logged"!==this.status&&"loaded"!==this.status){var t=document.createElement("script");t.src="https://sdk.scdn.co/spotify-player.js",t.async=!0,document.body.appendChild(t),this.init()}else this.$router.push({name:"Login"})}})],Nt);var xt=Nt;n("0b20");const At=v()(xt,[["render",_],["__scopeId","data-v-4e5a9bda"]]);var It=At,Vt=function(t){return Object(a["pushScopeId"])("data-v-7610a826"),t=t(),Object(a["popScopeId"])(),t},Bt={class:"login",ref:"login"},Gt=Vt((function(){return Object(a["createElementVNode"])("h1",null,"Пожалуйста, авторизуйтесь через Spotify.",-1)}));function Rt(t,e,n,r,o,c){var s=Object(a["resolveComponent"])("CircleLoader");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[this.process?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:0})):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",Bt,[Gt,Object(a["createElementVNode"])("button",{onClick:e[0]||(e[0]=function(){return t.login&&t.login.apply(t,arguments)}),class:"btn"},"Войти")],512)],64)}n("9911");var Lt=function(t){Object(l["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);Lt=Object(d["a"])([Object(p["a"])({data:function(){return{process:!1}},components:{CircleLoader:w},computed:Object(c["a"])({},Object(h["c"])({status:"app/getStatus"})),methods:Object(c["a"])(Object(c["a"])({},Object(h["b"])({setStatus:"app/setStatus",setAccessToken:"auth/setAccessToken",setRefreshToken:"auth/setRefreshToken"})),{},{popupEvent:function(t){var e=t.data;switch(e.status){case"ok":console.log("[debug] Login (all ok)"),window.removeEventListener("message",this.popupEvent),this.setAccessToken(localStorage.getItem("access_token")),this.setRefreshToken(localStorage.getItem("refresh_token")),this.setStatus("logged"),this.$router.push({name:"Home"});break;default:console.log("switch (data.status): default")}},login:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$refs.login.querySelector(".login h1"),a=t.$refs.login.querySelector(".login button"),n.style.transform="translateX(-100vw)",a.style.transform="translateX(100vw)",t.process=!0,e.next=7,st.backend.auth.getUserAuthURL();case 7:r=e.sent,r.state&&(localStorage.setItem(r.state_key,r.state),o=window.open(r.link,"Login with Spotify","width=800,height=600"),o&&window.addEventListener("message",t.popupEvent,!1));case 9:case"end":return e.stop()}}),e)})))()}}),created:function(){console.log("[debug] Login (created)"),"logged"!==this.status&&"loaded"!==this.status||this.$router.push({name:"Home"})}})],Lt);var Ut=Lt;n("cfe4");const Dt=v()(Ut,[["render",Rt],["__scopeId","data-v-7610a826"]]);var $t=Dt,Mt={class:"callback"};function zt(t,e,n,r,o,c){var s=Object(a["resolveComponent"])("CircleLoader");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Mt,[Object(a["createVNode"])(s)])}var Jt=function(t){Object(l["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);Jt=Object(d["a"])([Object(p["a"])({components:{CircleLoader:w},created:function(){console.log("[debug] Callback (start)");var t=this.$route.query;console.log("[debug] Callback query: ",t),window.opener&&(console.log("[debug] Callback (1 if)"),t&&t.access_token?(console.log("[debug] Callback (2 if)"),localStorage.setItem("access_token",t.access_token),localStorage.setItem("refresh_token",t.refresh_token),window.opener.postMessage({status:"ok"})):t.error?window.opener.postMessage({status:t.error}):window.opener.postMessage({status:"invalid query"}),localStorage.removeItem("spotify_auth_state"),window.close()),console.log("[debug] Callback (end)")}})],Jt);var Kt=Jt;n("e74c");const Ft=v()(Kt,[["render",zt],["__scopeId","data-v-29c03a3e"]]);var Ht=Ft,qt=function(t){return Object(a["pushScopeId"])("data-v-54c14b51"),t=t(),Object(a["popScopeId"])(),t},Yt={class:"not-found"},Xt=qt((function(){return Object(a["createElementVNode"])("h1",null,"404",-1)})),Wt=qt((function(){return Object(a["createElementVNode"])("h2",null,"Страница не найдена",-1)}));function Qt(t,e,n,r,o,c){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Yt,[Xt,Wt,Object(a["createElementVNode"])("button",{onClick:e[0]||(e[0]=function(){return t.goHome&&t.goHome.apply(t,arguments)}),class:"btn"},"На главную")])}var Zt=function(t){Object(l["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);Zt=Object(d["a"])([Object(p["a"])({methods:{goHome:function(){this.$router.push({name:"Home"})}}})],Zt);var te=Zt;n("44e8");const ee=v()(te,[["render",Qt],["__scopeId","data-v-54c14b51"]]);var ne=ee,ae=[{path:"/",name:"Home",component:It,children:[{path:"",component:ne}]},{path:"/login",name:"Login",component:$t},{path:"/callback",name:"Callback",component:Ht},{path:"/:catchAll(.*)",name:"NotFound",component:ne}],re=Object(O["a"])({history:Object(O["b"])(),routes:ae}),oe=re,ce=n("6d5e"),se=n.n(ce),ie={inited:!1,status:null};function le(t){return t.inited}function ue(t){return t.status}var de={getInitState:le,getStatus:ue};function pe(t,e){t.inited=e}function he(t,e){t.status=e}var fe={SET_INIT_STATE:pe,SET_STATUS:he};function be(t){return me.apply(this,arguments)}function me(){return me=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,console.log("[debug] app/init (start)"),t.next=4,n("auth/init",null,{root:!0});case 4:n("setInitState",!0),console.log("[debug] app/init (end)");case 6:case"end":return t.stop()}}),t)}))),me.apply(this,arguments)}function ve(t,e){var n=t.commit;console.log("[debug] app/setInitState: ",e),n("SET_INIT_STATE",e)}function ye(t,e){var n=t.commit;console.log("[debug] app/setStatus: ",e),n("SET_STATUS",e)}var ge={init:be,setInitState:ve,setStatus:ye},Oe={namespaced:!0,state:ie,getters:de,mutations:fe,actions:ge},ke={access_token:null,refresh_token:null};function je(t){return t.access_token}function _e(t){return t.refresh_token}var Te={getAccessToken:je,getRefreshToken:_e};function Se(t,e){t.access_token=e}function Ee(t,e){t.refresh_token=e}var we={SET_ACCESS_TOKEN:Se,SET_REFRESH_TOKEN:Ee};function Pe(t){return Ce.apply(this,arguments)}function Ce(){return Ce=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.dispatch,console.log("[debug] auth/init (start)"),n("app/setStatus","not-logged",{root:!0}),a=localStorage.getItem("access_token"),!a){t.next=11;break}return console.log("[debug] auth/init (check start)"),t.next=8,st.backend.auth.checkToken(a);case 8:r=t.sent,console.log("[debug] auth/init (check end)"),"ok"===r.status&&(n("setAccessToken",a),n("app/setStatus","logged",{root:!0}));case 11:console.log("[debug] auth/init (end)");case 12:case"end":return t.stop()}}),t)}))),Ce.apply(this,arguments)}function Ne(t,e){var n=t.commit;console.log("[debug] auth/setAccessToken: ",e),n("SET_ACCESS_TOKEN",e)}function xe(t,e){var n=t.commit;n("SET_REFRESH_TOKEN",e)}var Ae={init:Pe,setAccessToken:Ne,setRefreshToken:xe},Ie={namespaced:!0,state:ke,getters:Te,mutations:we,actions:Ae},Ve={player:null,device_id:null,playback:null,playback_state:null};function Be(t){return t.player}function Ge(t){return t.device_id}function Re(t){return t.playback}function Le(t){return t.playback_state}var Ue={getPlayer:Be,getDeviceId:Ge,getPlayback:Re,getPlaybackState:Le};function De(t,e){t.player=e}function $e(t,e){t.device_id=e}function Me(t,e){t.playback=e}function ze(t,e){t.playback_state=e}var Je={SET_PLAYER:De,SET_DEVICE_ID:$e,SET_PLAYBACK:Me,SET_PLAYBACK_STATE:ze};function Ke(t){return Fe.apply(this,arguments)}function Fe(){return Fe=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,a,r,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,a=e.rootGetters,console.log("[debug] player/init (start)"),r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("[debug] player/waitTransferComplete"),t.abrupt("return",new Promise((function(t){var e=setInterval(Object(o["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=Ve.playback_state,null!==a&&(clearInterval(e),t(a));case 2:case"end":return n.stop()}}),n)}))))})));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=a["auth/getAccessToken"],t.next=6,st.spotify.SDK.init(c);case 6:return s=t.sent,s.addListener("initialization_error",(function(t){var e=t.message;console.error(e)})),s.addListener("authentication_error",(function(t){var e=t.message;console.error(e)})),s.addListener("account_error",(function(t){var e=t.message;console.error(e)})),s.addListener("playback_error",(function(t){var e=t.message;console.error(e)})),s.addListener("ready",(function(t){var e=t.device_id;console.log("Ready with Device ID",e),n("setPlayer",s),n("setDeviceId",e),st.spotify.player.transferPlayback({device_ids:[e]})})),s.addListener("not_ready",(function(t){var e=t.device_id;console.log("Device ID has gone offline",e)})),s.addListener("player_state_changed",(function(t){console.log("current state: ",t),n("setPlaybackState",t)})),s.addListener("autoplay_failed",(function(){console.log("Autoplay is not allowed by the browser autoplay rules")})),t.next=17,st.spotify.SDK.connect(s);case 17:return t.next=19,r();case 19:n("app/setStatus","loaded",{root:!0}),console.log("[debug] player/init (end)");case 21:case"end":return t.stop()}}),t)}))),Fe.apply(this,arguments)}function He(t,e){var n=t.commit;console.log("[debug] player/setPlayer: ",e),n("SET_PLAYER",e)}function qe(t,e){var n=t.commit;console.log("[debug] player/setDeviceId: ",e),n("SET_DEVICE_ID",e)}function Ye(t,e){var n=t.commit;console.log("[debug] player/setPlayback: ",e),n("SET_PLAYBACK",e)}function Xe(t,e){var n=t.commit;console.log("[debug] player/setPlaybackState: ",e),n("SET_PLAYBACK_STATE",e)}var We={init:Ke,setPlayer:He,setDeviceId:qe,setPlayback:Ye,setPlaybackState:Xe},Qe={namespaced:!0,state:Ve,getters:Ue,mutations:Je,actions:We},Ze=Object(h["a"])({state:{},mutations:{},actions:{},modules:{app:Oe,auth:Ie,player:Qe}});Object(a["createApp"])(g).use(oe).use(Ze).component("inline-svg",se.a).mount("#app")},ce1e:function(t,e,n){t.exports=n.p+"img/control-forward.0892bb3f.svg"},cfe4:function(t,e,n){"use strict";n("96bc")},d08e:function(t,e,n){t.exports=n.p+"img/control-play.2f25944e.svg"},dd7f:function(t,e,n){t.exports=n.p+"img/control-pause.e75d8a30.svg"},de16:function(t,e,n){"use strict";n("31ae")},e74c:function(t,e,n){"use strict";n("49d8")}});
//# sourceMappingURL=app.f2c36581.js.map