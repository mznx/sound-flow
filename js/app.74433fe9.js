(function(t){function e(e){for(var a,o,s=e[0],i=e[1],u=e[2],p=0,d=[];p<s.length;p++)o=s[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);l&&l(e);while(d.length)d.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],a=!0,s=1;s<n.length;s++){var i=n[s];0!==r[i]&&(a=!1)}a&&(c.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},r={app:0},c=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/sound-flow/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=i;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},1369:function(t,e,n){},2152:function(t,e,n){"use strict";n("90ad")},"25a8":function(t,e,n){"use strict";n("5a54")},"395a":function(t,e,n){t.exports=n.p+"img/control-repeat.1b31dc56.svg"},"3a78":function(t,e,n){},4264:function(t,e,n){},"4f97":function(t,e,n){"use strict";n("a00b")},"5a54":function(t,e,n){},6547:function(t,e,n){},"6bad":function(t,e,n){"use strict";n("ddc6")},"6de0":function(t,e,n){"use strict";n("1369")},"8ba3":function(t,e,n){t.exports=n.p+"img/control-back.5fcd24e1.svg"},"90ad":function(t,e,n){},9329:function(t,e,n){"use strict";n("6547")},a00b:function(t,e,n){},b4e8:function(t,e,n){"use strict";n("3a78")},cab9:function(t,e,n){t.exports=n.p+"img/control-shuffle.aa0319cb.svg"},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23");function r(t,e){var n=Object(a["resolveComponent"])("router-view");return Object(a["openBlock"])(),Object(a["createBlock"])(n)}n("2152");var c=n("6b0d"),o=n.n(c);const s={},i=o()(s,[["render",r]]);var u=i,l=n("6c02"),p={key:1,class:"home"};function d(t,e,n,r,c,o){var s=Object(a["resolveComponent"])("CircleLoader"),i=Object(a["resolveComponent"])("ControlBar");return this.loading?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:0})):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",p,[Object(a["createVNode"])(i)]))}var m=n("1da1"),f=n("bee2"),h=n("d4ec"),b=n("262e"),y=n("2caf"),v=(n("d3b7"),n("96cf"),n("9ab4")),g=n("ce1f");function k(t,e,n,r,c,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])("span")}var _=function(t){Object(b["a"])(n,t);var e=Object(y["a"])(n);function n(){return Object(h["a"])(this,n),e.apply(this,arguments)}return Object(f["a"])(n)}(g["b"]);n("25a8");const O=o()(_,[["render",k],["__scopeId","data-v-dcff6744"]]);var j=O,T=function(t){return Object(a["pushScopeId"])("data-v-206fd301"),t=t(),Object(a["popScopeId"])(),t},w={class:"control-bar"},P=T((function(){return Object(a["createElementVNode"])("div",{class:"cb-left"},null,-1)})),E={class:"cb-center"},x=T((function(){return Object(a["createElementVNode"])("div",{class:"cb-right"},null,-1)}));function S(t,e,n,r,c,o){var s=Object(a["resolveComponent"])("ControlButtons"),i=Object(a["resolveComponent"])("ControlPlayback");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",w,[P,Object(a["createElementVNode"])("div",E,[Object(a["createVNode"])(s),Object(a["createVNode"])(i)]),x])}var C={class:"cb-buttons"};function G(t,e,r,c,o,s){var i=Object(a["resolveComponent"])("inline-svg");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",C,[Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["cb-shuffle",{active:this.$store.state.player.playback_state.shuffle}]),onClick:e[0]||(e[0]=function(){return t.toggleShuffle&&t.toggleShuffle.apply(t,arguments)})},[Object(a["createVNode"])(i,{src:n("cab9"),width:"30",height:"30"},null,8,["src"])],2),Object(a["createElementVNode"])("button",{class:"cb-back",onClick:e[1]||(e[1]=function(){return t.previousTrack&&t.previousTrack.apply(t,arguments)})},[Object(a["createVNode"])(i,{src:n("8ba3"),width:"20",height:"20"},null,8,["src"])]),Object(a["createElementVNode"])("button",{class:"cb-playpause",onClick:e[2]||(e[2]=function(){return t.playPause&&t.playPause.apply(t,arguments)})},[this.$store.state.player.playback_state.paused?(Object(a["openBlock"])(),Object(a["createBlock"])(i,{key:0,src:n("d08e"),width:"35",height:"35"},null,8,["src"])):(Object(a["openBlock"])(),Object(a["createBlock"])(i,{key:1,src:n("dd7f"),width:"35",height:"35"},null,8,["src"]))]),Object(a["createElementVNode"])("button",{class:"cb-forward",onClick:e[3]||(e[3]=function(){return t.nextTrack&&t.nextTrack.apply(t,arguments)})},[Object(a["createVNode"])(i,{src:n("ce1e"),width:"20",height:"20"},null,8,["src"])]),Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["cb-repeat",[{active:0!==this.$store.state.player.playback_state.repeat_mode},{track:2===this.$store.state.player.playback_state.repeat_mode}]]),onClick:e[4]||(e[4]=function(){return t.toggleRepeatMode&&t.toggleRepeatMode.apply(t,arguments)})},[Object(a["createVNode"])(i,{src:n("395a"),width:"20",height:"20"},null,8,["src"])],2)])}var N="https://api-sf.mznx.xyz",$=function(t){var e=t.method,n=N+t.path;return fetch(n,{method:e}).then((function(t){return t.json()}))},U=$,A={getUserAuthURL:function(){var t={method:"GET",path:"/auth/login"};return U(t)},checkToken:function(t){var e={method:"GET",path:"/auth/check_token?access_token=".concat(t)};return U(e)}},B={auth:A},V={init:function(t){return new Promise((function(e){window.onSpotifyWebPlaybackSDKReady=function(){var n=new window.Spotify.Player({name:"Sound Flow (Web Playback SDK)",getOAuthToken:function(e){e(t)},volume:.5});e(n)}}))},connect:function(t){return new Promise((function(e){t.addListener("ready",(function(t){e(t)})),t.connect().then((function(t){}))}))},disconnect:function(t){t.disconnect()},togglePlay:function(t){t.togglePlay()},previousTrack:function(t){t.previousTrack()},nextTrack:function(t){t.nextTrack()}},R=(n("99af"),n("e9c4"),"https://api.spotify.com/v1"),I=function(t){var e=t.method,n=R+t.path;return fetch(n,{method:e,headers:{Authorization:"Bearer "+localStorage.getItem("access_token")},body:t.body?t.body:null}).then((function(t){if(t.ok)return t.json()})).then((function(t){return t})).catch((function(){return null}))},D=I,L={getAlbum:function(t,e){var n={method:"GET",path:"/albums/".concat(t,"?market=").concat(e)};return D(n)},getAlbums:function(t,e){var n={method:"GET",path:"/albums?ids=".concat(t,"&market=").concat(e)};return D(n)},getAlbumsTracks:function(t,e,n,a){var r={method:"GET",path:"/albums/".concat(t,"/tracks?limit=").concat(e,"&offset=").concat(n,"&market=").concat(a)};return D(r)},getSavedAlbums:function(t,e,n){var a={method:"GET",path:"/me/albums?limit=".concat(t,"&offset=").concat(e,"&market=").concat(n)};return D(a)},saveAlbums:function(t){var e={method:"PUT",path:"/me/albums",body:JSON.stringify({ids:t})};return D(e)},removeAlbums:function(t){var e={method:"DELETE",path:"/me/albums",body:JSON.stringify({ids:t})};return D(e)},checkSavedAlbums:function(t){var e={method:"GET",path:"/me/albums/contains?ids=".concat(t)};return D(e)},getNewReleases:function(t,e,n){var a={method:"GET",path:"/browse/new-releases?limit=".concat(t,"&offset=").concat(e,"&country=").concat(n)};return D(a)}},J={getArtist:function(t){var e={method:"GET",path:"/artists/".concat(t)};return D(e)},getArtists:function(t){var e={method:"GET",path:"/artists?ids=".concat(t)};return D(e)},getArtistAlbums:function(t,e,n,a,r){var c={method:"GET",path:"/artists/".concat(t,"/albums?include_groups=").concat(e,"&limit=").concat(n,"&offset=").concat(a,"$market=").concat(r)};return D(c)},getArtistTopTracks:function(t,e){var n={method:"GET",path:"/artists/".concat(t,"/top-tracks?market=").concat(e)};return D(n)},getArtistRelatedArtists:function(t){var e={method:"GET",path:"/artists/".concat(t,"/related-artists")};return D(e)}},M={getTrack:function(t,e){var n={method:"GET",path:"/tracks/".concat(t,"?market=").concat(e)};return D(n)},getTracks:function(t,e){var n={method:"GET",path:"/tracks?ids=".concat(t,"&market=").concat(e)};return D(n)},getSavedTracks:function(t,e,n){var a={method:"GET",path:"/me/tracks?limit=".concat(t,"&offset=").concat(e,"&market=").concat(n)};return D(a)},saveTracks:function(t){var e={method:"PUT",path:"/me/tracks",body:JSON.stringify({ids:t})};return D(e)},removeTracks:function(t){var e={method:"DELETE",path:"/me/tracks",body:JSON.stringify({ids:t})};return D(e)},checkSavedTracks:function(t){var e={method:"GET",path:"/me/tracks/contains?ids=".concat(t)};return D(e)},getTracksAudioFeatures:function(t){var e={method:"GET",path:"/audio-features?ids=".concat(t)};return D(e)},getTrackAudioFeatures:function(t){var e={method:"GET",path:"/audio-features/".concat(t)};return D(e)},getTrackAudioAnalysis:function(t){var e={method:"GET",path:"/audio-analysis/".concat(t)};return D(e)},getRecommendations:function(t){var e={method:"GET",path:"/recommendations?        limit=".concat(t.limit,"&        market=").concat(t.market,"&        max_acousticness=").concat(t.max_acousticness,"&        max_danceability=").concat(t.max_danceability,"&        max_duration_ms=").concat(t.max_duration_ms,"&        max_energy=").concat(t.max_energy,"&        max_instrumentalness=").concat(t.max_instrumentalness,"&        max_key=").concat(t.max_key,"&        max_liveness=").concat(t.max_liveness,"&        max_loudness=").concat(t.max_loudness,"&        max_mode=").concat(t.max_mode,"&        max_popularity=").concat(t.max_popularity,"&        max_speechiness=").concat(t.max_speechiness,"&        max_tempo=").concat(t.max_tempo,"&        max_time_signature=").concat(t.max_time_signature,"&        max_valence=").concat(t.max_valence,"&        min_acousticness=").concat(t.min_acousticness,"&        min_danceability=").concat(t.min_danceability,"&        min_duration_ms=").concat(t.min_duration_ms,"&        min_energy=").concat(t.min_energy,"&        min_instrumentalness=").concat(t.min_instrumentalness,"&        min_key=").concat(t.min_key,"&        min_liveness=").concat(t.min_liveness,"&        min_loudness=").concat(t.min_loudness,"&        min_mode=").concat(t.min_mode,"&        min_popularity=").concat(t.min_popularity,"&        min_speechiness=").concat(t.min_speechiness,"&        min_tempo=").concat(t.min_tempo,"&        min_time_signature=").concat(t.min_time_signature,"&        min_valence=").concat(t.min_valence,"&        seed_artists=").concat(t.seed_artists,"&        seed_genres=").concat(t.seed_genres,"&        seed_tracks=").concat(t.seed_tracks,"&        target_acousticness=").concat(t.target_acousticness,"&        target_danceability=").concat(t.target_danceability,"&        target_duration_ms=").concat(t.target_duration_ms,"&        target_energy=").concat(t.target_energy,"&        target_instrumentalness=").concat(t.target_instrumentalness,"&        target_key=").concat(t.target_key,"&        target_liveness=").concat(t.target_liveness,"&        target_loudness=").concat(t.target_loudness,"&        target_mode=").concat(t.target_mode,"&        target_popularity=").concat(t.target_popularity,"&        target_speechiness=").concat(t.target_speechiness,"&        target_tempo=").concat(t.target_tempo,"&        target_time_signature=").concat(t.target_time_signature,"&        target_valence=").concat(t.target_valence,"      ")};return D(e)}},K={search:function(t){var e={method:"GET",path:"/search?        q=".concat(t.q,"        &type=").concat(t.type,"        $include_external=").concat(t.include_external,"        $limit=").concat(t.limit,"        &offset=").concat(t.offset,"        &market=").concat(t.market,"      ")};return D(e)}},F={getCurrentUsersProfile:function(){var t={method:"GET",path:"/me"};return D(t)},getUsersTopArtists:function(t,e,n){var a={method:"GET",path:"/me/top/artists?limit=".concat(t,"&offset=").concat(e,"&time_range=").concat(n)};return D(a)},getUsersTopTracks:function(t,e,n){var a={method:"GET",path:"/me/top/tracks?limit=".concat(t,"&offset=").concat(e,"&time_range=").concat(n)};return D(a)},getUsersProfile:function(t){var e={method:"GET",path:"/users/".concat(t)};return D(e)},followPlaylist:function(t,e){var n={method:"PUT",path:"/playlists/".concat(t,"/followers"),body:JSON.stringify({public:e})};return D(n)},unfollowPlaylist:function(t){var e={method:"DELETE",path:"/playlists/".concat(t,"/followers")};return D(e)},getFollowedArtists:function(t,e,n){var a={method:"GET",path:"/me/following?limit=".concat(t,"&after=").concat(e,"&type=").concat(n)};return D(a)},followArtistsOrUsers:function(t,e){var n={method:"PUT",path:"/me/following?type=".concat(t),body:JSON.stringify({ids:e})};return D(n)},unfollowArtistsOrUsers:function(t,e){var n={method:"DELETE",path:"/me/following?type=".concat(t),body:JSON.stringify({ids:e})};return D(n)},checkUserFollowArtistsOrUsers:function(t,e){var n={method:"GET",path:"/me/following/contains?type=".concat(t,"&ids=").concat(e)};return D(n)},checkUsersFollowPlaylist:function(t,e){var n={method:"GET",path:"/playlists/".concat(t,"/followers/contains?ids=").concat(e)};return D(n)}},q={getPlaylist:function(t,e,n){var a={method:"GET",path:"/playlists/".concat(t,"?fields=").concat(e,"&market=").concat(n)};return D(a)},changePlaylistDetails:function(t,e,n,a,r){var c={method:"PUT",path:"/playlists/".concat(t),body:JSON.stringify({name:e,publics:n,collaborative:a,description:r})};return D(c)},getPlaylistTracks:function(t,e,n,a,r){var c={method:"GET",path:"/playlists/".concat(t,"/tracks?fields=").concat(e,"&limit=").concat(n,"&offset=").concat(a,"&market=").concat(r)};return D(c)},addTracksToPlaylist:function(t,e,n){var a={method:"POST",path:"/playlists/".concat(t,"/tracks"),body:JSON.stringify({position:e,uris:n})};return D(a)},reorderPlaylistTracks:function(t,e,n,a,r){var c={method:"PUT",path:"/playlists/".concat(t,"/tracks"),body:JSON.stringify({range_start:e,insert_before:n,range_length:a,snapshot_id:r})};return D(c)},replacePlaylistTracks:function(t,e){var n={method:"PUT",path:"/playlists/".concat(t,"/tracks"),body:JSON.stringify({uris:e})};return D(n)},removePlaylistTracks:function(t,e){var n={method:"DELETE",path:"/playlists/".concat(t,"/tracks"),body:JSON.stringify({tracks:e})};return D(n)},getCurrentUserPlaylists:function(t,e){var n={method:"GET",path:"/me/playlists?limit=".concat(t,"&offset=").concat(e)};return D(n)},getUserPlaylists:function(t,e,n){var a={method:"GET",path:"/users/".concat(t,"/playlists?limit=").concat(e,"&offset=").concat(n)};return D(a)},createPlaylist:function(t,e,n,a,r){var c={method:"POST",path:"/users/".concat(t,"/playlists"),body:JSON.stringify({name:e,publics:n,collaborative:a,description:r})};return D(c)},getFeaturedPlaylists:function(t,e,n,a,r){var c={method:"GET",path:"/browse/featured-playlists?country=".concat(t,"&locale=").concat(e,"&timestamp=").concat(n,"&limit=").concat(a,"&offset=").concat(r)};return D(c)},getCategorysPlaylists:function(t,e,n,a){var r={method:"GET",path:"/browse/categories/".concat(t,"/playlists?country=").concat(e,"&limit=").concat(n,"&offset=").concat(a)};return D(r)},getPlaylistImage:function(t){var e={method:"GET",path:"/playlists/".concat(t,"/images")};return D(e)},setPlaylistImage:function(t){var e={method:"PUT",path:"/playlists/".concat(t,"/images")};return D(e)}},z={getPlaybackState:function(){var t={method:"GET",path:"/me/player"};return D(t)},transferPlayback:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={method:"PUT",path:"/me/player",body:JSON.stringify({device_ids:[t],play:e})};return D(n)},getAvailableDevices:function(){var t={method:"GET",path:"/me/player/devices"};return D(t)},getCurrentTrack:function(){var t={method:"GET",path:"/me/player/currently-playing"};return D(t)},togglePlayback:function(t){var e={method:"PUT",path:"/me/player/play?device_id=".concat(t.device_id),body:JSON.stringify(t)};return D(e)},pausePlayback:function(t){var e={method:"PUT",path:"/me/player/pause?device_id=".concat(t)};return D(e)},nextTrack:function(t){var e={method:"POST",path:"/me/player/next?device_id=".concat(t)};return D(e)},prevTrack:function(t){var e={method:"POST",path:"/me/player/previous?device_id=".concat(t)};return D(e)},seek:function(t,e){var n={method:"POST",path:"/me/player/seek?position_ms=".concat(t,"&device_id=").concat(e)};return D(n)},setRepeatMode:function(t,e){var n={method:"PUT",path:"/me/player/repeat?state=".concat(t,"&device_id=").concat(e)};return D(n)},setVolume:function(t,e){var n={method:"PUT",path:"/me/player/volume?volume_percent=".concat(t,"&device_id=").concat(e)};return D(n)},togglePlaybackShuffle:function(t,e){var n={method:"PUT",path:"/me/player/shuffle?state=".concat(t,"&device_id=").concat(e)};return D(n)},getRecentlyPlayedTracks:function(t){var e={method:"GET",path:"/me/player/recently-played?after=".concat(t.after,"&before=").concat(t.before,"$limit=").concat(t.limit)};return D(e)},addToPlaybackQueue:function(t,e){var n={method:"POST",path:"/me/player/queue?uri=".concat(t,"&device_id=").concat(e)};return D(n)}},H={SDK:V,albums:L,artists:J,tracks:M,search:K,users:F,playlists:q,player:z},W={backend:B,spotify:H},X=function(t){Object(b["a"])(n,t);var e=Object(y["a"])(n);function n(){return Object(h["a"])(this,n),e.apply(this,arguments)}return Object(f["a"])(n)}(g["b"]);X=Object(v["a"])([Object(g["a"])({data:function(){return{}},methods:{playPause:function(){W.spotify.SDK.togglePlay(this.$store.state.player.player)},previousTrack:function(){W.spotify.SDK.previousTrack(this.$store.state.player.player)},nextTrack:function(){W.spotify.SDK.nextTrack(this.$store.state.player.player)},toggleShuffle:function(){W.spotify.player.togglePlaybackShuffle(!this.$store.state.player.playback_state.shuffle,this.$store.state.player.device_id)},toggleRepeatMode:function(){var t="";switch(this.$store.state.player.playback_state.repeat_mode){case 0:t="context";break;case 1:t="track";break;case 2:t="off";break}W.spotify.player.setRepeatMode(t,this.$store.state.player.device_id)}}})],X);var Q=X;n("6de0");const Y=o()(Q,[["render",G],["__scopeId","data-v-3668c9ba"]]);var Z=Y,tt={class:"cb-playback"},et={class:"cb-progress-time"},nt={class:"cb-progress-bar"},at={class:"cb-progress-time"};function rt(t,e,n,r,c,o){var s=Object(a["resolveComponent"])("vue-slider");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",tt,[Object(a["createElementVNode"])("div",et,Object(a["toDisplayString"])(t.msToTime(t.progress)),1),Object(a["createElementVNode"])("div",nt,[Object(a["createVNode"])(s,{modelValue:t.progress,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.progress=e}),max:t.duration,onChange:t.onProgressChange,tooltip:"none",railStyle:{background:"var(--color-control)"},processStyle:{background:"var(--color-accent)"}},null,8,["modelValue","max","onChange","railStyle","processStyle"])]),Object(a["createElementVNode"])("div",at,Object(a["toDisplayString"])(t.msToTime(t.duration)),1)])}n("b65f");var ct=function(t){Object(b["a"])(n,t);var e=Object(y["a"])(n);function n(){return Object(h["a"])(this,n),e.apply(this,arguments)}return Object(f["a"])(n)}(g["b"]);ct=Object(v["a"])([Object(g["a"])({data:function(){return{progress:0,duration:0,inverval:null}},computed:{is_playing:function(){return this.$store.state.player.playback_state.paused},context:function(){return this.$store.state.player.playback_state.context}},methods:{updateProgress:function(){var t=this;clearInterval(this.inverval),this.progress=this.$store.state.player.playback_state.position,this.$store.state.player.playback_state.paused||(this.inverval=setInterval((function(){t.progress+1e3<=t.duration&&(t.progress+=1e3)}),1e3))},onProgressChange:function(t){console.log(t),this.$store.state.player.player.seek(t)},msToTime:function(t){var e=Math.trunc(t/6e4),n=Math.trunc((t-6e4*e)/1e3),a=String(n);return n<10&&(a="0"+a),e+":"+a}},watch:{context:function(){this.duration=this.$store.state.player.playback_state.duration,this.progress=this.$store.state.player.playback_state.position},is_playing:function(){this.updateProgress()}},mounted:function(){this.duration=this.$store.state.player.playback_state.duration,this.updateProgress()}})],ct);var ot=ct;n("dee2");const st=o()(ot,[["render",rt],["__scopeId","data-v-83ee0c28"]]);var it=st,ut=function(t){Object(b["a"])(n,t);var e=Object(y["a"])(n);function n(){return Object(h["a"])(this,n),e.apply(this,arguments)}return Object(f["a"])(n)}(g["b"]);ut=Object(v["a"])([Object(g["a"])({components:{ControlButtons:Z,ControlPlayback:it}})],ut);var lt=ut;n("b4e8");const pt=o()(lt,[["render",S],["__scopeId","data-v-206fd301"]]);var dt=pt,mt=function(t){Object(b["a"])(n,t);var e=Object(y["a"])(n);function n(){return Object(h["a"])(this,n),e.apply(this,arguments)}return Object(f["a"])(n)}(g["b"]);mt=Object(v["a"])([Object(g["a"])({data:function(){return{loading:!0,token:null}},components:{CircleLoader:j,ControlBar:dt},methods:{run:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.connectToSpotifySDK();case 2:t.loading=!1;case 3:case"end":return e.stop()}}),e)})))()},connectToSpotifySDK:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){var n,a,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=setInterval(Object(m["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=t.$store.state.player.playback_state,null!==r&&(clearInterval(n),e(r));case 2:case"end":return a.stop()}}),a)}))))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=document.createElement("script"),a.src="https://sdk.scdn.co/spotify-player.js",a.async=!0,document.body.appendChild(a),e.next=7,W.spotify.SDK.init(t.token);case 7:return r=e.sent,r.addListener("player_state_changed",(function(e){t.$store.commit("setPlaybackState",e)})),e.next=11,W.spotify.SDK.connect(r);case 11:return c=e.sent,t.$store.commit("setPlayer",r),t.$store.commit("setDeviceID",c.device_id),e.next=16,W.spotify.player.transferPlayback(t.$store.state.player.device_id);case 16:return e.next=18,n();case 18:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.token=localStorage.getItem("access_token"),e.next=3,W.backend.auth.checkToken(t.token);case 3:n=e.sent,n&&"ok"===n.status?t.run():t.$router.push({name:"Login"});case 5:case"end":return e.stop()}}),e)})))()}})],mt);var ft=mt;n("4f97");const ht=o()(ft,[["render",d],["__scopeId","data-v-7e70f3da"]]);var bt=ht,yt=function(t){return Object(a["pushScopeId"])("data-v-440e38dc"),t=t(),Object(a["popScopeId"])(),t},vt={class:"login"},gt=yt((function(){return Object(a["createElementVNode"])("h1",null,"Пожалуйста, авторизуйтесь через Spotify.",-1)}));function kt(t,e,n,r,c,o){var s=Object(a["resolveComponent"])("CircleLoader");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[this.process?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:0})):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",vt,[gt,Object(a["createElementVNode"])("button",{onClick:e[0]||(e[0]=function(){return t.login&&t.login.apply(t,arguments)}),class:"btn"},"Войти")])],64)}n("9911");var _t=function(t){Object(b["a"])(n,t);var e=Object(y["a"])(n);function n(){return Object(h["a"])(this,n),e.apply(this,arguments)}return Object(f["a"])(n)}(g["b"]);_t=Object(v["a"])([Object(g["a"])({data:function(){return{process:!1}},components:{CircleLoader:j},methods:{login:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){var n,a,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=document.querySelector(".login h1"),a=document.querySelector(".login button"),n&&a&&(n.style.transform="translateX(-100vw)",a.style.transform="translateX(100vw)"),t.process=!0,e.next=6,W.backend.auth.getUserAuthURL();case 6:r=e.sent,r.state&&(localStorage.setItem(r.state_key,r.state),c=window.open(r.link,"Login with Spotify","width=800,height=600"),c&&window.addEventListener("message",(function(e){var n=e.data;switch(n.status){case"ok":t.$router.push({name:"Home"});break;default:console.log("switch (data.status): default")}}),!1));case 8:case"end":return e.stop()}}),e)})))()},checkToken:function(){return Object(m["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=localStorage.getItem("access_token"),!e){t.next=7;break}return t.next=4,W.backend.auth.checkToken(e);case 4:if(n=t.sent,!n||"ok"!==n.status){t.next=7;break}return t.abrupt("return",!0);case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})))()}},mounted:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.checkToken();case 2:n=e.sent,n&&t.$router.push({name:"Home"});case 4:case"end":return e.stop()}}),e)})))()}})],_t);var Ot=_t;n("9329");const jt=o()(Ot,[["render",kt],["__scopeId","data-v-440e38dc"]]);var Tt=jt,wt={class:"callback"};function Pt(t,e,n,r,c,o){var s=Object(a["resolveComponent"])("CircleLoader");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",wt,[Object(a["createVNode"])(s)])}var Et=function(t){Object(b["a"])(n,t);var e=Object(y["a"])(n);function n(){return Object(h["a"])(this,n),e.apply(this,arguments)}return Object(f["a"])(n)}(g["b"]);Et=Object(v["a"])([Object(g["a"])({components:{CircleLoader:j},mounted:function(){var t=this.$route.query;t&&t.access_token?(localStorage.setItem("access_token",t.access_token),localStorage.setItem("refresh_token",t.refresh_token),window.opener.postMessage({status:"ok"})):t.error?window.opener.postMessage({status:t.error}):window.opener.postMessage({status:"invalid query"}),localStorage.removeItem("spotify_auth_state"),window.close()}})],Et);var xt=Et;n("6bad");const St=o()(xt,[["render",Pt],["__scopeId","data-v-33337956"]]);var Ct=St,Gt=[{path:"/",name:"Home",component:bt},{path:"/login",name:"Login",component:Tt},{path:"/callback",name:"Callback",component:Ct}],Nt=Object(l["a"])({history:Object(l["b"])(),routes:Gt}),$t=Nt,Ut=n("6d5e"),At=n.n(Ut),Bt=n("4971"),Vt=n.n(Bt),Rt=(n("24df"),n("5502")),It={player:null,device_id:null,playback_state:null};function Dt(t){return t.player}function Lt(t){return t.device_id}function Jt(t){return t.playback_state}var Mt={getPlayer:Dt,getDeviceID:Lt,getPlaybackState:Jt};function Kt(t,e){t.player=e}function Ft(t,e){t.device_id=e}function qt(t,e){t.playback_state=e}var zt={setPlayer:Kt,setDeviceID:Ft,setPlaybackState:qt},Ht={},Wt={state:It,getters:Mt,mutations:zt,actions:Ht},Xt=Object(Rt["a"])({state:{},mutations:{},actions:{},modules:{player:Wt}});Object(a["createApp"])(u).use($t).use(Xt).component("inline-svg",At.a).component("VueSlider",Vt.a).mount("#app")},ce1e:function(t,e,n){t.exports=n.p+"img/control-forward.0892bb3f.svg"},d08e:function(t,e,n){t.exports=n.p+"img/control-play.2f25944e.svg"},dd7f:function(t,e,n){t.exports=n.p+"img/control-pause.e75d8a30.svg"},ddc6:function(t,e,n){},dee2:function(t,e,n){"use strict";n("4264")}});
//# sourceMappingURL=app.74433fe9.js.map