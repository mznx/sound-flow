(function(t){function e(e){for(var n,o,s=e[0],i=e[1],l=e[2],p=0,d=[];p<s.length;p++)o=s[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);u&&u(e);while(d.length)d.shift()();return c.push.apply(c,l||[]),a()}function a(){for(var t,e=0;e<c.length;e++){for(var a=c[e],n=!0,s=1;s<a.length;s++){var i=a[s];0!==r[i]&&(n=!1)}n&&(c.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={app:0},c=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/sound-flow/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=i;c.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"0644":function(t,e,a){},"0c6b":function(t,e,a){},"15bd":function(t,e,a){},1743:function(t,e,a){"use strict";a("e1a6")},"25a8":function(t,e,a){"use strict";a("5a54")},"27c6":function(t,e,a){t.exports=a.p+"img/track-list-pause.1630c2bf.svg"},"31b5":function(t,e,a){"use strict";a("5cf8")},3250:function(t,e,a){},"366c":function(t,e,a){"use strict";a("91f4")},"395a":function(t,e,a){t.exports=a.p+"img/control-repeat.2a16d7ba.svg"},"3dee":function(t,e,a){"use strict";a("3250")},"427b":function(t,e,a){},"44e8":function(t,e,a){"use strict";a("6b3e")},"49d8":function(t,e,a){},5199:function(t,e,a){},"5a54":function(t,e,a){},"5cf8":function(t,e,a){},"610f":function(t,e,a){"use strict";a("0644")},"63b7":function(t,e,a){"use strict";a("f74b")},"6b3e":function(t,e,a){},"6e62":function(t,e,a){"use strict";a("427b")},7030:function(t,e,a){},8803:function(t,e,a){"use strict";a("e7e2")},"8ba3":function(t,e,a){t.exports=a.p+"img/control-back.5fcd24e1.svg"},"8d18":function(t,e,a){},9017:function(t,e,a){"use strict";a("b3b6")},"91f4":function(t,e,a){},"949c":function(t,e,a){"use strict";a("0c6b")},"96bc":function(t,e,a){},"98f8":function(t,e,a){"use strict";a("15bd")},"9a9c":function(t,e,a){t.exports=a.p+"img/track-list-current.78e316af.svg"},aa9f:function(t,e,a){"use strict";a("7030")},ac3a:function(t,e,a){t.exports=a.p+"img/track-list-play.d8e45602.svg"},b3b6:function(t,e,a){},cab9:function(t,e,a){t.exports=a.p+"img/control-shuffle.a853ab1c.svg"},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("7a23");function r(t,e,a,r,c,o){var s=Object(n["resolveComponent"])("router-view");return t.inited?(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:0})):Object(n["createCommentVNode"])("",!0)}var c=a("1da1"),o=a("5530"),s=a("bee2"),i=a("d4ec"),l=a("262e"),u=a("2caf"),p=(a("96cf"),a("9ab4")),d=a("ce1f"),b=a("5502"),m=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);m=Object(p["a"])([Object(d["a"])({components:{},computed:Object(o["a"])({},Object(b["c"])({inited:"app/getInitState",status:"app/getStatus"})),methods:Object(o["a"])({},Object(b["b"])({init:"app/init"})),created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.init();case 1:case"end":return e.stop()}}),e)})))()}})],m);var f=m,h=(a("6e62"),a("6b0d")),y=a.n(h);const v=y()(f,[["render",r]]);var g=v,O=a("6c02"),k={key:1,class:"app-layout"},j={class:"app-layout-content"},_={class:"content-wrapper"};function T(t,e,a,r,c,o){var s=Object(n["resolveComponent"])("CircleLoader"),i=Object(n["resolveComponent"])("InfoBar"),l=Object(n["resolveComponent"])("router-view"),u=Object(n["resolveComponent"])("ControlBar");return"loaded"!==t.status?(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:0})):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",k,[Object(n["createVNode"])(i),Object(n["createElementVNode"])("div",j,[Object(n["createElementVNode"])("div",_,[Object(n["createVNode"])(l)])]),Object(n["createVNode"])(u)]))}function E(t,e,a,r,c,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])("span")}var S=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);a("25a8");const w=y()(S,[["render",E],["__scopeId","data-v-dcff6744"]]);var P=w,x={class:"info-bar"};function N(t,e,a,r,c,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",x)}var V=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);V=Object(p["a"])([Object(d["a"])({})],V);var C=V;a("98f8");const B=y()(C,[["render",N],["__scopeId","data-v-5000a6f1"]]);var A=B,I={class:"control-bar"},R={class:"cb-left"},U={class:"cb-center"},D={class:"cb-right"};function q(t,e,a,r,c,o){var s=Object(n["resolveComponent"])("ControlCurrentTrack"),i=Object(n["resolveComponent"])("ControlButtons"),l=Object(n["resolveComponent"])("ControlPlayback"),u=Object(n["resolveComponent"])("ControlVolume");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",I,[Object(n["createElementVNode"])("div",R,[Object(n["createVNode"])(s,{player:t.player,playback_state:t.playback_state},null,8,["player","playback_state"])]),Object(n["createElementVNode"])("div",U,[Object(n["createVNode"])(i,{player:t.player,device_id:t.device_id,playback_state:t.playback_state},null,8,["player","device_id","playback_state"]),Object(n["createVNode"])(l,{player:t.player,playback_state:t.playback_state},null,8,["player","playback_state"])]),Object(n["createElementVNode"])("div",D,[Object(n["createVNode"])(u,{player:t.player,playback_state:t.playback_state},null,8,["player","playback_state"])])])}var L={class:"cb-buttons"};function G(t,e,r,c,o,s){var i=Object(n["resolveComponent"])("inline-svg");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",L,[Object(n["createElementVNode"])("button",{class:Object(n["normalizeClass"])(["cb-shuffle",{active:this.playback_state.shuffle}]),onClick:e[0]||(e[0]=function(){return t.toggleShuffle&&t.toggleShuffle.apply(t,arguments)})},[Object(n["createVNode"])(i,{src:a("cab9")},null,8,["src"])],2),Object(n["createElementVNode"])("button",{class:"cb-back",onClick:e[1]||(e[1]=function(){return t.previousTrack&&t.previousTrack.apply(t,arguments)})},[Object(n["createVNode"])(i,{src:a("8ba3")},null,8,["src"])]),Object(n["createElementVNode"])("button",{class:"cb-playpause",onClick:e[2]||(e[2]=function(){return t.playPause&&t.playPause.apply(t,arguments)})},[this.playback_state.paused?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:0,src:a("d08e"),width:"30px",height:"30px"},null,8,["src"])):(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:1,src:a("dd7f"),width:"30px",height:"30px"},null,8,["src"]))]),Object(n["createElementVNode"])("button",{class:"cb-forward",onClick:e[3]||(e[3]=function(){return t.nextTrack&&t.nextTrack.apply(t,arguments)})},[Object(n["createVNode"])(i,{src:a("ce1e")},null,8,["src"])]),Object(n["createElementVNode"])("button",{class:Object(n["normalizeClass"])(["cb-repeat",[{active:0!==this.playback_state.repeat_mode},{track:2===this.playback_state.repeat_mode}]]),onClick:e[4]||(e[4]=function(){return t.toggleRepeatMode&&t.toggleRepeatMode.apply(t,arguments)})},[Object(n["createVNode"])(i,{src:a("395a")},null,8,["src"])],2)])}a("d3b7");var M="https://api-sf.mznx.xyz",K=function(t){var e=t.method,a=M+t.path;return fetch(a,{method:e}).then((function(t){return t.json()}))},z=K,J={getUserAuthURL:function(){var t={method:"GET",path:"/auth/login"};return z(t)},checkToken:function(t){var e={method:"GET",path:"/auth/check_token?access_token=".concat(t)};return z(e)}},F={auth:J},$={init:function(t){return new Promise((function(e){window.onSpotifyWebPlaybackSDKReady=function(){var a=new window.Spotify.Player({name:"Sound Flow (Web Playback SDK)",getOAuthToken:function(e){e(t)},volume:.5});e(a)}}))},connect:function(t){return new Promise((function(e){t.connect().then((function(t){t&&(console.log("The Web Playback SDK successfully connected to Spotify!"),e(!0))}))}))},disconnect:function(t){t.disconnect()},togglePlay:function(t){return t.togglePlay()},previousTrack:function(t){return t.previousTrack()},nextTrack:function(t){return t.nextTrack()},seek:function(t,e){return t.seek(e)},getVolume:function(t){return t.getVolume()},setVolume:function(t,e){return t.setVolume(e)}};a("99af"),a("e9c4"),a("b65f"),a("159b");function H(t){var e="";return t&&JSON.parse(JSON.stringify(t),(function(t,a){e+="".concat(t,"=").concat(a,"&")})),e}function W(t,e){var a=Math.trunc(t/36e5),n=Math.trunc((t-36e5*a)/6e4),r=Math.trunc((t-36e5*a-6e4*n)/1e3),c=":",o=":",s="";e&&(c="h ",o="m ",s="s");var i="";return a?(i+="".concat(a).concat(c),i+=n<10?"0".concat(n).concat(o):"".concat(n).concat(o)):i+="".concat(n).concat(o),i+=r<10?"0".concat(r).concat(s):"".concat(r).concat(s),i}function Y(t,e){var a=t[0].url;if(t[0].height){var n=t[0].height;t.forEach((function(t){t.height&&(e?t.height>=n&&(a=t.url,n=t.height):t.height<=n&&(a=t.url,n=t.height))}))}return a}var X="https://api.spotify.com/v1",Q=function(t){var e=t.method,a=X+t.path;return fetch(a,{method:e,headers:{Authorization:"Bearer "+localStorage.getItem("access_token")},body:t.body?t.body:null}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(){return null}))},Z=Q,tt={getAlbum:function(t){var e=H(t.query),a={method:"GET",path:"/albums/".concat(t.params.id,"?").concat(e)};return Z(a)},getAlbums:function(t){var e=H(t.query),a={method:"GET",path:"/albums?".concat(e)};return Z(a)},getAlbumsTracks:function(t){var e=H(t.query),a={method:"GET",path:"/albums/".concat(t.params.id,"/tracks?").concat(e)};return Z(a)},getSavedAlbums:function(t){var e=H(t.query),a={method:"GET",path:"/me/albums?".concat(e)};return Z(a)},saveAlbums:function(t){var e={method:"PUT",path:"/me/albums",body:JSON.stringify(t.body)};return Z(e)},removeAlbums:function(t){var e={method:"DELETE",path:"/me/albums",body:JSON.stringify(t.body)};return Z(e)},checkSavedAlbums:function(t){var e=H(t.query),a={method:"GET",path:"/me/albums/contains?".concat(e)};return Z(a)},getNewReleases:function(t){var e=H(t.query),a={method:"GET",path:"/browse/new-releases?".concat(e)};return Z(a)}},et={getArtist:function(t){var e={method:"GET",path:"/artists/".concat(t.params.id)};return Z(e)},getArtists:function(t){var e=H(t.query),a={method:"GET",path:"/artists?".concat(e)};return Z(a)},getArtisAlbums:function(t){var e=H(t.query),a={method:"GET",path:"/artists/".concat(t.params.id,"/albums?").concat(e)};return Z(a)},getArtisTopTracks:function(t){var e=H(t.query),a={method:"GET",path:"/artists/".concat(t.params.id,"/top-tracks?").concat(e)};return Z(a)},getArtistRelatedArtists:function(t){var e={method:"GET",path:"/artists/".concat(t.params.id,"/related-artists")};return Z(e)}},at={getTrack:function(t){var e=H(t.query),a={method:"GET",path:"/tracks/".concat(t.params.id,"?").concat(e)};return Z(a)},getTracks:function(t){var e=H(t.query),a={method:"GET",path:"/tracks?".concat(e)};return Z(a)},getSavedTracks:function(t){var e=H(t.query),a={method:"GET",path:"/me/tracks?".concat(e)};return Z(a)},saveTracks:function(t){var e={method:"PUT",path:"/me/tracks",body:JSON.stringify(t.body)};return Z(e)},removeTracks:function(t){var e={method:"DELETE",path:"/me/tracks",body:JSON.stringify(t.body)};return Z(e)},checkSavedTracks:function(t){var e=H(t.query),a={method:"GET",path:"/me/tracks/contains?".concat(e)};return Z(a)},getTracksAudioFeatures:function(t){var e=H(t.query),a={method:"GET",path:"/audio-features?".concat(e)};return Z(a)},getTrackAudioFeatures:function(t){var e={method:"GET",path:"/audio-features/".concat(t.params.id)};return Z(e)},getTrackAudioAnalysis:function(t){var e={method:"GET",path:"/audio-analysis/".concat(t.params.id)};return Z(e)},getRecommendations:function(t){var e=H(t.query),a={method:"GET",path:"/recommendations?".concat(e)};return Z(a)}},nt={search:function(t){var e=H(t.query),a={method:"GET",path:"/search?".concat(e)};return Z(a)}},rt={getCurrentUsersProfile:function(){var t={method:"GET",path:"/me"};return Z(t)},getUserTopArtists:function(t){var e=H(t.query),a={method:"GET",path:"/me/top/artists?".concat(e)};return Z(a)},getUserTopTracks:function(t){var e=H(t.query),a={method:"GET",path:"/me/top/tracks?".concat(e)};return Z(a)},getUserProfile:function(t){var e={method:"GET",path:"/users/".concat(t.params.user_id)};return Z(e)},followPlaylist:function(t){var e={method:"PUT",path:"/playlists/".concat(t.params.playlist_id,"/followers"),body:JSON.stringify(t)};return Z(e)},unfollowPlaylist:function(t){var e={method:"DELETE",path:"/playlists/".concat(t.params.playlist_id,"/followers")};return Z(e)},getFollowedArtists:function(t){var e=H(t.query),a={method:"GET",path:"/me/following?".concat(e)};return Z(a)},followArtistsOrUsers:function(t){var e=H(t.query),a={method:"PUT",path:"/me/following?".concat(e)};return Z(a)},unfollowArtistsOrUsers:function(t){var e=H(t.query),a={method:"DELETE",path:"/me/following?".concat(e)};return Z(a)},checkUserFollowArtistsOrUsers:function(t){var e=H(t.query),a={method:"GET",path:"/me/following/contains?".concat(e)};return Z(a)},checkUsersFollowPlaylist:function(t){var e=H(t.query),a={method:"GET",path:"/playlists/".concat(t.params.playlist_id,"/followers/contains?").concat(e)};return Z(a)}},ct={getPlaylist:function(t){var e=H(t.query),a={method:"GET",path:"/playlists/".concat(t.params.playlist_id,"?").concat(e)};return Z(a)},changePlaylistDetails:function(t){var e={method:"PUT",path:"/playlists/".concat(t.params.playlist_id),body:JSON.stringify(t.body)};return Z(e)},getPlaylistTracks:function(t){var e=H(t.query),a={method:"GET",path:"/playlists/".concat(t.params.playlist_id,"/tracks?").concat(e)};return Z(a)},addTracksToPlaylist:function(t){var e={method:"POST",path:"/playlists/".concat(t.params.playlist_id,"/tracks"),body:JSON.stringify(t.body)};return Z(e)},reorderPlaylistTracks:function(t){var e={method:"PUT",path:"/playlists/".concat(t.params.playlist_id,"/tracks"),body:JSON.stringify(t.body)};return Z(e)},replacePlaylistTracks:function(t){var e={method:"PUT",path:"/playlists/".concat(t.params.playlist_id,"/tracks"),body:JSON.stringify(t.body)};return Z(e)},removePlaylistTracks:function(t){var e={method:"DELETE",path:"/playlists/".concat(t.params.playlist_id,"/tracks"),body:JSON.stringify(t.body)};return Z(e)},getCurrentUserPlaylists:function(t){var e=H(t.query),a={method:"GET",path:"/me/playlists?".concat(e)};return Z(a)},getUserPlaylists:function(t){var e=H(t.query),a={method:"GET",path:"/users/".concat(t.params.user_id,"/playlists?").concat(e)};return Z(a)},createPlaylist:function(t){var e={method:"POST",path:"/users/".concat(t.params.user_id,"/playlists"),body:JSON.stringify(t.body)};return Z(e)},getFeaturedPlaylists:function(t){var e=H(t.query),a={method:"GET",path:"/browse/featured-playlists?".concat(e)};return Z(a)},getCategorysPlaylists:function(t){var e=H(t.query),a={method:"GET",path:"/browse/categories/".concat(t.params.category_id,"/playlists?").concat(e)};return Z(a)},getPlaylistImage:function(t){var e={method:"GET",path:"/playlists/".concat(t.params.playlist_id,"/images")};return Z(e)},setPlaylistImage:function(t){var e={method:"PUT",path:"/playlists/".concat(t.params.playlist_id,"/images")};return Z(e)}},ot={getPlaybackState:function(t){var e=H(t.query),a={method:"GET",path:"/me/player?".concat(e)};return Z(a)},transferPlayback:function(t){var e={method:"PUT",path:"/me/player",body:JSON.stringify(t.body)};return Z(e)},getAvailableDevices:function(){var t={method:"GET",path:"/me/player/devices"};return Z(t)},getCurrentTrack:function(t){var e=H(t.query),a={method:"GET",path:"/me/player/currently-playing?".concat(e)};return Z(a)},startPlayback:function(t){var e=H(t.query),a={method:"PUT",path:"/me/player/play?".concat(e),body:JSON.stringify(t.body)};return Z(a)},pausePlayback:function(t){var e=H(t.query),a={method:"PUT",path:"/me/player/pause?".concat(e)};return Z(a)},nextTrack:function(t){var e=H(t.query),a={method:"POST",path:"/me/player/next?".concat(e)};return Z(a)},prevTrack:function(t){var e=H(t.query),a={method:"POST",path:"/me/player/previous?".concat(e)};return Z(a)},seek:function(t){var e=H(t.query),a={method:"POST",path:"/me/player/seek?".concat(e)};return Z(a)},setRepeatMode:function(t){var e=H(t.query),a={method:"PUT",path:"/me/player/repeat?".concat(e)};return Z(a)},setVolume:function(t){var e=H(t.query),a={method:"PUT",path:"/me/player/volume?".concat(e)};return Z(a)},togglePlaybackShuffle:function(t){var e=H(t.query),a={method:"PUT",path:"/me/player/shuffle?".concat(e)};return Z(a)},getRecentlyPlayedTracks:function(t){var e=H(t.query),a={method:"GET",path:"/me/player/recently-played?".concat(e)};return Z(a)},addToPlaybackQueue:function(t){var e=H(t.query),a={method:"POST",path:"/me/player/queue?".concat(e)};return Z(a)}},st={SDK:$,albums:tt,artists:et,tracks:at,search:nt,users:rt,playlists:ct,player:ot},it={backend:F,spotify:st},lt=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);lt=Object(p["a"])([Object(d["a"])({props:{player:Object,device_id:String,playback_state:Object},methods:{playPause:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,it.spotify.SDK.togglePlay(t.player);case 2:case"end":return e.stop()}}),e)})))()},previousTrack:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,it.spotify.SDK.previousTrack(t.player);case 2:case"end":return e.stop()}}),e)})))()},nextTrack:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,it.spotify.SDK.nextTrack(t.player);case 2:case"end":return e.stop()}}),e)})))()},toggleShuffle:function(){it.spotify.player.togglePlaybackShuffle({query:{state:!this.playback_state.shuffle,device_id:this.device_id}})},toggleRepeatMode:function(){var t="";switch(this.playback_state.repeat_mode){case 0:t="context";break;case 1:t="track";break;case 2:t="off";break}it.spotify.player.setRepeatMode({query:{state:t,device_id:this.device_id}})}}})],lt);var ut=lt;a("63b7");const pt=y()(ut,[["render",G],["__scopeId","data-v-0a5c14c8"]]);var dt=pt,bt={class:"cb-playback"},mt={class:"cb-progress-time"},ft={class:"cb-progress-bar"},ht={class:"cb-progress-time"};function yt(t,e,a,r,c,o){var s=Object(n["resolveComponent"])("Slider");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",bt,[Object(n["createElementVNode"])("div",mt,Object(n["toDisplayString"])(t.getTime(t.progress)),1),Object(n["createElementVNode"])("div",ft,[Object(n["createVNode"])(s,{modelValue:t.progress,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.progress=e}),style_bg:{backgroundColor:"var(--color-control)"},style_fg:{backgroundColor:"var(--color-accent)"},style_dot:{backgroundColor:"var(--color-control-light)"},max:t.duration,onUp:t.onProgressChange},null,8,["modelValue","style_bg","style_fg","style_dot","max","onUp"])]),Object(n["createElementVNode"])("div",ht,Object(n["toDisplayString"])(t.getTime(t.duration)),1)])}function vt(t,e,a,r,c,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"slider",style:Object(n["normalizeStyle"])(t.style.general),ref:"slider",onMouseover:e[0]||(e[0]=function(){return t.onSliderOver&&t.onSliderOver.apply(t,arguments)}),onMouseout:e[1]||(e[1]=function(){return t.onSliderOut&&t.onSliderOut.apply(t,arguments)}),onMousedown:e[2]||(e[2]=function(){return t.onSliderDown&&t.onSliderDown.apply(t,arguments)})},[Object(n["createElementVNode"])("div",{class:"slider-backgroound",style:Object(n["normalizeStyle"])(t.style.bg)},[Object(n["createElementVNode"])("div",{class:"slider-fill",style:Object(n["normalizeStyle"])(t.style.fg)},null,4)],4),Object(n["createElementVNode"])("div",{class:"slider-dot",style:Object(n["normalizeStyle"])(t.style.dot)},null,4)],36)}a("a9e3");var gt=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);gt=Object(p["a"])([Object(d["a"])({props:{style_bg:Object,style_fg:Object,style_dot:Object,height:Number,dot_size:Number,min:Number,max:Number,modelValue:Number},emits:["update:modelValue","down","up","move"],data:function(){return{_dot_size:12,_min:0,_max:100,slider_pressed:!1,slider_over:!1,style:{}}},methods:{setValue:function(t){t<this._min?t=this._min:t>this._max&&(t=this._max),this.$emit("update:modelValue",t)},updateSlider:function(){var t=(this.modelValue-this._min)/(this._max-this._min)*100;this.style.fg.transform="translateX(calc(-100% + ".concat(t,"%))"),this.style.dot.left="".concat(t,"%"),this.slider_over?this.style.dot.display="block":this.slider_pressed||(this.style.dot.display="none")},onSliderDown:function(){this.slider_pressed=!0,window.addEventListener("mouseup",this.onSliderUp),window.addEventListener("mousemove",this.onSliderMove),this.$emit("down")},onSliderUp:function(t){this.slider_pressed=!1,window.removeEventListener("mouseup",this.onSliderUp),window.removeEventListener("mousemove",this.onSliderMove),this.onSliderMove(t),this.updateSlider(),this.$emit("up")},onSliderMove:function(t){var e=this.$refs.slider.getBoundingClientRect(),a=t.clientX-e.left;a<0&&(a=0),a>e.width&&(a=e.width);var n=a/e.width;this.setValue((this._max-this._min)*n+this._min),this.$emit("move");var r=window.getSelection();null!==r&&r.removeAllRanges()},onSliderOver:function(){this.slider_over=!0,this.updateSlider()},onSliderOut:function(){this.slider_over=!1,this.updateSlider()}},mounted:function(){this.min&&(this._min=this.min),this.max&&(this._max=this.max),this.dot_size&&(this._dot_size=this.dot_size),this.style={general:{height:"".concat(this.height+8,"px")},bg:{},fg:{},dot:{width:"".concat(this._dot_size,"px"),height:"".concat(this._dot_size,"px"),top:"calc(-50% - ".concat(this._dot_size/2,"px)"),transform:"translateX(-".concat(this._dot_size/2,"px)")}},Object.assign(this.style.bg,this.style_bg),Object.assign(this.style.fg,this.style_fg),Object.assign(this.style.dot,this.style_dot),this.updateSlider()},watch:{min:function(){this._min=this.min,this.updateSlider()},max:function(){this._max=this.max,this.updateSlider()},modelValue:function(){this.updateSlider()}}})],gt);var Ot=gt;a("366c");const kt=y()(Ot,[["render",vt],["__scopeId","data-v-3ff17a22"]]);var jt=kt,_t=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);_t=Object(p["a"])([Object(d["a"])({props:{player:Object,playback_state:Object},data:function(){return{progress:0,duration:0,inverval:null}},components:{Slider:jt},computed:{is_playing:function(){return this.playback_state.paused},context:function(){return this.playback_state.context}},methods:{updateProgress:function(){var t=this;clearInterval(this.inverval),this.progress=this.playback_state.position,this.playback_state.paused||(this.inverval=setInterval((function(){t.progress+1e3<=t.duration&&(t.progress+=1e3)}),1e3))},onProgressChange:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,it.spotify.SDK.seek(t.player,t.progress);case 2:case"end":return e.stop()}}),e)})))()},getTime:function(t){return W(t,!1)}},watch:{context:function(){this.duration=this.playback_state.duration,this.progress=this.playback_state.position},is_playing:function(){this.updateProgress()}},created:function(){this.duration=this.playback_state.duration,this.updateProgress()}})],_t);var Tt=_t;a("31b5");const Et=y()(Tt,[["render",yt],["__scopeId","data-v-58c4da66"]]);var St=Et,wt={class:"cb-volume"};function Pt(t,e,a,r,c,o){var s=Object(n["resolveComponent"])("Slider");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",wt,[Object(n["createVNode"])(s,{modelValue:t.volume,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.volume=e}),style_bg:{backgroundColor:"var(--color-control)"},style_fg:{backgroundColor:"var(--color-accent)"},style_dot:{backgroundColor:"var(--color-control-light)"},max:1,onUp:t.onVolumeChange,onMove:t.onVolumeChange},null,8,["modelValue","style_bg","style_fg","style_dot","onUp","onMove"])])}var xt=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);xt=Object(p["a"])([Object(d["a"])({props:{player:Object,playback_state:Object},data:function(){return{volume:0}},components:{Slider:jt},computed:{context:function(){return this.playback_state.context}},methods:{onVolumeChange:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,it.spotify.SDK.setVolume(t.player,t.volume);case 2:case"end":return e.stop()}}),e)})))()}},watch:{context:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,it.spotify.SDK.getVolume(t.player);case 2:t.volume=e.sent;case 3:case"end":return e.stop()}}),e)})))()}}})],xt);var Nt=xt;a("1743");const Vt=y()(Nt,[["render",Pt],["__scopeId","data-v-74b6e23b"]]);var Ct=Vt,Bt=(a("b0c0"),{class:"cb-track"}),At=["src"],It={class:"cb-track-info"},Rt={class:"cb-track-artists"},Ut={key:0};function Dt(t,e,a,r,c,o){var s=Object(n["resolveComponent"])("router-link");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Bt,[Object(n["createElementVNode"])("img",{src:t.track_image},null,8,At),Object(n["createElementVNode"])("div",It,[Object(n["createVNode"])(s,{to:t.album_link,class:"cb-track-name"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.track_name),1)]})),_:1},8,["to"]),Object(n["createElementVNode"])("div",Rt,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.track_artists,(function(e,a){return Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:e,class:"cb-track-artist"},[a>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Ut,", ")):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(s,{to:"/artist/"+t.spotifyUriParse(e.uri).val},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]})),_:2},1032,["to"])])})),128))])])])}a("ac1f"),a("1276");var qt=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);qt=Object(p["a"])([Object(d["a"])({props:{player:Object,playback_state:Object},data:function(){return{album_id:"",album_link:"",track_name:"",track_artists:[],track_image:""}},computed:{context:function(){return this.playback_state.context}},methods:{spotifyUriParse:function(t){var e=t.split(":");return{type:e[1],val:e[2]}},getTrackAlbumId:function(t){var e=t.album.uri,a=this.spotifyUriParse(e);return a.val},getTrackMinImageUrl:function(t){var e=t.album.images;return Y(e,!1)},updateContext:function(){var t=this.playback_state.track_window.current_track;this.album_id=this.getTrackAlbumId(t),this.album_link="/album/"+this.album_id,this.track_name=t.name,this.track_artists=t.artists,this.track_image=this.getTrackMinImageUrl(t)}},created:function(){this.updateContext()},watch:{context:function(){this.updateContext()}}})],qt);var Lt=qt;a("3dee");const Gt=y()(Lt,[["render",Dt],["__scopeId","data-v-4433d071"]]);var Mt=Gt,Kt=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);Kt=Object(p["a"])([Object(d["a"])({components:{ControlButtons:dt,ControlPlayback:St,ControlVolume:Ct,ControlCurrentTrack:Mt},computed:Object(o["a"])({},Object(b["c"])({player:"player/getPlayer",device_id:"player/getDeviceId",playback_state:"player/getPlaybackState"}))})],Kt);var zt=Kt;a("e0b0");const Jt=y()(zt,[["render",q],["__scopeId","data-v-926d731e"]]);var Ft=Jt,$t=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);$t=Object(p["a"])([Object(d["a"])({components:{CircleLoader:P,InfoBar:A,ControlBar:Ft},computed:Object(o["a"])({},Object(b["c"])({status:"app/getStatus"})),methods:Object(o["a"])({},Object(b["b"])({playerInit:"player/init",userInit:"user/init"})),created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("[debug] AppLayout (created)"),"not-logged"!==t.status){e.next=4;break}return t.$router.push({name:"Login"}),e.abrupt("return");case 4:if("loaded"===t.status){e.next=9;break}return e.next=7,t.playerInit();case 7:return e.next=9,t.userInit();case 9:case"end":return e.stop()}}),e)})))()}})],$t);var Ht=$t;a("aa9f");const Wt=y()(Ht,[["render",T],["__scopeId","data-v-33dfd0fe"]]);var Yt=Wt,Xt={class:"home"};function Qt(t,e,a,r,c,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Xt)}var Zt=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);Zt=Object(p["a"])([Object(d["a"])({created:function(){console.log("[debug] Home (created)")}})],Zt);var te=Zt;a("9017");const ee=y()(te,[["render",Qt],["__scopeId","data-v-64f7f41c"]]);var ae=ee,ne=function(t){return Object(n["pushScopeId"])("data-v-7610a826"),t=t(),Object(n["popScopeId"])(),t},re={class:"login",ref:"login"},ce=ne((function(){return Object(n["createElementVNode"])("h1",null,"Пожалуйста, авторизуйтесь через Spotify.",-1)}));function oe(t,e,a,r,c,o){var s=Object(n["resolveComponent"])("CircleLoader");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[this.process?(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:0})):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",re,[ce,Object(n["createElementVNode"])("button",{onClick:e[0]||(e[0]=function(){return t.login&&t.login.apply(t,arguments)}),class:"btn"},"Войти")],512)],64)}a("9911");var se=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);se=Object(p["a"])([Object(d["a"])({data:function(){return{process:!1}},components:{CircleLoader:P},computed:Object(o["a"])({},Object(b["c"])({status:"app/getStatus"})),methods:Object(o["a"])(Object(o["a"])({},Object(b["b"])({setStatus:"app/setStatus",setAccessToken:"auth/setAccessToken",setRefreshToken:"auth/setRefreshToken"})),{},{popupEvent:function(t){var e=t.data;switch(e.status){case"ok":console.log("[debug] Login (all ok)"),window.removeEventListener("message",this.popupEvent),this.setAccessToken(localStorage.getItem("access_token")),this.setRefreshToken(localStorage.getItem("refresh_token")),this.setStatus("logged"),this.$router.push({name:"Home"});break;default:console.log("switch (data.status): default")}},login:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,n,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$refs.login.querySelector(".login h1"),n=t.$refs.login.querySelector(".login button"),a.style.transform="translateX(-100vw)",n.style.transform="translateX(100vw)",t.process=!0,e.next=7,it.backend.auth.getUserAuthURL();case 7:r=e.sent,r.state&&(localStorage.setItem(r.state_key,r.state),c=window.open(r.link,"Login with Spotify","width=800,height=600"),c&&window.addEventListener("message",t.popupEvent,!1));case 9:case"end":return e.stop()}}),e)})))()}}),created:function(){console.log("[debug] Login (created)"),"logged"!==this.status&&"loaded"!==this.status||this.$router.push({name:"Home"})}})],se);var ie=se;a("cfe4");const le=y()(ie,[["render",oe],["__scopeId","data-v-7610a826"]]);var ue=le,pe={class:"callback"};function de(t,e,a,r,c,o){var s=Object(n["resolveComponent"])("CircleLoader");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",pe,[Object(n["createVNode"])(s)])}var be=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);be=Object(p["a"])([Object(d["a"])({components:{CircleLoader:P},created:function(){console.log("[debug] Callback (start)");var t=this.$route.query;console.log("[debug] Callback query: ",t),window.opener&&(console.log("[debug] Callback (1 if)"),t&&t.access_token?(console.log("[debug] Callback (2 if)"),localStorage.setItem("access_token",t.access_token),localStorage.setItem("refresh_token",t.refresh_token),window.opener.postMessage({status:"ok"})):t.error?window.opener.postMessage({status:t.error}):window.opener.postMessage({status:"invalid query"}),localStorage.removeItem("spotify_auth_state"),window.close()),console.log("[debug] Callback (end)")}})],be);var me=be;a("e74c");const fe=y()(me,[["render",de],["__scopeId","data-v-29c03a3e"]]);var he=fe,ye=function(t){return Object(n["pushScopeId"])("data-v-54c14b51"),t=t(),Object(n["popScopeId"])(),t},ve={class:"not-found"},ge=ye((function(){return Object(n["createElementVNode"])("h1",null,"404",-1)})),Oe=ye((function(){return Object(n["createElementVNode"])("h2",null,"Страница не найдена",-1)}));function ke(t,e,a,r,c,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ve,[ge,Oe,Object(n["createElementVNode"])("button",{onClick:e[0]||(e[0]=function(){return t.goHome&&t.goHome.apply(t,arguments)}),class:"btn"},"На главную")])}var je=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);je=Object(p["a"])([Object(d["a"])({methods:{goHome:function(){this.$router.push({name:"Home"})}}})],je);var _e=je;a("44e8");const Te=y()(_e,[["render",ke],["__scopeId","data-v-54c14b51"]]);var Ee=Te,Se={key:0,class:"album"},we={class:"album-info"},Pe=["src"],xe={class:"album-playlist"},Ne={class:"album-title"},Ve={class:"album-artists"},Ce={key:0};function Be(t,e,a,r,c,o){var s=Object(n["resolveComponent"])("router-link"),i=Object(n["resolveComponent"])("TrackList");return t.loaded?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Se,[Object(n["createElementVNode"])("div",we,[Object(n["createElementVNode"])("img",{src:t.album_image},null,8,Pe),Object(n["createElementVNode"])("span",null,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(t.album.total_tracks)+" songs, ",1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(t.msToTime(t.album_duration,!0)),1)])]),Object(n["createElementVNode"])("div",xe,[Object(n["createElementVNode"])("h2",Ne,Object(n["toDisplayString"])(t.album.name),1),Object(n["createElementVNode"])("div",Ve,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.album.artists,(function(e,a){return Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:e,class:"album-artist"},[a>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Ce,", ")):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(s,{to:"/artist/"+t.spotifyUriParse(e.uri).val},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]})),_:2},1032,["to"])])})),128))]),Object(n["createVNode"])(i,{tracks:t.tracks,context_uri:t.context_uri},null,8,["tracks","context_uri"])])])):Object(n["createCommentVNode"])("",!0)}var Ae={class:"track-list"},Ie=["onClick"],Re={key:0},Ue={key:1},De={class:"track-list-num"},qe={class:"track-list-general"},Le=["src"],Ge={class:"track-list-info"},Me={class:"track-list-artists"},Ke={key:0},ze={class:"track-list-duration"};function Je(t,e,r,c,o,s){var i=Object(n["resolveComponent"])("inline-svg"),l=Object(n["resolveComponent"])("router-link");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ae,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.tracks,(function(e,r){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:r,class:"track-list-row"},[Object(n["createElementVNode"])("span",{onClick:function(e){return t.startPauseTrack(r)},class:"track-list-index"},[t.isCurrentTrack(r)&&!t.playback_state.paused?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Re,[Object(n["createVNode"])(i,{class:"track-list-current",src:a("9a9c")},null,8,["src"]),Object(n["createVNode"])(i,{class:"track-list-control",src:a("27c6")},null,8,["src"])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Ue,[Object(n["createElementVNode"])("span",De,Object(n["toDisplayString"])(r+1),1),Object(n["createVNode"])(i,{class:"track-list-control",src:a("ac3a")},null,8,["src"])]))],8,Ie),Object(n["createElementVNode"])("span",qe,[e.image?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",{key:0,src:e.image,class:"track-list-img"},null,8,Le)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",Ge,[Object(n["createElementVNode"])("span",{class:Object(n["normalizeClass"])(["track-list-name",{"track-list-active":t.isCurrentTrack(r)}])},Object(n["toDisplayString"])(e.name),3),Object(n["createElementVNode"])("span",Me,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.artists,(function(e,a){return Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:a,class:"track-list-artist"},[a>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Ke,", ")):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(l,{to:"/artist/"+t.spotifyUriParse(e.uri).val},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]})),_:2},1032,["to"])])})),128))])])]),Object(n["createElementVNode"])("span",ze,Object(n["toDisplayString"])(e.duration),1)])})),128))])}var Fe=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);Fe=Object(p["a"])([Object(d["a"])({props:{tracks:{type:Array,required:!0},context_uri:String},computed:Object(o["a"])({},Object(b["c"])({playback_state:"player/getPlaybackState",player:"player/getPlayer"})),methods:{spotifyUriParse:function(t){var e=t.split(":");return{type:e[1],val:e[2]}},isCurrentTrack:function(t){return this.tracks[t].uri===this.playback_state.track_window.current_track.uri},startPauseTrack:function(t){if(this.tracks[t].uri!==this.playback_state.track_window.current_track.uri){var e={body:{context_uri:this.context_uri,offset:{position:t}}};it.spotify.player.startPlayback(e)}else it.spotify.SDK.togglePlay(this.player)}},created:function(){console.log("[debug] TrackList (created) tracks:",this.tracks)}})],Fe);var $e=Fe;a("8803");const He=y()($e,[["render",Je],["__scopeId","data-v-1aa7d53c"]]);var We=He,Ye=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);Ye=Object(p["a"])([Object(d["a"])({data:function(){return{loaded:!1,album:null,album_image:"",album_duration:0,tracks:[],context_uri:""}},components:{TrackList:We},computed:{album_id:function(){return this.$route.params.id}},methods:{spotifyUriParse:function(t){var e=t.split(":");return{type:e[1],val:e[2]}},getAlbumMaxImageUrl:function(t){var e=t.images;return Y(e,!0)},getAlbumDuration:function(t){var e=t.tracks.items,a=0;return e.forEach((function(t){a+=t.duration_ms})),a},msToTime:function(t,e){return W(t,e)},getTracks:function(){var t=this.album.tracks.items,e=[];return t.forEach((function(t){var a={name:t.name,duration:W(t.duration_ms,!1),artists:t.artists,image:"",uri:t.uri};e.push(a)})),e},setAlbumParams:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loaded=!1,e.next=3,it.spotify.albums.getAlbum({params:{id:t.album_id}});case 3:t.album=e.sent,t.album_image=t.getAlbumMaxImageUrl(t.album),t.album_duration=t.getAlbumDuration(t.album),t.context_uri=t.album.uri,t.tracks=t.getTracks(),t.loaded=!0;case 9:case"end":return e.stop()}}),e)})))()}},created:function(){this.setAlbumParams()},watch:{album_id:function(){this.setAlbumParams()}}})],Ye);var Xe=Ye;a("dca4");const Qe=y()(Xe,[["render",Be],["__scopeId","data-v-b27f31ca"]]);var Ze=Qe,ta={class:"artist"};function ea(t,e,a,r,c,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ta,Object(n["toDisplayString"])(t.$route.params.id),1)}var aa=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);aa=Object(p["a"])([Object(d["a"])({})],aa);var na=aa;a("610f");const ra=y()(na,[["render",ea],["__scopeId","data-v-5f5f9a6f"]]);var ca=ra,oa={key:0,class:"playlist"},sa={class:"playlist-info"},ia=["src"],la={class:"playlist-playlist"},ua={class:"playlist-title"},pa={class:"playlist-artists"},da={key:0};function ba(t,e,a,r,c,o){var s=Object(n["resolveComponent"])("router-link"),i=Object(n["resolveComponent"])("TrackList");return t.loaded?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",oa,[Object(n["createElementVNode"])("div",sa,[Object(n["createElementVNode"])("img",{src:t.playlist_image},null,8,ia),Object(n["createElementVNode"])("span",null,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(t.playlist.total_tracks)+" songs, ",1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(t.msToTime(t.playlist_duration,!0)),1)])]),Object(n["createElementVNode"])("div",la,[Object(n["createElementVNode"])("h2",ua,Object(n["toDisplayString"])(t.playlist.name),1),Object(n["createElementVNode"])("div",pa,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.playlist.artists,(function(e,a){return Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:e,class:"playlist-artist"},[a>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",da,", ")):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(s,{to:"/artist/"+t.spotifyUriParse(e.uri).val},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]})),_:2},1032,["to"])])})),128))]),Object(n["createVNode"])(i,{tracks:t.tracks,context_uri:t.context_uri},null,8,["tracks","context_uri"])])])):Object(n["createCommentVNode"])("",!0)}var ma=function(t){Object(l["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["b"]);ma=Object(p["a"])([Object(d["a"])({data:function(){return{loaded:!1,playlist:null,playlist_image:"",playlist_duration:0,tracks:[],context_uri:""}},components:{TrackList:We},computed:{playlist_id:function(){return this.$route.params.id}},methods:{spotifyUriParse:function(t){var e=t.split(":");return{type:e[1],val:e[2]}},getPlaylistMaxImageUrl:function(t){var e=t.images;return Y(e,!0)},getPlaylistDuration:function(t){var e=t.tracks.items,a=0;return e.forEach((function(t){a+=t.track.duration_ms})),a},msToTime:function(t,e){return W(t,e)},getTracks:function(){var t=this,e=this.playlist.tracks.items;e.forEach((function(e){var a={name:e.track.name,duration:W(e.track.duration_ms,!1),image:Y(e.track.album.images,!1),uri:e.track.uri};t.tracks.push(a)}))},setPlaylistParams:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,it.spotify.playlists.getPlaylist({params:{playlist_id:t.playlist_id}});case 2:t.playlist=e.sent,t.playlist_image=t.getPlaylistMaxImageUrl(t.playlist),t.playlist_duration=t.getPlaylistDuration(t.playlist),t.context_uri=t.playlist.uri,t.getTracks(),t.loaded=!0;case 8:case"end":return e.stop()}}),e)})))()}},created:function(){this.setPlaylistParams()},watch:{playlist_id:function(){this.setPlaylistParams()}}})],ma);var fa=ma;a("949c");const ha=y()(fa,[["render",ba],["__scopeId","data-v-3c56879d"]]);var ya=ha,va=[{path:"/",name:"Home",component:Yt,children:[{path:"",component:ae},{path:"album/:id",component:Ze},{path:"artist/:id",component:ca},{path:"playlist/:id",component:ya}]},{path:"/login",name:"Login",component:ue},{path:"/callback",name:"Callback",component:he},{path:"/:catchAll(.*)",name:"NotFound",component:Ee}],ga=Object(O["a"])({history:Object(O["b"])(),routes:va}),Oa=ga,ka=a("6d5e"),ja=a.n(ka),_a={inited:!1,status:null};function Ta(t){return t.inited}function Ea(t){return t.status}var Sa={getInitState:Ta,getStatus:Ea};function wa(t,e){t.inited=e}function Pa(t,e){t.status=e}var xa={SET_INIT_STATE:wa,SET_STATUS:Pa};function Na(t){return Va.apply(this,arguments)}function Va(){return Va=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.dispatch,console.log("[debug] app/init (start)"),t.next=4,a("auth/init",null,{root:!0});case 4:a("setInitState",!0),console.log("[debug] app/init (end)");case 6:case"end":return t.stop()}}),t)}))),Va.apply(this,arguments)}function Ca(t,e){var a=t.commit;console.log("[debug] app/setInitState: ",e),a("SET_INIT_STATE",e)}function Ba(t,e){var a=t.commit;console.log("[debug] app/setStatus: ",e),a("SET_STATUS",e)}var Aa={init:Na,setInitState:Ca,setStatus:Ba},Ia={namespaced:!0,state:_a,getters:Sa,mutations:xa,actions:Aa},Ra={access_token:null,refresh_token:null};function Ua(t){return t.access_token}function Da(t){return t.refresh_token}var qa={getAccessToken:Ua,getRefreshToken:Da};function La(t,e){t.access_token=e}function Ga(t,e){t.refresh_token=e}var Ma={SET_ACCESS_TOKEN:La,SET_REFRESH_TOKEN:Ga};function Ka(t){return za.apply(this,arguments)}function za(){return za=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.dispatch,console.log("[debug] auth/init (start)"),a("app/setStatus","not-logged",{root:!0}),n=localStorage.getItem("access_token"),!n){t.next=11;break}return console.log("[debug] auth/init (check start)"),t.next=8,it.backend.auth.checkToken(n);case 8:r=t.sent,console.log("[debug] auth/init (check end)"),"ok"===r.status&&(a("setAccessToken",n),a("app/setStatus","logged",{root:!0}));case 11:console.log("[debug] auth/init (end)");case 12:case"end":return t.stop()}}),t)}))),za.apply(this,arguments)}function Ja(t,e){var a=t.commit;console.log("[debug] auth/setAccessToken: ",e),a("SET_ACCESS_TOKEN",e)}function Fa(t,e){var a=t.commit;a("SET_REFRESH_TOKEN",e)}var $a={init:Ka,setAccessToken:Ja,setRefreshToken:Fa},Ha={namespaced:!0,state:Ra,getters:qa,mutations:Ma,actions:$a},Wa={player:null,device_id:null,playback:null,playback_state:null};function Ya(t){return t.player}function Xa(t){return t.device_id}function Qa(t){return t.playback}function Za(t){return t.playback_state}var tn={getPlayer:Ya,getDeviceId:Xa,getPlayback:Qa,getPlaybackState:Za};function en(t,e){t.player=e}function an(t,e){t.device_id=e}function nn(t,e){t.playback=e}function rn(t,e){t.playback_state=e}var cn={SET_PLAYER:en,SET_DEVICE_ID:an,SET_PLAYBACK:nn,SET_PLAYBACK_STATE:rn};function on(t){return sn.apply(this,arguments)}function sn(){return sn=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a,n,r,o,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.dispatch,n=e.rootGetters,console.log("[debug] player/init (start)"),r=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("[debug] player/waitTransferComplete"),t.abrupt("return",new Promise((function(t){var e=setInterval(Object(c["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=Wa.playback_state,null!==n&&(clearInterval(e),t(n));case 2:case"end":return a.stop()}}),a)}))))})));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o=document.createElement("script"),o.src="https://sdk.scdn.co/spotify-player.js",o.async=!0,document.body.appendChild(o),s=n["auth/getAccessToken"],t.next=10,it.spotify.SDK.init(s);case 10:return i=t.sent,i.addListener("initialization_error",(function(t){var e=t.message;console.error("[Spotify WPS] ",e)})),i.addListener("authentication_error",(function(t){var e=t.message;console.error("[Spotify WPS] ",e)})),i.addListener("account_error",(function(t){var e=t.message;console.error("[Spotify WPS] ",e)})),i.addListener("playback_error",(function(t){var e=t.message;console.error("[Spotify WPS] ",e)})),i.addListener("ready",(function(t){var e=t.device_id;console.log("[Spotify WPS] Ready with Device ID",e),a("setPlayer",i),a("setDeviceId",e),it.spotify.player.transferPlayback({body:{device_ids:[e]}})})),i.addListener("not_ready",(function(t){var e=t.device_id;console.log("[Spotify WPS] Device ID has gone offline",e)})),i.addListener("player_state_changed",(function(t){a("setPlaybackState",t)})),i.addListener("autoplay_failed",(function(){console.log("[Spotify WPS] Autoplay is not allowed by the browser autoplay rules")})),t.next=21,it.spotify.SDK.connect(i);case 21:return t.next=23,r();case 23:a("app/setStatus","loaded",{root:!0}),console.log("[debug] player/init (end)");case 25:case"end":return t.stop()}}),t)}))),sn.apply(this,arguments)}function ln(t,e){var a=t.commit;console.log("[debug] player/setPlayer: ",e),a("SET_PLAYER",e)}function un(t,e){var a=t.commit;console.log("[debug] player/setDeviceId: ",e),a("SET_DEVICE_ID",e)}function pn(t,e){var a=t.commit;console.log("[debug] player/setPlayback: ",e),a("SET_PLAYBACK",e)}function dn(t,e){var a=t.commit;console.log("[debug] player/setPlaybackState: ",e),a("SET_PLAYBACK_STATE",e)}var bn={init:on,setPlayer:ln,setDeviceId:un,setPlayback:pn,setPlaybackState:dn},mn={namespaced:!0,state:Wa,getters:tn,mutations:cn,actions:bn},fn={user:null};function hn(t){return t.user}var yn={getUser:hn};function vn(t,e){t.user=e}var gn={SET_USER:vn};function On(t){return kn.apply(this,arguments)}function kn(){return kn=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.dispatch,e.rootGetters,console.log("[debug] user/init (start)"),t.next=4,it.spotify.users.getCurrentUsersProfile();case 4:n=t.sent,n&&a("setUser",n),console.log("[debug] user/init user: ",fn.user),console.log("[debug] user/init (end)");case 8:case"end":return t.stop()}}),t)}))),kn.apply(this,arguments)}function jn(t,e){var a=t.commit;a("SET_USER",e)}var _n={init:On,setUser:jn},Tn={namespaced:!0,state:fn,getters:yn,mutations:gn,actions:_n},En=Object(b["a"])({state:{},mutations:{},actions:{},modules:{app:Ia,auth:Ha,player:mn,user:Tn}});Object(n["createApp"])(g).use(Oa).use(En).component("inline-svg",ja.a).mount("#app")},ce1e:function(t,e,a){t.exports=a.p+"img/control-forward.0892bb3f.svg"},cfe4:function(t,e,a){"use strict";a("96bc")},d08e:function(t,e,a){t.exports=a.p+"img/control-play.2f25944e.svg"},dca4:function(t,e,a){"use strict";a("8d18")},dd7f:function(t,e,a){t.exports=a.p+"img/control-pause.e75d8a30.svg"},e0b0:function(t,e,a){"use strict";a("5199")},e1a6:function(t,e,a){},e74c:function(t,e,a){"use strict";a("49d8")},e7e2:function(t,e,a){},f74b:function(t,e,a){}});
//# sourceMappingURL=app.4888f70f.js.map