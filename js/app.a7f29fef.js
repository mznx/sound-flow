(function(t){function e(e){for(var r,c,s=e[0],i=e[1],u=e[2],d=0,p=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&p.push(a[c][0]),a[c]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);l&&l(e);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var i=n[s];0!==a[i]&&(r=!1)}r&&(o.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},a={app:0},o=[];function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/sound-flow/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=i;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"25a8":function(t,e,n){"use strict";n("5a54")},"27d1":function(t,e,n){"use strict";n("2a79")},"2a79":function(t,e,n){},"366c":function(t,e,n){"use strict";n("91f4")},"395a":function(t,e,n){t.exports=n.p+"img/control-repeat.1b31dc56.svg"},"3a78":function(t,e,n){},"5a54":function(t,e,n){},"6bad":function(t,e,n){"use strict";n("ddc6")},"7cfe":function(t,e,n){"use strict";n("cbe1")},"7dfe":function(t,e,n){},"8ba3":function(t,e,n){t.exports=n.p+"img/control-back.5fcd24e1.svg"},"91f4":function(t,e,n){},"96ac":function(t,e,n){"use strict";n("7dfe")},b4e8:function(t,e,n){"use strict";n("3a78")},c11c:function(t,e,n){},cab9:function(t,e,n){t.exports=n.p+"img/control-shuffle.aa0319cb.svg"},cbe1:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function a(t,e,n,a,o,c){var s=Object(r["resolveComponent"])("AppLayout");return Object(r["openBlock"])(),Object(r["createBlock"])(s)}var o=n("bee2"),c=n("d4ec"),s=n("262e"),i=n("2caf"),u=n("9ab4"),l=n("ce1f");function d(t,e,n,a,o,c){var s=Object(r["resolveComponent"])("router-view");return Object(r["openBlock"])(),Object(r["createBlock"])(s)}var p=function(t){Object(s["a"])(n,t);var e=Object(i["a"])(n);function n(){return Object(c["a"])(this,n),e.apply(this,arguments)}return Object(o["a"])(n)}(l["b"]);p=Object(u["a"])([Object(l["a"])({})],p);var h=p,f=n("6b0d"),m=n.n(f);const b=m()(h,[["render",d]]);var v=b,y=function(t){Object(s["a"])(n,t);var e=Object(i["a"])(n);function n(){return Object(c["a"])(this,n),e.apply(this,arguments)}return Object(o["a"])(n)}(l["b"]);y=Object(u["a"])([Object(l["a"])({components:{AppLayout:v}})],y);var g=y;n("7cfe");const O=m()(g,[["render",a]]);var k=O,j=n("6c02"),_={key:1,class:"home"};function T(t,e,n,a,o,c){var s=Object(r["resolveComponent"])("CircleLoader"),i=Object(r["resolveComponent"])("ControlBar");return this.loading?(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:0})):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",_,[Object(r["createVNode"])(i)]))}var w=n("1da1");n("d3b7"),n("96cf");function S(t,e,n,a,o,c){return Object(r["openBlock"])(),Object(r["createElementBlock"])("span")}var E=function(t){Object(s["a"])(n,t);var e=Object(i["a"])(n);function n(){return Object(c["a"])(this,n),e.apply(this,arguments)}return Object(o["a"])(n)}(l["b"]);n("25a8");const P=m()(E,[["render",S],["__scopeId","data-v-dcff6744"]]);var x=P,N=function(t){return Object(r["pushScopeId"])("data-v-206fd301"),t=t(),Object(r["popScopeId"])(),t},C={class:"control-bar"},G=N((function(){return Object(r["createElementVNode"])("div",{class:"cb-left"},null,-1)})),V={class:"cb-center"},U=N((function(){return Object(r["createElementVNode"])("div",{class:"cb-right"},null,-1)}));function B(t,e,n,a,o,c){var s=Object(r["resolveComponent"])("ControlButtons"),i=Object(r["resolveComponent"])("ControlPlayback");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",C,[G,Object(r["createElementVNode"])("div",V,[Object(r["createVNode"])(s),Object(r["createVNode"])(i)]),U])}var $={class:"cb-buttons"};function A(t,e,a,o,c,s){var i=Object(r["resolveComponent"])("inline-svg");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",$,[Object(r["createElementVNode"])("button",{class:Object(r["normalizeClass"])(["cb-shuffle",{active:this.$store.state.player.playback_state.shuffle}]),onClick:e[0]||(e[0]=function(){return t.toggleShuffle&&t.toggleShuffle.apply(t,arguments)})},[Object(r["createVNode"])(i,{src:n("cab9"),width:"30",height:"30"},null,8,["src"])],2),Object(r["createElementVNode"])("button",{class:"cb-back",onClick:e[1]||(e[1]=function(){return t.previousTrack&&t.previousTrack.apply(t,arguments)})},[Object(r["createVNode"])(i,{src:n("8ba3"),width:"20",height:"20"},null,8,["src"])]),Object(r["createElementVNode"])("button",{class:"cb-playpause",onClick:e[2]||(e[2]=function(){return t.playPause&&t.playPause.apply(t,arguments)})},[this.$store.state.player.playback_state.paused?(Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:0,src:n("d08e"),width:"35",height:"35"},null,8,["src"])):(Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:1,src:n("dd7f"),width:"35",height:"35"},null,8,["src"]))]),Object(r["createElementVNode"])("button",{class:"cb-forward",onClick:e[3]||(e[3]=function(){return t.nextTrack&&t.nextTrack.apply(t,arguments)})},[Object(r["createVNode"])(i,{src:n("ce1e"),width:"20",height:"20"},null,8,["src"])]),Object(r["createElementVNode"])("button",{class:Object(r["normalizeClass"])(["cb-repeat",[{active:0!==this.$store.state.player.playback_state.repeat_mode},{track:2===this.$store.state.player.playback_state.repeat_mode}]]),onClick:e[4]||(e[4]=function(){return t.toggleRepeatMode&&t.toggleRepeatMode.apply(t,arguments)})},[Object(r["createVNode"])(i,{src:n("395a"),width:"20",height:"20"},null,8,["src"])],2)])}var R="https://api-sf.mznx.xyz",D=function(t){var e=t.method,n=R+t.path;return fetch(n,{method:e}).then((function(t){return t.json()}))},I=D,L={getUserAuthURL:function(){var t={method:"GET",path:"/auth/login"};return I(t)},checkToken:function(t){var e={method:"GET",path:"/auth/check_token?access_token=".concat(t)};return I(e)}},M={auth:L},z={init:function(t){return new Promise((function(e){window.onSpotifyWebPlaybackSDKReady=function(){var n=new window.Spotify.Player({name:"Sound Flow (Web Playback SDK)",getOAuthToken:function(e){e(t)},volume:.5});e(n)}}))},connect:function(t){return new Promise((function(e){t.addListener("ready",(function(t){e(t)})),t.connect().then((function(t){}))}))},disconnect:function(t){t.disconnect()},togglePlay:function(t){t.togglePlay()},previousTrack:function(t){t.previousTrack()},nextTrack:function(t){t.nextTrack()}};n("99af"),n("e9c4"),n("b65f");function J(t){var e="";return JSON.parse(JSON.stringify(t),(function(t,n){e+="".concat(t,"=").concat(n,"&")})),e}function K(t){var e=Math.trunc(t/6e4),n=Math.trunc((t-6e4*e)/1e3),r=String(n);return n<10&&(r="0"+r),e+":"+r}var F="https://api.spotify.com/v1",q=function(t){var e=t.method,n=F+t.path;return fetch(n,{method:e,headers:{Authorization:"Bearer "+localStorage.getItem("access_token")},body:t.body?t.body:null}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(){return null}))},X=q,H={getAlbum:function(t){var e=J(t),n={method:"GET",path:"/albums/".concat(t.id,"?").concat(e)};return X(n)},getAlbums:function(t){var e=J(t),n={method:"GET",path:"/albums?".concat(e)};return X(n)},getAlbumsTracks:function(t){var e=J(t),n={method:"GET",path:"/albums/".concat(t.id,"/tracks?").concat(e)};return X(n)},getSavedAlbums:function(t){var e=J(t),n={method:"GET",path:"/me/albums?".concat(e)};return X(n)},saveAlbums:function(t){var e={method:"PUT",path:"/me/albums",body:JSON.stringify(t)};return X(e)},removeAlbums:function(t){var e={method:"DELETE",path:"/me/albums",body:JSON.stringify(t)};return X(e)},checkSavedAlbums:function(t){var e=J(t),n={method:"GET",path:"/me/albums/contains?".concat(e)};return X(n)},getNewReleases:function(t){var e=J(t),n={method:"GET",path:"/browse/new-releases?".concat(e)};return X(n)}},W={getArtist:function(t){var e={method:"GET",path:"/artists/".concat(t.id)};return X(e)},getArtists:function(t){var e=J(t),n={method:"GET",path:"/artists?".concat(e)};return X(n)},getArtisAlbums:function(t){var e=J(t),n={method:"GET",path:"/artists/".concat(t.id,"/albums?").concat(e)};return X(n)},getArtisTopTracks:function(t){var e=J(t),n={method:"GET",path:"/artists/".concat(t.id,"/top-tracks?").concat(e)};return X(n)},getArtistRelatedArtists:function(t){var e={method:"GET",path:"/artists/".concat(t.id,"/related-artists")};return X(e)}},Q={getTrack:function(t){var e=J(t),n={method:"GET",path:"/tracks/".concat(t.id,"?").concat(e)};return X(n)},getTracks:function(t){var e=J(t),n={method:"GET",path:"/tracks?".concat(e)};return X(n)},getSavedTracks:function(t){var e=J(t),n={method:"GET",path:"/me/tracks?".concat(e)};return X(n)},saveTracks:function(t){var e={method:"PUT",path:"/me/tracks",body:JSON.stringify(t)};return X(e)},removeTracks:function(t){var e={method:"DELETE",path:"/me/tracks",body:JSON.stringify(t)};return X(e)},checkSavedTracks:function(t){var e=J(t),n={method:"GET",path:"/me/tracks/contains?".concat(e)};return X(n)},getTracksAudioFeatures:function(t){var e=J(t),n={method:"GET",path:"/audio-features?".concat(e)};return X(n)},getTrackAudioFeatures:function(t){var e={method:"GET",path:"/audio-features/".concat(t.id)};return X(e)},getTrackAudioAnalysis:function(t){var e={method:"GET",path:"/audio-analysis/".concat(t.id)};return X(e)},getRecommendations:function(t){var e=J(t),n={method:"GET",path:"/recommendations?".concat(e)};return X(n)}},Y={search:function(t){var e=J(t),n={method:"GET",path:"/search?".concat(e)};return X(n)}},Z={getCurrentUsersProfile:function(){var t={method:"GET",path:"/me"};return X(t)},getUserTopArtists:function(t){var e=J(t),n={method:"GET",path:"/me/top/artists?".concat(e)};return X(n)},getUserTopTracks:function(t){var e=J(t),n={method:"GET",path:"/me/top/tracks?".concat(e)};return X(n)},getUserProfile:function(t){var e={method:"GET",path:"/users/".concat(t.user_id)};return X(e)},followPlaylist:function(t){var e={method:"PUT",path:"/playlists/".concat(t.playlist_id,"/followers"),body:JSON.stringify(t)};return X(e)},unfollowPlaylist:function(t){var e={method:"DELETE",path:"/playlists/".concat(t.playlist_id,"/followers")};return X(e)},getFollowedArtists:function(t){var e=J(t),n={method:"GET",path:"/me/following?".concat(e)};return X(n)},followArtistsOrUsers:function(t){var e=J(t),n={method:"PUT",path:"/me/following?".concat(e)};return X(n)},unfollowArtistsOrUsers:function(t){var e=J(t),n={method:"DELETE",path:"/me/following?".concat(e)};return X(n)},checkUserFollowArtistsOrUsers:function(t){var e=J(t),n={method:"GET",path:"/me/following/contains?".concat(e)};return X(n)},checkUsersFollowPlaylist:function(t){var e=J(t),n={method:"GET",path:"/playlists/".concat(t.playlist_id,"/followers/contains?").concat(e)};return X(n)}},tt={getPlaylist:function(t){var e=J(t),n={method:"GET",path:"/playlists/".concat(t.playlist_id,"?").concat(e)};return X(n)},changePlaylistDetails:function(t){var e={method:"PUT",path:"/playlists/".concat(t.playlist_id),body:JSON.stringify(t)};return X(e)},getPlaylistTracks:function(t){var e=J(t),n={method:"GET",path:"/playlists/".concat(t.playlist_id,"/tracks?").concat(e)};return X(n)},addTracksToPlaylist:function(t){var e={method:"POST",path:"/playlists/".concat(t.playlist_id,"/tracks"),body:JSON.stringify(t)};return X(e)},reorderPlaylistTracks:function(t){var e={method:"PUT",path:"/playlists/".concat(t.playlist_id,"/tracks"),body:JSON.stringify(t)};return X(e)},replacePlaylistTracks:function(t){var e={method:"PUT",path:"/playlists/".concat(t.playlist_id,"/tracks"),body:JSON.stringify(t)};return X(e)},removePlaylistTracks:function(t){var e={method:"DELETE",path:"/playlists/".concat(t.playlist_id,"/tracks"),body:JSON.stringify(t)};return X(e)},getCurrentUserPlaylists:function(t){var e=J(t),n={method:"GET",path:"/me/playlists?".concat(e)};return X(n)},getUserPlaylists:function(t){var e=J(t),n={method:"GET",path:"/users/".concat(t.user_id,"/playlists?").concat(e)};return X(n)},createPlaylist:function(t){var e={method:"POST",path:"/users/".concat(t.user_id,"/playlists"),body:JSON.stringify(t)};return X(e)},getFeaturedPlaylists:function(t){var e=J(t),n={method:"GET",path:"/browse/featured-playlists?".concat(e)};return X(n)},getCategorysPlaylists:function(t){var e=J(t),n={method:"GET",path:"/browse/categories/".concat(t.category_id,"/playlists?").concat(e)};return X(n)},getPlaylistImage:function(t){var e={method:"GET",path:"/playlists/".concat(t.playlist_id,"/images")};return X(e)},setPlaylistImage:function(t){var e={method:"PUT",path:"/playlists/".concat(t.playlist_id,"/images")};return X(e)}},et={getPlaybackState:function(t){var e=J(t),n={method:"GET",path:"/me/player?".concat(e)};return X(n)},transferPlayback:function(t){var e={method:"PUT",path:"/me/player",body:JSON.stringify(t)};return X(e)},getAvailableDevices:function(){var t={method:"GET",path:"/me/player/devices"};return X(t)},getCurrentTrack:function(t){var e=J(t),n={method:"GET",path:"/me/player/currently-playing?".concat(e)};return X(n)},togglePlayback:function(t){var e={method:"PUT",path:"/me/player/play?device_id=".concat(t.device_id),body:JSON.stringify(t)};return X(e)},pausePlayback:function(t){var e={method:"PUT",path:"/me/player/pause?device_id=".concat(t.device_id)};return X(e)},nextTrack:function(t){var e={method:"POST",path:"/me/player/next?device_id=".concat(t.device_id)};return X(e)},prevTrack:function(t){var e={method:"POST",path:"/me/player/previous?device_id=".concat(t.device_id)};return X(e)},seek:function(t){var e=J(t),n={method:"POST",path:"/me/player/seek?".concat(e)};return X(n)},setRepeatMode:function(t){var e=J(t),n={method:"PUT",path:"/me/player/repeat?".concat(e)};return X(n)},setVolume:function(t){var e=J(t),n={method:"PUT",path:"/me/player/volume?".concat(e)};return X(n)},togglePlaybackShuffle:function(t){var e=J(t),n={method:"PUT",path:"/me/player/shuffle?".concat(e)};return X(n)},getRecentlyPlayedTracks:function(t){var e=J(t),n={method:"GET",path:"/me/player/recently-played?".concat(e)};return X(n)},addToPlaybackQueue:function(t){var e=J(t),n={method:"POST",path:"/me/player/queue?".concat(e)};return X(n)}},nt={SDK:z,albums:H,artists:W,tracks:Q,search:Y,users:Z,playlists:tt,player:et},rt={backend:M,spotify:nt},at=function(t){Object(s["a"])(n,t);var e=Object(i["a"])(n);function n(){return Object(c["a"])(this,n),e.apply(this,arguments)}return Object(o["a"])(n)}(l["b"]);at=Object(u["a"])([Object(l["a"])({data:function(){return{}},methods:{playPause:function(){rt.spotify.SDK.togglePlay(this.$store.state.player.player)},previousTrack:function(){rt.spotify.SDK.previousTrack(this.$store.state.player.player)},nextTrack:function(){rt.spotify.SDK.nextTrack(this.$store.state.player.player)},toggleShuffle:function(){rt.spotify.player.togglePlaybackShuffle({state:!this.$store.state.player.playback_state.shuffle,device_id:this.$store.state.player.device_id})},toggleRepeatMode:function(){var t="";switch(this.$store.state.player.playback_state.repeat_mode){case 0:t="context";break;case 1:t="track";break;case 2:t="off";break}rt.spotify.player.setRepeatMode({state:t,device_id:this.$store.state.player.device_id})}}})],at);var ot=at;n("27d1");const ct=m()(ot,[["render",A],["__scopeId","data-v-0fc13958"]]);var st=ct,it={class:"cb-playback"},ut={class:"cb-progress-time"},lt={class:"cb-progress-bar"},dt={class:"cb-progress-time"};function pt(t,e,n,a,o,c){var s=Object(r["resolveComponent"])("Slider");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",it,[Object(r["createElementVNode"])("div",ut,Object(r["toDisplayString"])(t.getTime(t.progress)),1),Object(r["createElementVNode"])("div",lt,[Object(r["createVNode"])(s,{modelValue:t.progress,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.progress=e}),style_bg:{backgroundColor:"var(--color-control)"},style_fg:{backgroundColor:"var(--color-accent)"},style_dot:{backgroundColor:"var(--color-control-light)"},max:t.duration,onUp:t.onProgressChange},null,8,["modelValue","style_bg","style_fg","style_dot","max","onUp"])]),Object(r["createElementVNode"])("div",dt,Object(r["toDisplayString"])(t.getTime(t.duration)),1)])}function ht(t,e,n,a,o,c){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"slider",style:Object(r["normalizeStyle"])(t.style.general),ref:"slider",onMouseover:e[0]||(e[0]=function(){return t.onSliderOver&&t.onSliderOver.apply(t,arguments)}),onMouseout:e[1]||(e[1]=function(){return t.onSliderOut&&t.onSliderOut.apply(t,arguments)}),onMousedown:e[2]||(e[2]=function(){return t.onSliderDown&&t.onSliderDown.apply(t,arguments)})},[Object(r["createElementVNode"])("div",{class:"slider-backgroound",style:Object(r["normalizeStyle"])(t.style.bg)},[Object(r["createElementVNode"])("div",{class:"slider-fill",style:Object(r["normalizeStyle"])(t.style.fg)},null,4)],4),Object(r["createElementVNode"])("div",{class:"slider-dot",style:Object(r["normalizeStyle"])(t.style.dot)},null,4)],36)}n("a9e3");var ft=function(t){Object(s["a"])(n,t);var e=Object(i["a"])(n);function n(){return Object(c["a"])(this,n),e.apply(this,arguments)}return Object(o["a"])(n)}(l["b"]);ft=Object(u["a"])([Object(l["a"])({props:{style_bg:Object,style_fg:Object,style_dot:Object,height:Number,dot_size:Number,min:Number,max:Number,modelValue:Number},emits:["update:modelValue","down","up","move"],data:function(){return{_dot_size:12,_min:0,_max:100,slider_pressed:!1,slider_over:!1,style:{}}},methods:{setValue:function(t){t<this._min?t=this._min:t>this._max&&(t=this._max),this.$emit("update:modelValue",t)},updateSlider:function(){var t=(this.modelValue-this._min)/(this._max-this._min)*100;this.style.fg.transform="translateX(calc(-100% + ".concat(t,"%))"),this.style.dot.left="".concat(t,"%"),this.slider_over?this.style.dot.display="block":this.slider_pressed||(this.style.dot.display="none")},onSliderDown:function(){this.slider_pressed=!0,window.addEventListener("mouseup",this.onSliderUp),window.addEventListener("mousemove",this.onSliderMove),this.$emit("down")},onSliderUp:function(t){this.slider_pressed=!1,window.removeEventListener("mouseup",this.onSliderUp),window.removeEventListener("mousemove",this.onSliderMove),this.onSliderMove(t),this.updateSlider(),this.$emit("up")},onSliderMove:function(t){var e=this.$refs.slider.getBoundingClientRect(),n=t.clientX-e.left;n<0&&(n=0),n>e.width&&(n=e.width);var r=n/e.width;this.setValue((this._max-this._min)*r+this._min),this.$emit("move");var a=window.getSelection();null!==a&&a.removeAllRanges()},onSliderOver:function(){this.slider_over=!0,this.updateSlider()},onSliderOut:function(){this.slider_over=!1,this.updateSlider()}},mounted:function(){this.min&&(this._min=this.min),this.max&&(this._max=this.max),this.dot_size&&(this._dot_size=this.dot_size),this.style={general:{height:"".concat(this.height+8,"px")},bg:{},fg:{},dot:{width:"".concat(this._dot_size,"px"),height:"".concat(this._dot_size,"px"),top:"calc(-50% - ".concat(this._dot_size/2,"px)"),transform:"translateX(-".concat(this._dot_size/2,"px)")}},Object.assign(this.style.bg,this.style_bg),Object.assign(this.style.fg,this.style_fg),Object.assign(this.style.dot,this.style_dot),this.updateSlider()},watch:{min:function(){this._min=this.min,this.updateSlider()},max:function(){this._max=this.max,this.updateSlider()},modelValue:function(){this.updateSlider()}}})],ft);var mt=ft;n("366c");const bt=m()(mt,[["render",ht],["__scopeId","data-v-3ff17a22"]]);var vt=bt,yt=function(t){Object(s["a"])(n,t);var e=Object(i["a"])(n);function n(){return Object(c["a"])(this,n),e.apply(this,arguments)}return Object(o["a"])(n)}(l["b"]);yt=Object(u["a"])([Object(l["a"])({data:function(){return{progress:0,duration:0,inverval:null}},components:{Slider:vt},computed:{is_playing:function(){return this.$store.state.player.playback_state.paused},context:function(){return this.$store.state.player.playback_state.context}},methods:{updateProgress:function(){var t=this;clearInterval(this.inverval),this.progress=this.$store.state.player.playback_state.position,this.$store.state.player.playback_state.paused||(this.inverval=setInterval((function(){t.progress+1e3<=t.duration&&(t.progress+=1e3)}),1e3))},onProgressChange:function(){this.$store.state.player.player.seek(this.progress)},getTime:function(t){return K(t)}},watch:{context:function(){this.duration=this.$store.state.player.playback_state.duration,this.progress=this.$store.state.player.playback_state.position},is_playing:function(){this.updateProgress()}},mounted:function(){this.duration=this.$store.state.player.playback_state.duration,this.updateProgress()}})],yt);var gt=yt;n("96ac");const Ot=m()(gt,[["render",pt],["__scopeId","data-v-68d9e795"]]);var kt=Ot,jt=function(t){Object(s["a"])(n,t);var e=Object(i["a"])(n);function n(){return Object(c["a"])(this,n),e.apply(this,arguments)}return Object(o["a"])(n)}(l["b"]);jt=Object(u["a"])([Object(l["a"])({components:{ControlButtons:st,ControlPlayback:kt}})],jt);var _t=jt;n("b4e8");const Tt=m()(_t,[["render",B],["__scopeId","data-v-206fd301"]]);var wt=Tt,St=function(t){Object(s["a"])(n,t);var e=Object(i["a"])(n);function n(){return Object(c["a"])(this,n),e.apply(this,arguments)}return Object(o["a"])(n)}(l["b"]);St=Object(u["a"])([Object(l["a"])({data:function(){return{loading:!0,token:null}},components:{CircleLoader:x,ControlBar:wt},methods:{run:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.connectToSpotifySDK();case 2:t.loading=!1;case 3:case"end":return e.stop()}}),e)})))()},connectToSpotifySDK:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=setInterval(Object(w["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=t.$store.state.player.playback_state,null!==a&&(clearInterval(n),e(a));case 2:case"end":return r.stop()}}),r)}))))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=document.createElement("script"),r.src="https://sdk.scdn.co/spotify-player.js",r.async=!0,document.body.appendChild(r),e.next=7,rt.spotify.SDK.init(t.token);case 7:return a=e.sent,a.addListener("player_state_changed",(function(e){t.$store.commit("setPlaybackState",e)})),e.next=11,rt.spotify.SDK.connect(a);case 11:return o=e.sent,t.$store.commit("setPlayer",a),t.$store.commit("setDeviceID",o.device_id),e.next=16,rt.spotify.player.transferPlayback({device_ids:[t.$store.state.player.device_id]});case 16:return e.next=18,n();case 18:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.token=localStorage.getItem("access_token"),e.next=3,rt.backend.auth.checkToken(t.token);case 3:n=e.sent,n&&"ok"===n.status?t.run():t.$router.push({name:"Login"});case 5:case"end":return e.stop()}}),e)})))()}})],St);var Et=St;n("f86a");const Pt=m()(Et,[["render",T],["__scopeId","data-v-d3e7e412"]]);var xt=Pt,Nt=function(t){return Object(r["pushScopeId"])("data-v-3f2d06c7"),t=t(),Object(r["popScopeId"])(),t},Ct={class:"login"},Gt=Nt((function(){return Object(r["createElementVNode"])("h1",null,"Пожалуйста, авторизуйтесь через Spotify.",-1)}));function Vt(t,e,n,a,o,c){var s=Object(r["resolveComponent"])("CircleLoader");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[this.process?(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:0})):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",Ct,[Gt,Object(r["createElementVNode"])("button",{onClick:e[0]||(e[0]=function(){return t.login&&t.login.apply(t,arguments)}),class:"btn"},"Войти")])],64)}n("9911");var Ut=function(t){Object(s["a"])(n,t);var e=Object(i["a"])(n);function n(){return Object(c["a"])(this,n),e.apply(this,arguments)}return Object(o["a"])(n)}(l["b"]);Ut=Object(u["a"])([Object(l["a"])({data:function(){return{process:!1}},components:{CircleLoader:x},methods:{popupEvent:function(t){var e=t.data;switch(e.status){case"ok":window.removeEventListener("message",this.popupEvent),this.$router.push({name:"Home"});break;default:console.log("switch (data.status): default")}},login:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=document.querySelector(".login h1"),r=document.querySelector(".login button"),n&&r&&(n.style.transform="translateX(-100vw)",r.style.transform="translateX(100vw)"),t.process=!0,e.next=6,rt.backend.auth.getUserAuthURL();case 6:a=e.sent,a.state&&(localStorage.setItem(a.state_key,a.state),o=window.open(a.link,"Login with Spotify","width=800,height=600"),o&&window.addEventListener("message",t.popupEvent,!1));case 8:case"end":return e.stop()}}),e)})))()},checkToken:function(){return Object(w["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=localStorage.getItem("access_token"),!e){t.next=7;break}return t.next=4,rt.backend.auth.checkToken(e);case 4:if(n=t.sent,!n||"ok"!==n.status){t.next=7;break}return t.abrupt("return",!0);case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})))()}},mounted:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.checkToken();case 2:n=e.sent,n&&t.$router.push({name:"Home"});case 4:case"end":return e.stop()}}),e)})))()}})],Ut);var Bt=Ut;n("ecde");const $t=m()(Bt,[["render",Vt],["__scopeId","data-v-3f2d06c7"]]);var At=$t,Rt={class:"callback"};function Dt(t,e,n,a,o,c){var s=Object(r["resolveComponent"])("CircleLoader");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Rt,[Object(r["createVNode"])(s)])}var It=function(t){Object(s["a"])(n,t);var e=Object(i["a"])(n);function n(){return Object(c["a"])(this,n),e.apply(this,arguments)}return Object(o["a"])(n)}(l["b"]);It=Object(u["a"])([Object(l["a"])({components:{CircleLoader:x},mounted:function(){var t=this.$route.query;t&&t.access_token?(localStorage.setItem("access_token",t.access_token),localStorage.setItem("refresh_token",t.refresh_token),window.opener.postMessage({status:"ok"})):t.error?window.opener.postMessage({status:t.error}):window.opener.postMessage({status:"invalid query"}),localStorage.removeItem("spotify_auth_state"),window.close()}})],It);var Lt=It;n("6bad");const Mt=m()(Lt,[["render",Dt],["__scopeId","data-v-33337956"]]);var zt=Mt,Jt=[{path:"/",name:"Home",component:xt},{path:"/login",name:"Login",component:At},{path:"/callback",name:"Callback",component:zt}],Kt=Object(j["a"])({history:Object(j["b"])(),routes:Jt}),Ft=Kt,qt=n("6d5e"),Xt=n.n(qt),Ht=n("5502"),Wt={player:null,device_id:null,playback_state:null};function Qt(t){return t.player}function Yt(t){return t.device_id}function Zt(t){return t.playback_state}var te={getPlayer:Qt,getDeviceID:Yt,getPlaybackState:Zt};function ee(t,e){t.player=e}function ne(t,e){t.device_id=e}function re(t,e){t.playback_state=e}var ae={setPlayer:ee,setDeviceID:ne,setPlaybackState:re},oe={},ce={state:Wt,getters:te,mutations:ae,actions:oe},se=Object(Ht["a"])({state:{},mutations:{},actions:{},modules:{player:ce}});Object(r["createApp"])(k).use(Ft).use(se).component("inline-svg",Xt.a).mount("#app")},ce1e:function(t,e,n){t.exports=n.p+"img/control-forward.0892bb3f.svg"},d08e:function(t,e,n){t.exports=n.p+"img/control-play.2f25944e.svg"},dd7f:function(t,e,n){t.exports=n.p+"img/control-pause.e75d8a30.svg"},ddc6:function(t,e,n){},eb94:function(t,e,n){},ecde:function(t,e,n){"use strict";n("c11c")},f86a:function(t,e,n){"use strict";n("eb94")}});
//# sourceMappingURL=app.a7f29fef.js.map