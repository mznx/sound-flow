(function(e){function t(t){for(var a,c,s=t[0],i=t[1],l=t[2],d=0,p=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&p.push(r[c][0]),r[c]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var i=n[s];0!==r[i]&&(a=!1)}a&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={app:0},o=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/sound-flow/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=i;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"15ff":function(e,t,n){},1743:function(e,t,n){"use strict";n("e1a6")},"25a8":function(e,t,n){"use strict";n("5a54")},"2dc8":function(e,t,n){},"366c":function(e,t,n){"use strict";n("91f4")},"36ff":function(e,t,n){"use strict";n("2dc8")},"395a":function(e,t,n){e.exports=n.p+"img/control-repeat.1b31dc56.svg"},"427b":function(e,t,n){},"44e8":function(e,t,n){"use strict";n("6b3e")},"49d8":function(e,t,n){},"5a54":function(e,t,n){},"5dc4":function(e,t,n){"use strict";n("a385")},"68b9":function(e,t,n){},"6b3e":function(e,t,n){},"6e62":function(e,t,n){"use strict";n("427b")},"7bf1":function(e,t,n){"use strict";n("15ff")},"7c03":function(e,t,n){},"8ba3":function(e,t,n){e.exports=n.p+"img/control-back.5fcd24e1.svg"},"91f4":function(e,t,n){},"945c":function(e,t,n){"use strict";n("68b9")},"96bc":function(e,t,n){},a217:function(e,t,n){"use strict";n("7c03")},a385:function(e,t,n){},c456:function(e,t,n){"use strict";n("eda4")},cab9:function(e,t,n){e.exports=n.p+"img/control-shuffle.aa0319cb.svg"},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23");function r(e,t,n,r,o,c){var s=Object(a["resolveComponent"])("router-view");return e.inited?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:0})):Object(a["createCommentVNode"])("",!0)}var o=n("1da1"),c=n("5530"),s=n("bee2"),i=n("d4ec"),l=n("262e"),u=n("2caf"),d=(n("96cf"),n("9ab4")),p=n("ce1f"),b=n("5502"),h=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);h=Object(d["a"])([Object(p["a"])({components:{},computed:Object(c["a"])({},Object(b["c"])({inited:"app/getInitState",status:"app/getStatus"})),methods:Object(c["a"])({},Object(b["b"])({init:"app/init"})),created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.init();case 1:case"end":return t.stop()}}),t)})))()}})],h);var f=h,m=(n("6e62"),n("6b0d")),v=n.n(m);const y=v()(f,[["render",r]]);var g=y,k=n("6c02"),O={key:1,class:"home"},j={class:"home-content"};function _(e,t,n,r,o,c){var s=Object(a["resolveComponent"])("CircleLoader"),i=Object(a["resolveComponent"])("InfoBar"),l=Object(a["resolveComponent"])("router-view"),u=Object(a["resolveComponent"])("ControlBar");return"loaded"!==e.status?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:0})):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",O,[Object(a["createVNode"])(i),Object(a["createElementVNode"])("div",j,[Object(a["createVNode"])(l)]),Object(a["createVNode"])(u)]))}function T(e,t,n,r,o,c){return Object(a["openBlock"])(),Object(a["createElementBlock"])("span")}var S=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);n("25a8");const E=v()(S,[["render",T],["__scopeId","data-v-dcff6744"]]);var w=E,P={class:"info-bar"};function x(e,t,n,r,o,c){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",P)}var C=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);C=Object(d["a"])([Object(p["a"])({})],C);var N=C;n("945c");const V=v()(N,[["render",x],["__scopeId","data-v-c9343808"]]);var A=V,R={class:"control-bar"},I={class:"cb-left"},B={class:"cb-center"},U={class:"cb-right"};function G(e,t,n,r,o,c){var s=Object(a["resolveComponent"])("ControlCurrentTrack"),i=Object(a["resolveComponent"])("ControlButtons"),l=Object(a["resolveComponent"])("ControlPlayback"),u=Object(a["resolveComponent"])("ControlVolume");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",R,[Object(a["createElementVNode"])("div",I,[Object(a["createVNode"])(s,{player:e.player,playback_state:e.playback_state},null,8,["player","playback_state"])]),Object(a["createElementVNode"])("div",B,[Object(a["createVNode"])(i,{player:e.player,device_id:e.device_id,playback_state:e.playback_state},null,8,["player","device_id","playback_state"]),Object(a["createVNode"])(l,{player:e.player,playback_state:e.playback_state},null,8,["player","playback_state"])]),Object(a["createElementVNode"])("div",U,[Object(a["createVNode"])(u,{player:e.player,playback_state:e.playback_state},null,8,["player","playback_state"])])])}var D={class:"cb-buttons"};function L(e,t,r,o,c,s){var i=Object(a["resolveComponent"])("inline-svg");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",D,[Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["cb-shuffle",{active:this.playback_state.shuffle}]),onClick:t[0]||(t[0]=function(){return e.toggleShuffle&&e.toggleShuffle.apply(e,arguments)})},[Object(a["createVNode"])(i,{src:n("cab9"),width:"30",height:"30"},null,8,["src"])],2),Object(a["createElementVNode"])("button",{class:"cb-back",onClick:t[1]||(t[1]=function(){return e.previousTrack&&e.previousTrack.apply(e,arguments)})},[Object(a["createVNode"])(i,{src:n("8ba3"),width:"20",height:"20"},null,8,["src"])]),Object(a["createElementVNode"])("button",{class:"cb-playpause",onClick:t[2]||(t[2]=function(){return e.playPause&&e.playPause.apply(e,arguments)})},[this.playback_state.paused?(Object(a["openBlock"])(),Object(a["createBlock"])(i,{key:0,src:n("d08e"),width:"35",height:"35"},null,8,["src"])):(Object(a["openBlock"])(),Object(a["createBlock"])(i,{key:1,src:n("dd7f"),width:"35",height:"35"},null,8,["src"]))]),Object(a["createElementVNode"])("button",{class:"cb-forward",onClick:t[3]||(t[3]=function(){return e.nextTrack&&e.nextTrack.apply(e,arguments)})},[Object(a["createVNode"])(i,{src:n("ce1e"),width:"20",height:"20"},null,8,["src"])]),Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["cb-repeat",[{active:0!==this.playback_state.repeat_mode},{track:2===this.playback_state.repeat_mode}]]),onClick:t[4]||(t[4]=function(){return e.toggleRepeatMode&&e.toggleRepeatMode.apply(e,arguments)})},[Object(a["createVNode"])(i,{src:n("395a"),width:"20",height:"20"},null,8,["src"])],2)])}n("d3b7");var M="https://api-sf.mznx.xyz",K=function(e){var t=e.method,n=M+e.path;return fetch(n,{method:t}).then((function(e){return e.json()}))},z=K,J={getUserAuthURL:function(){var e={method:"GET",path:"/auth/login"};return z(e)},checkToken:function(e){var t={method:"GET",path:"/auth/check_token?access_token=".concat(e)};return z(t)}},F={auth:J},$={init:function(e){return new Promise((function(t){window.onSpotifyWebPlaybackSDKReady=function(){var n=new window.Spotify.Player({name:"Sound Flow (Web Playback SDK)",getOAuthToken:function(t){t(e)},volume:.5});t(n)}}))},connect:function(e){return new Promise((function(t){e.connect().then((function(e){e&&(console.log("The Web Playback SDK successfully connected to Spotify!"),t(!0))}))}))},disconnect:function(e){e.disconnect()},togglePlay:function(e){return e.togglePlay()},previousTrack:function(e){return e.previousTrack()},nextTrack:function(e){return e.nextTrack()},seek:function(e,t){return e.seek(t)},getVolume:function(e){return e.getVolume()},setVolume:function(e,t){return e.setVolume(t)}};n("99af"),n("e9c4"),n("b65f");function H(e){var t="";return JSON.parse(JSON.stringify(e),(function(e,n){t+="".concat(e,"=").concat(n,"&")})),t}function q(e){var t=Math.trunc(e/6e4),n=Math.trunc((e-6e4*t)/1e3),a=String(n);return n<10&&(a="0"+a),t+":"+a}var Y="https://api.spotify.com/v1",X=function(e){var t=e.method,n=Y+e.path;return fetch(n,{method:t,headers:{Authorization:"Bearer "+localStorage.getItem("access_token")},body:e.body?e.body:null}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(){return null}))},W=X,Q={getAlbum:function(e){var t=H(e),n={method:"GET",path:"/albums/".concat(e.id,"?").concat(t)};return W(n)},getAlbums:function(e){var t=H(e),n={method:"GET",path:"/albums?".concat(t)};return W(n)},getAlbumsTracks:function(e){var t=H(e),n={method:"GET",path:"/albums/".concat(e.id,"/tracks?").concat(t)};return W(n)},getSavedAlbums:function(e){var t=H(e),n={method:"GET",path:"/me/albums?".concat(t)};return W(n)},saveAlbums:function(e){var t={method:"PUT",path:"/me/albums",body:JSON.stringify(e)};return W(t)},removeAlbums:function(e){var t={method:"DELETE",path:"/me/albums",body:JSON.stringify(e)};return W(t)},checkSavedAlbums:function(e){var t=H(e),n={method:"GET",path:"/me/albums/contains?".concat(t)};return W(n)},getNewReleases:function(e){var t=H(e),n={method:"GET",path:"/browse/new-releases?".concat(t)};return W(n)}},Z={getArtist:function(e){var t={method:"GET",path:"/artists/".concat(e.id)};return W(t)},getArtists:function(e){var t=H(e),n={method:"GET",path:"/artists?".concat(t)};return W(n)},getArtisAlbums:function(e){var t=H(e),n={method:"GET",path:"/artists/".concat(e.id,"/albums?").concat(t)};return W(n)},getArtisTopTracks:function(e){var t=H(e),n={method:"GET",path:"/artists/".concat(e.id,"/top-tracks?").concat(t)};return W(n)},getArtistRelatedArtists:function(e){var t={method:"GET",path:"/artists/".concat(e.id,"/related-artists")};return W(t)}},ee={getTrack:function(e){var t=H(e),n={method:"GET",path:"/tracks/".concat(e.id,"?").concat(t)};return W(n)},getTracks:function(e){var t=H(e),n={method:"GET",path:"/tracks?".concat(t)};return W(n)},getSavedTracks:function(e){var t=H(e),n={method:"GET",path:"/me/tracks?".concat(t)};return W(n)},saveTracks:function(e){var t={method:"PUT",path:"/me/tracks",body:JSON.stringify(e)};return W(t)},removeTracks:function(e){var t={method:"DELETE",path:"/me/tracks",body:JSON.stringify(e)};return W(t)},checkSavedTracks:function(e){var t=H(e),n={method:"GET",path:"/me/tracks/contains?".concat(t)};return W(n)},getTracksAudioFeatures:function(e){var t=H(e),n={method:"GET",path:"/audio-features?".concat(t)};return W(n)},getTrackAudioFeatures:function(e){var t={method:"GET",path:"/audio-features/".concat(e.id)};return W(t)},getTrackAudioAnalysis:function(e){var t={method:"GET",path:"/audio-analysis/".concat(e.id)};return W(t)},getRecommendations:function(e){var t=H(e),n={method:"GET",path:"/recommendations?".concat(t)};return W(n)}},te={search:function(e){var t=H(e),n={method:"GET",path:"/search?".concat(t)};return W(n)}},ne={getCurrentUsersProfile:function(){var e={method:"GET",path:"/me"};return W(e)},getUserTopArtists:function(e){var t=H(e),n={method:"GET",path:"/me/top/artists?".concat(t)};return W(n)},getUserTopTracks:function(e){var t=H(e),n={method:"GET",path:"/me/top/tracks?".concat(t)};return W(n)},getUserProfile:function(e){var t={method:"GET",path:"/users/".concat(e.user_id)};return W(t)},followPlaylist:function(e){var t={method:"PUT",path:"/playlists/".concat(e.playlist_id,"/followers"),body:JSON.stringify(e)};return W(t)},unfollowPlaylist:function(e){var t={method:"DELETE",path:"/playlists/".concat(e.playlist_id,"/followers")};return W(t)},getFollowedArtists:function(e){var t=H(e),n={method:"GET",path:"/me/following?".concat(t)};return W(n)},followArtistsOrUsers:function(e){var t=H(e),n={method:"PUT",path:"/me/following?".concat(t)};return W(n)},unfollowArtistsOrUsers:function(e){var t=H(e),n={method:"DELETE",path:"/me/following?".concat(t)};return W(n)},checkUserFollowArtistsOrUsers:function(e){var t=H(e),n={method:"GET",path:"/me/following/contains?".concat(t)};return W(n)},checkUsersFollowPlaylist:function(e){var t=H(e),n={method:"GET",path:"/playlists/".concat(e.playlist_id,"/followers/contains?").concat(t)};return W(n)}},ae={getPlaylist:function(e){var t=H(e),n={method:"GET",path:"/playlists/".concat(e.playlist_id,"?").concat(t)};return W(n)},changePlaylistDetails:function(e){var t={method:"PUT",path:"/playlists/".concat(e.playlist_id),body:JSON.stringify(e)};return W(t)},getPlaylistTracks:function(e){var t=H(e),n={method:"GET",path:"/playlists/".concat(e.playlist_id,"/tracks?").concat(t)};return W(n)},addTracksToPlaylist:function(e){var t={method:"POST",path:"/playlists/".concat(e.playlist_id,"/tracks"),body:JSON.stringify(e)};return W(t)},reorderPlaylistTracks:function(e){var t={method:"PUT",path:"/playlists/".concat(e.playlist_id,"/tracks"),body:JSON.stringify(e)};return W(t)},replacePlaylistTracks:function(e){var t={method:"PUT",path:"/playlists/".concat(e.playlist_id,"/tracks"),body:JSON.stringify(e)};return W(t)},removePlaylistTracks:function(e){var t={method:"DELETE",path:"/playlists/".concat(e.playlist_id,"/tracks"),body:JSON.stringify(e)};return W(t)},getCurrentUserPlaylists:function(e){var t=H(e),n={method:"GET",path:"/me/playlists?".concat(t)};return W(n)},getUserPlaylists:function(e){var t=H(e),n={method:"GET",path:"/users/".concat(e.user_id,"/playlists?").concat(t)};return W(n)},createPlaylist:function(e){var t={method:"POST",path:"/users/".concat(e.user_id,"/playlists"),body:JSON.stringify(e)};return W(t)},getFeaturedPlaylists:function(e){var t=H(e),n={method:"GET",path:"/browse/featured-playlists?".concat(t)};return W(n)},getCategorysPlaylists:function(e){var t=H(e),n={method:"GET",path:"/browse/categories/".concat(e.category_id,"/playlists?").concat(t)};return W(n)},getPlaylistImage:function(e){var t={method:"GET",path:"/playlists/".concat(e.playlist_id,"/images")};return W(t)},setPlaylistImage:function(e){var t={method:"PUT",path:"/playlists/".concat(e.playlist_id,"/images")};return W(t)}},re={getPlaybackState:function(e){var t=H(e),n={method:"GET",path:"/me/player?".concat(t)};return W(n)},transferPlayback:function(e){var t={method:"PUT",path:"/me/player",body:JSON.stringify(e)};return W(t)},getAvailableDevices:function(){var e={method:"GET",path:"/me/player/devices"};return W(e)},getCurrentTrack:function(e){var t=H(e),n={method:"GET",path:"/me/player/currently-playing?".concat(t)};return W(n)},togglePlayback:function(e){var t={method:"PUT",path:"/me/player/play?device_id=".concat(e.device_id),body:JSON.stringify(e)};return W(t)},pausePlayback:function(e){var t={method:"PUT",path:"/me/player/pause?device_id=".concat(e.device_id)};return W(t)},nextTrack:function(e){var t={method:"POST",path:"/me/player/next?device_id=".concat(e.device_id)};return W(t)},prevTrack:function(e){var t={method:"POST",path:"/me/player/previous?device_id=".concat(e.device_id)};return W(t)},seek:function(e){var t=H(e),n={method:"POST",path:"/me/player/seek?".concat(t)};return W(n)},setRepeatMode:function(e){var t=H(e),n={method:"PUT",path:"/me/player/repeat?".concat(t)};return W(n)},setVolume:function(e){var t=H(e),n={method:"PUT",path:"/me/player/volume?".concat(t)};return W(n)},togglePlaybackShuffle:function(e){var t=H(e),n={method:"PUT",path:"/me/player/shuffle?".concat(t)};return W(n)},getRecentlyPlayedTracks:function(e){var t=H(e),n={method:"GET",path:"/me/player/recently-played?".concat(t)};return W(n)},addToPlaybackQueue:function(e){var t=H(e),n={method:"POST",path:"/me/player/queue?".concat(t)};return W(n)}},oe={SDK:$,albums:Q,artists:Z,tracks:ee,search:te,users:ne,playlists:ae,player:re},ce={backend:F,spotify:oe},se=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);se=Object(d["a"])([Object(p["a"])({props:{player:Object,device_id:String,playback_state:Object},methods:{playPause:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ce.spotify.SDK.togglePlay(e.player);case 2:case"end":return t.stop()}}),t)})))()},previousTrack:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ce.spotify.SDK.previousTrack(e.player);case 2:case"end":return t.stop()}}),t)})))()},nextTrack:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ce.spotify.SDK.nextTrack(e.player);case 2:case"end":return t.stop()}}),t)})))()},toggleShuffle:function(){ce.spotify.player.togglePlaybackShuffle({state:!this.playback_state.shuffle,device_id:this.device_id})},toggleRepeatMode:function(){var e="";switch(this.playback_state.repeat_mode){case 0:e="context";break;case 1:e="track";break;case 2:e="off";break}ce.spotify.player.setRepeatMode({state:e,device_id:this.device_id})}}})],se);var ie=se;n("5dc4");const le=v()(ie,[["render",L],["__scopeId","data-v-22b05268"]]);var ue=le,de={class:"cb-playback"},pe={class:"cb-progress-time"},be={class:"cb-progress-bar"},he={class:"cb-progress-time"};function fe(e,t,n,r,o,c){var s=Object(a["resolveComponent"])("Slider");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",de,[Object(a["createElementVNode"])("div",pe,Object(a["toDisplayString"])(e.getTime(e.progress)),1),Object(a["createElementVNode"])("div",be,[Object(a["createVNode"])(s,{modelValue:e.progress,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.progress=t}),style_bg:{backgroundColor:"var(--color-control)"},style_fg:{backgroundColor:"var(--color-accent)"},style_dot:{backgroundColor:"var(--color-control-light)"},max:e.duration,onUp:e.onProgressChange},null,8,["modelValue","style_bg","style_fg","style_dot","max","onUp"])]),Object(a["createElementVNode"])("div",he,Object(a["toDisplayString"])(e.getTime(e.duration)),1)])}function me(e,t,n,r,o,c){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"slider",style:Object(a["normalizeStyle"])(e.style.general),ref:"slider",onMouseover:t[0]||(t[0]=function(){return e.onSliderOver&&e.onSliderOver.apply(e,arguments)}),onMouseout:t[1]||(t[1]=function(){return e.onSliderOut&&e.onSliderOut.apply(e,arguments)}),onMousedown:t[2]||(t[2]=function(){return e.onSliderDown&&e.onSliderDown.apply(e,arguments)})},[Object(a["createElementVNode"])("div",{class:"slider-backgroound",style:Object(a["normalizeStyle"])(e.style.bg)},[Object(a["createElementVNode"])("div",{class:"slider-fill",style:Object(a["normalizeStyle"])(e.style.fg)},null,4)],4),Object(a["createElementVNode"])("div",{class:"slider-dot",style:Object(a["normalizeStyle"])(e.style.dot)},null,4)],36)}n("a9e3");var ve=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);ve=Object(d["a"])([Object(p["a"])({props:{style_bg:Object,style_fg:Object,style_dot:Object,height:Number,dot_size:Number,min:Number,max:Number,modelValue:Number},emits:["update:modelValue","down","up","move"],data:function(){return{_dot_size:12,_min:0,_max:100,slider_pressed:!1,slider_over:!1,style:{}}},methods:{setValue:function(e){e<this._min?e=this._min:e>this._max&&(e=this._max),this.$emit("update:modelValue",e)},updateSlider:function(){var e=(this.modelValue-this._min)/(this._max-this._min)*100;this.style.fg.transform="translateX(calc(-100% + ".concat(e,"%))"),this.style.dot.left="".concat(e,"%"),this.slider_over?this.style.dot.display="block":this.slider_pressed||(this.style.dot.display="none")},onSliderDown:function(){this.slider_pressed=!0,window.addEventListener("mouseup",this.onSliderUp),window.addEventListener("mousemove",this.onSliderMove),this.$emit("down")},onSliderUp:function(e){this.slider_pressed=!1,window.removeEventListener("mouseup",this.onSliderUp),window.removeEventListener("mousemove",this.onSliderMove),this.onSliderMove(e),this.updateSlider(),this.$emit("up")},onSliderMove:function(e){var t=this.$refs.slider.getBoundingClientRect(),n=e.clientX-t.left;n<0&&(n=0),n>t.width&&(n=t.width);var a=n/t.width;this.setValue((this._max-this._min)*a+this._min),this.$emit("move");var r=window.getSelection();null!==r&&r.removeAllRanges()},onSliderOver:function(){this.slider_over=!0,this.updateSlider()},onSliderOut:function(){this.slider_over=!1,this.updateSlider()}},mounted:function(){this.min&&(this._min=this.min),this.max&&(this._max=this.max),this.dot_size&&(this._dot_size=this.dot_size),this.style={general:{height:"".concat(this.height+8,"px")},bg:{},fg:{},dot:{width:"".concat(this._dot_size,"px"),height:"".concat(this._dot_size,"px"),top:"calc(-50% - ".concat(this._dot_size/2,"px)"),transform:"translateX(-".concat(this._dot_size/2,"px)")}},Object.assign(this.style.bg,this.style_bg),Object.assign(this.style.fg,this.style_fg),Object.assign(this.style.dot,this.style_dot),this.updateSlider()},watch:{min:function(){this._min=this.min,this.updateSlider()},max:function(){this._max=this.max,this.updateSlider()},modelValue:function(){this.updateSlider()}}})],ve);var ye=ve;n("366c");const ge=v()(ye,[["render",me],["__scopeId","data-v-3ff17a22"]]);var ke=ge,Oe=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);Oe=Object(d["a"])([Object(p["a"])({props:{player:Object,playback_state:Object},data:function(){return{progress:0,duration:0,inverval:null}},components:{Slider:ke},computed:{is_playing:function(){return this.playback_state.paused},context:function(){return this.playback_state.context}},methods:{updateProgress:function(){var e=this;clearInterval(this.inverval),this.progress=this.playback_state.position,this.playback_state.paused||(this.inverval=setInterval((function(){e.progress+1e3<=e.duration&&(e.progress+=1e3)}),1e3))},onProgressChange:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ce.spotify.SDK.seek(e.player,e.progress);case 2:case"end":return t.stop()}}),t)})))()},getTime:function(e){return q(e)}},watch:{context:function(){this.duration=this.playback_state.duration,this.progress=this.playback_state.position},is_playing:function(){this.updateProgress()}},created:function(){this.duration=this.playback_state.duration,this.updateProgress()}})],Oe);var je=Oe;n("a217");const _e=v()(je,[["render",fe],["__scopeId","data-v-4efd4acc"]]);var Te=_e,Se={class:"cb-volume"};function Ee(e,t,n,r,o,c){var s=Object(a["resolveComponent"])("Slider");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Se,[Object(a["createVNode"])(s,{modelValue:e.volume,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.volume=t}),style_bg:{backgroundColor:"var(--color-control)"},style_fg:{backgroundColor:"var(--color-accent)"},style_dot:{backgroundColor:"var(--color-control-light)"},max:1,onUp:e.onVolumeChange,onMove:e.onVolumeChange},null,8,["modelValue","style_bg","style_fg","style_dot","onUp","onMove"])])}var we=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);we=Object(d["a"])([Object(p["a"])({props:{player:Object,playback_state:Object},data:function(){return{volume:0}},components:{Slider:ke},computed:{context:function(){return this.playback_state.context}},methods:{onVolumeChange:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ce.spotify.SDK.setVolume(e.player,e.volume);case 2:case"end":return t.stop()}}),t)})))()}},watch:{context:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ce.spotify.SDK.getVolume(e.player);case 2:e.volume=t.sent;case 3:case"end":return t.stop()}}),t)})))()}}})],we);var Pe=we;n("1743");const xe=v()(Pe,[["render",Ee],["__scopeId","data-v-74b6e23b"]]);var Ce=xe,Ne=(n("b0c0"),{class:"cb-track"}),Ve=["src"],Ae={class:"cb-track-info"},Re={class:"cb-track-name"},Ie={class:"cb-track-artists"},Be={key:0};function Ue(e,t,n,r,o,c){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ne,[Object(a["createElementVNode"])("img",{src:e.track_image},null,8,Ve),Object(a["createElementVNode"])("div",Ae,[Object(a["createElementVNode"])("p",Re,Object(a["toDisplayString"])(e.track_name),1),Object(a["createElementVNode"])("div",Ie,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.track_artists,(function(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("p",{key:e},[t>0?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",Be,", ")):Object(a["createCommentVNode"])("",!0),Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.name),1)])})),128))])])])}n("159b");var Ge=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);Ge=Object(d["a"])([Object(p["a"])({props:{player:Object,playback_state:Object},data:function(){return{track_image:"",track_name:"",track_artists:[]}},computed:{context:function(){return this.playback_state.context}},watch:{context:function(){var e=this.playback_state.track_window.current_track;this.track_name=e.name,this.track_artists=e.artists;var t=e.album.images,n="",a=t[0].height;t.forEach((function(e){e.height&&e.height<=a&&(n=e.url,a=e.height)})),this.track_image=n}}})],Ge);var De=Ge;n("7bf1");const Le=v()(De,[["render",Ue],["__scopeId","data-v-794065b0"]]);var Me=Le,Ke=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);Ke=Object(d["a"])([Object(p["a"])({components:{ControlButtons:ue,ControlPlayback:Te,ControlVolume:Ce,ControlCurrentTrack:Me},computed:Object(c["a"])({},Object(b["c"])({player:"player/getPlayer",device_id:"player/getDeviceId",playback_state:"player/getPlaybackState"}))})],Ke);var ze=Ke;n("36ff");const Je=v()(ze,[["render",G],["__scopeId","data-v-089d387e"]]);var Fe=Je,$e=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);$e=Object(d["a"])([Object(p["a"])({components:{CircleLoader:w,InfoBar:A,ControlBar:Fe},computed:Object(c["a"])({},Object(b["c"])({status:"app/getStatus"})),methods:Object(c["a"])({},Object(b["b"])({playerInit:"player/init"})),created:function(){console.log("[debug] Home (created)"),"not-logged"!==this.status?"loaded"!==this.status&&this.playerInit():this.$router.push({name:"Login"})}})],$e);var He=$e;n("c456");const qe=v()(He,[["render",_],["__scopeId","data-v-7b93c2fe"]]);var Ye=qe,Xe=function(e){return Object(a["pushScopeId"])("data-v-7610a826"),e=e(),Object(a["popScopeId"])(),e},We={class:"login",ref:"login"},Qe=Xe((function(){return Object(a["createElementVNode"])("h1",null,"Пожалуйста, авторизуйтесь через Spotify.",-1)}));function Ze(e,t,n,r,o,c){var s=Object(a["resolveComponent"])("CircleLoader");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[this.process?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:0})):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",We,[Qe,Object(a["createElementVNode"])("button",{onClick:t[0]||(t[0]=function(){return e.login&&e.login.apply(e,arguments)}),class:"btn"},"Войти")],512)],64)}n("9911");var et=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);et=Object(d["a"])([Object(p["a"])({data:function(){return{process:!1}},components:{CircleLoader:w},computed:Object(c["a"])({},Object(b["c"])({status:"app/getStatus"})),methods:Object(c["a"])(Object(c["a"])({},Object(b["b"])({setStatus:"app/setStatus",setAccessToken:"auth/setAccessToken",setRefreshToken:"auth/setRefreshToken"})),{},{popupEvent:function(e){var t=e.data;switch(t.status){case"ok":console.log("[debug] Login (all ok)"),window.removeEventListener("message",this.popupEvent),this.setAccessToken(localStorage.getItem("access_token")),this.setRefreshToken(localStorage.getItem("refresh_token")),this.setStatus("logged"),this.$router.push({name:"Home"});break;default:console.log("switch (data.status): default")}},login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$refs.login.querySelector(".login h1"),a=e.$refs.login.querySelector(".login button"),n.style.transform="translateX(-100vw)",a.style.transform="translateX(100vw)",e.process=!0,t.next=7,ce.backend.auth.getUserAuthURL();case 7:r=t.sent,r.state&&(localStorage.setItem(r.state_key,r.state),o=window.open(r.link,"Login with Spotify","width=800,height=600"),o&&window.addEventListener("message",e.popupEvent,!1));case 9:case"end":return t.stop()}}),t)})))()}}),created:function(){console.log("[debug] Login (created)"),"logged"!==this.status&&"loaded"!==this.status||this.$router.push({name:"Home"})}})],et);var tt=et;n("cfe4");const nt=v()(tt,[["render",Ze],["__scopeId","data-v-7610a826"]]);var at=nt,rt={class:"callback"};function ot(e,t,n,r,o,c){var s=Object(a["resolveComponent"])("CircleLoader");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",rt,[Object(a["createVNode"])(s)])}var ct=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);ct=Object(d["a"])([Object(p["a"])({components:{CircleLoader:w},created:function(){console.log("[debug] Callback (start)");var e=this.$route.query;console.log("[debug] Callback query: ",e),window.opener&&(console.log("[debug] Callback (1 if)"),e&&e.access_token?(console.log("[debug] Callback (2 if)"),localStorage.setItem("access_token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token),window.opener.postMessage({status:"ok"})):e.error?window.opener.postMessage({status:e.error}):window.opener.postMessage({status:"invalid query"}),localStorage.removeItem("spotify_auth_state"),window.close()),console.log("[debug] Callback (end)")}})],ct);var st=ct;n("e74c");const it=v()(st,[["render",ot],["__scopeId","data-v-29c03a3e"]]);var lt=it,ut=function(e){return Object(a["pushScopeId"])("data-v-54c14b51"),e=e(),Object(a["popScopeId"])(),e},dt={class:"not-found"},pt=ut((function(){return Object(a["createElementVNode"])("h1",null,"404",-1)})),bt=ut((function(){return Object(a["createElementVNode"])("h2",null,"Страница не найдена",-1)}));function ht(e,t,n,r,o,c){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",dt,[pt,bt,Object(a["createElementVNode"])("button",{onClick:t[0]||(t[0]=function(){return e.goHome&&e.goHome.apply(e,arguments)}),class:"btn"},"На главную")])}var ft=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n)}(p["b"]);ft=Object(d["a"])([Object(p["a"])({methods:{goHome:function(){this.$router.push({name:"Home"})}}})],ft);var mt=ft;n("44e8");const vt=v()(mt,[["render",ht],["__scopeId","data-v-54c14b51"]]);var yt=vt,gt=[{path:"/",name:"Home",component:Ye,children:[{path:"",component:yt}]},{path:"/login",name:"Login",component:at},{path:"/callback",name:"Callback",component:lt},{path:"/:catchAll(.*)",name:"NotFound",component:yt}],kt=Object(k["a"])({history:Object(k["b"])(),routes:gt}),Ot=kt,jt=n("6d5e"),_t=n.n(jt),Tt={inited:!1,status:null};function St(e){return e.inited}function Et(e){return e.status}var wt={getInitState:St,getStatus:Et};function Pt(e,t){e.inited=t}function xt(e,t){e.status=t}var Ct={SET_INIT_STATE:Pt,SET_STATUS:xt};function Nt(e){return Vt.apply(this,arguments)}function Vt(){return Vt=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,console.log("[debug] app/init (start)"),e.next=4,n("auth/init",null,{root:!0});case 4:n("setInitState",!0),console.log("[debug] app/init (end)");case 6:case"end":return e.stop()}}),e)}))),Vt.apply(this,arguments)}function At(e,t){var n=e.commit;console.log("[debug] app/setInitState: ",t),n("SET_INIT_STATE",t)}function Rt(e,t){var n=e.commit;console.log("[debug] app/setStatus: ",t),n("SET_STATUS",t)}var It={init:Nt,setInitState:At,setStatus:Rt},Bt={namespaced:!0,state:Tt,getters:wt,mutations:Ct,actions:It},Ut={access_token:null,refresh_token:null};function Gt(e){return e.access_token}function Dt(e){return e.refresh_token}var Lt={getAccessToken:Gt,getRefreshToken:Dt};function Mt(e,t){e.access_token=t}function Kt(e,t){e.refresh_token=t}var zt={SET_ACCESS_TOKEN:Mt,SET_REFRESH_TOKEN:Kt};function Jt(e){return Ft.apply(this,arguments)}function Ft(){return Ft=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.dispatch,console.log("[debug] auth/init (start)"),n("app/setStatus","not-logged",{root:!0}),a=localStorage.getItem("access_token"),!a){e.next=11;break}return console.log("[debug] auth/init (check start)"),e.next=8,ce.backend.auth.checkToken(a);case 8:r=e.sent,console.log("[debug] auth/init (check end)"),"ok"===r.status&&(n("setAccessToken",a),n("app/setStatus","logged",{root:!0}));case 11:console.log("[debug] auth/init (end)");case 12:case"end":return e.stop()}}),e)}))),Ft.apply(this,arguments)}function $t(e,t){var n=e.commit;console.log("[debug] auth/setAccessToken: ",t),n("SET_ACCESS_TOKEN",t)}function Ht(e,t){var n=e.commit;n("SET_REFRESH_TOKEN",t)}var qt={init:Jt,setAccessToken:$t,setRefreshToken:Ht},Yt={namespaced:!0,state:Ut,getters:Lt,mutations:zt,actions:qt},Xt={player:null,device_id:null,playback:null,playback_state:null};function Wt(e){return e.player}function Qt(e){return e.device_id}function Zt(e){return e.playback}function en(e){return e.playback_state}var tn={getPlayer:Wt,getDeviceId:Qt,getPlayback:Zt,getPlaybackState:en};function nn(e,t){e.player=t}function an(e,t){e.device_id=t}function rn(e,t){e.playback=t}function on(e,t){e.playback_state=t}var cn={SET_PLAYER:nn,SET_DEVICE_ID:an,SET_PLAYBACK:rn,SET_PLAYBACK_STATE:on};function sn(e){return ln.apply(this,arguments)}function ln(){return ln=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,c,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,a=t.rootGetters,console.log("[debug] player/init (start)"),r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("[debug] player/waitTransferComplete"),e.abrupt("return",new Promise((function(e){var t=setInterval(Object(o["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=Xt.playback_state,null!==a&&(clearInterval(t),e(a));case 2:case"end":return n.stop()}}),n)}))))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=document.createElement("script"),c.src="https://sdk.scdn.co/spotify-player.js",c.async=!0,document.body.appendChild(c),s=a["auth/getAccessToken"],e.next=10,ce.spotify.SDK.init(s);case 10:return i=e.sent,i.addListener("initialization_error",(function(e){var t=e.message;console.error(t)})),i.addListener("authentication_error",(function(e){var t=e.message;console.error(t)})),i.addListener("account_error",(function(e){var t=e.message;console.error(t)})),i.addListener("playback_error",(function(e){var t=e.message;console.error(t)})),i.addListener("ready",(function(e){var t=e.device_id;console.log("Ready with Device ID",t),n("setPlayer",i),n("setDeviceId",t),ce.spotify.player.transferPlayback({device_ids:[t]})})),i.addListener("not_ready",(function(e){var t=e.device_id;console.log("Device ID has gone offline",t)})),i.addListener("player_state_changed",(function(e){console.log("current state: ",e),n("setPlaybackState",e)})),i.addListener("autoplay_failed",(function(){console.log("Autoplay is not allowed by the browser autoplay rules")})),e.next=21,ce.spotify.SDK.connect(i);case 21:return e.next=23,r();case 23:n("app/setStatus","loaded",{root:!0}),console.log("[debug] player/init (end)");case 25:case"end":return e.stop()}}),e)}))),ln.apply(this,arguments)}function un(e,t){var n=e.commit;console.log("[debug] player/setPlayer: ",t),n("SET_PLAYER",t)}function dn(e,t){var n=e.commit;console.log("[debug] player/setDeviceId: ",t),n("SET_DEVICE_ID",t)}function pn(e,t){var n=e.commit;console.log("[debug] player/setPlayback: ",t),n("SET_PLAYBACK",t)}function bn(e,t){var n=e.commit;console.log("[debug] player/setPlaybackState: ",t),n("SET_PLAYBACK_STATE",t)}var hn={init:sn,setPlayer:un,setDeviceId:dn,setPlayback:pn,setPlaybackState:bn},fn={namespaced:!0,state:Xt,getters:tn,mutations:cn,actions:hn},mn={user:null};function vn(e){return e.user}var yn={getUser:vn};function gn(e,t){e.user=t}var kn={SET_USER:gn};function On(e){return jn.apply(this,arguments)}function jn(){return jn=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,t.rootGetters,console.log("[debug] user/init (start)"),e.next=4,ce.spotify.users.getCurrentUsersProfile();case 4:a=e.sent,a&&n("setUser",a),console.log("[debug] user/init user: ",mn.user),console.log("[debug] user/init (end)");case 8:case"end":return e.stop()}}),e)}))),jn.apply(this,arguments)}function _n(e,t){var n=e.commit;n("SET_USER",t)}var Tn={init:On,setUser:_n},Sn={namespaced:!0,state:mn,getters:yn,mutations:kn,actions:Tn},En=Object(b["a"])({state:{},mutations:{},actions:{},modules:{app:Bt,auth:Yt,player:fn,user:Sn}});Object(a["createApp"])(g).use(Ot).use(En).component("inline-svg",_t.a).mount("#app")},ce1e:function(e,t,n){e.exports=n.p+"img/control-forward.0892bb3f.svg"},cfe4:function(e,t,n){"use strict";n("96bc")},d08e:function(e,t,n){e.exports=n.p+"img/control-play.2f25944e.svg"},dd7f:function(e,t,n){e.exports=n.p+"img/control-pause.e75d8a30.svg"},e1a6:function(e,t,n){},e74c:function(e,t,n){"use strict";n("49d8")},eda4:function(e,t,n){}});
//# sourceMappingURL=app.c611deef.js.map