(function(e){function t(t){for(var a,o,s=t[0],i=t[1],l=t[2],p=0,d=[];p<s.length;p++)o=s[p],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);u&&u(t);while(d.length)d.shift()();return c.push.apply(c,l||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],a=!0,s=1;s<r.length;s++){var i=r[s];0!==n[i]&&(a=!1)}a&&(c.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},c=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/sound-flow/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=i;c.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"0206":function(e,t,r){e.exports=r.p+"img/info-bar-back.9c73e480.svg"},"06d6":function(e,t,r){},"078f":function(e,t,r){},"13c4":function(e,t,r){"use strict";r("95d0")},"1e4a":function(e,t,r){},"25a8":function(e,t,r){"use strict";r("5a54")},"27c6":function(e,t,r){e.exports=r.p+"img/track-list-pause.1630c2bf.svg"},"366c":function(e,t,r){"use strict";r("91f4")},"395a":function(e,t,r){e.exports=r.p+"img/control-repeat.2a16d7ba.svg"},"3e22":function(e,t,r){e.exports=r.p+"img/control-device.31a0f906.svg"},"411d":function(e,t,r){"use strict";r("9dce")},"44e8":function(e,t,r){"use strict";r("6b3e")},"49d8":function(e,t,r){},"524d":function(e,t,r){},"56f5":function(e,t,r){"use strict";r("821d")},5982:function(e,t,r){"use strict";r("b91e")},"5a54":function(e,t,r){},"6b3e":function(e,t,r){},"6d33":function(e,t,r){},"80d4":function(e,t,r){"use strict";r("078f")},"821d":function(e,t,r){},"893e":function(e,t,r){"use strict";r("daed")},"8ba3":function(e,t,r){e.exports=r.p+"img/control-back.5fcd24e1.svg"},9017:function(e,t,r){"use strict";r("b3b6")},"91f4":function(e,t,r){},"949d":function(e,t,r){"use strict";r("524d")},"95d0":function(e,t,r){},"96bc":function(e,t,r){},"9a4a":function(e,t,r){"use strict";r("ccb0")},"9a9c":function(e,t,r){e.exports=r.p+"img/track-list-current.78e316af.svg"},"9aa8":function(e,t,r){"use strict";r("b869")},"9dce":function(e,t,r){},"9e13":function(e,t,r){},"9e61":function(e,t,r){"use strict";r("1e4a")},a7e9:function(e,t,r){"use strict";r("dce3")},ac3a:function(e,t,r){e.exports=r.p+"img/track-list-play.d8e45602.svg"},acb8:function(e,t,r){e.exports=r.p+"img/control-device-mobile.858d6021.svg"},b3b6:function(e,t,r){},b869:function(e,t,r){},b91e:function(e,t,r){},c87e:function(e,t,r){e.exports=r.p+"img/info-bar-forward.c7dc5e13.svg"},c976:function(e,t,r){"use strict";r("06d6")},cab9:function(e,t,r){e.exports=r.p+"img/control-shuffle.a853ab1c.svg"},ccb0:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("7a23");function n(e,t,r,n,c,o){var s=Object(a["resolveComponent"])("router-view");return e.inited?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:0})):Object(a["createCommentVNode"])("",!0)}var c=r("5530"),o=r("bee2"),s=r("d4ec"),i=r("262e"),l=r("2caf"),u=r("9ab4"),p=r("ce1f"),d=r("5502"),b=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);b=Object(u["a"])([Object(p["a"])({computed:Object(c["a"])({},Object(d["c"])({inited:"app/getInitState",status:"app/getStatus"})),methods:Object(c["a"])({},Object(d["b"])({init:"app/init"})),created:function(){this.init()}})],b);var m=b,f=(r("13c4"),r("6b0d")),y=r.n(f);const h=y()(m,[["render",n]]);var v=h,g=r("6c02"),k={key:1,class:"app-layout"},O={class:"app-layout-content"};function j(e,t,r,n,c,o){var s=Object(a["resolveComponent"])("CircleLoader"),i=Object(a["resolveComponent"])("InfoBar"),l=Object(a["resolveComponent"])("router-view"),u=Object(a["resolveComponent"])("ControlBar");return"loaded"!==e.status?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:0})):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",k,[Object(a["createVNode"])(i),Object(a["createElementVNode"])("div",O,[Object(a["createVNode"])(l,{class:"content-wrapper"})]),Object(a["createVNode"])(u)]))}var _=r("1da1");r("96cf");function T(e,t,r,n,c,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])("span")}var S=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);r("25a8");const E=y()(S,[["render",T],["__scopeId","data-v-dcff6744"]]);var x=E,w={class:"info-bar"},P={class:"info-bar-control"};function N(e,t,n,c,o,s){var i=Object(a["resolveComponent"])("inline-svg");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",w,[Object(a["createElementVNode"])("div",P,[Object(a["createElementVNode"])("button",{onClick:t[0]||(t[0]=function(t){return e.$router.push("/")})},[Object(a["createVNode"])(i,{src:r("df66")},null,8,["src"])]),Object(a["createElementVNode"])("button",{onClick:t[1]||(t[1]=function(t){return e.$router.go(-1)})},[Object(a["createVNode"])(i,{src:r("0206")},null,8,["src"])]),Object(a["createElementVNode"])("button",{onClick:t[2]||(t[2]=function(t){return e.$router.go(1)})},[Object(a["createVNode"])(i,{src:r("c87e")},null,8,["src"])])])])}var V=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);V=Object(u["a"])([Object(p["a"])({})],V);var C=V;r("9e61");const A=y()(C,[["render",N],["__scopeId","data-v-4c112688"]]);var B=A,I={class:"control-bar"},R={class:"control-bar-left"},D={class:"control-bar-center"},U={class:"control-bar-right"};function L(e,t,r,n,c,o){var s=Object(a["resolveComponent"])("ControlCurrentTrack"),i=Object(a["resolveComponent"])("ControlButtons"),l=Object(a["resolveComponent"])("ControlPlayback"),u=Object(a["resolveComponent"])("ControlDevice"),p=Object(a["resolveComponent"])("ControlVolume");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",I,[Object(a["createElementVNode"])("div",R,[Object(a["createVNode"])(s)]),Object(a["createElementVNode"])("div",D,[Object(a["createVNode"])(i),Object(a["createVNode"])(l)]),Object(a["createElementVNode"])("div",U,[Object(a["createVNode"])(u),Object(a["createVNode"])(p)])])}var q={class:"cb-buttons"};function G(e,t,n,c,o,s){var i=Object(a["resolveComponent"])("inline-svg");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",q,[Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["cb-shuffle",{active:this.playback.shuffle_state}]),onClick:t[0]||(t[0]=function(){return e.toggleShuffle&&e.toggleShuffle.apply(e,arguments)})},[Object(a["createVNode"])(i,{src:r("cab9")},null,8,["src"])],2),Object(a["createElementVNode"])("button",{class:"cb-back",onClick:t[1]||(t[1]=function(){return e.previousTrack&&e.previousTrack.apply(e,arguments)})},[Object(a["createVNode"])(i,{src:r("8ba3")},null,8,["src"])]),Object(a["createElementVNode"])("button",{class:"cb-playpause",onClick:t[2]||(t[2]=function(){return e.playPause&&e.playPause.apply(e,arguments)})},[this.playback.is_playing?(Object(a["openBlock"])(),Object(a["createBlock"])(i,{key:1,src:r("dd7f"),width:"30px",height:"30px"},null,8,["src"])):(Object(a["openBlock"])(),Object(a["createBlock"])(i,{key:0,src:r("d08e"),width:"30px",height:"30px"},null,8,["src"]))]),Object(a["createElementVNode"])("button",{class:"cb-forward",onClick:t[3]||(t[3]=function(){return e.nextTrack&&e.nextTrack.apply(e,arguments)})},[Object(a["createVNode"])(i,{src:r("ce1e")},null,8,["src"])]),Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["cb-repeat",[{active:"off"!==this.playback.repeat_state},{track:"track"===this.playback.repeat_state}]]),onClick:t[4]||(t[4]=function(){return e.toggleRepeatMode&&e.toggleRepeatMode.apply(e,arguments)})},[Object(a["createVNode"])(i,{src:r("395a")},null,8,["src"])],2)])}r("d3b7");var M="https://api-sf.mznx.xyz",z=function(e){var t=e.method,r=M+e.path;return fetch(r,{method:t}).then((function(e){return e.json()}))},K=z,$={getUserAuthURL:function(){var e={method:"GET",path:"/auth/login"};return K(e)},checkToken:function(e){var t={method:"GET",path:"/auth/check_token?access_token=".concat(e)};return K(t)},refreshToken:function(e){var t={method:"GET",path:"/auth/refresh_token?refresh_token=".concat(e)};return K(t)}},J={auth:$},F={init:function(e){return new Promise((function(t){window.onSpotifyWebPlaybackSDKReady=function(){var r=new window.Spotify.Player({name:"Sound Flow (Web Playback SDK)",getOAuthToken:function(t){t(e)},volume:.5});t(r)}}))},connect:function(e){return new Promise((function(t){e.connect().then((function(e){e&&(console.log("The Web Playback SDK successfully connected to Spotify!"),t(!0))}))}))},disconnect:function(e){e.disconnect()},togglePlay:function(e){return e.togglePlay()},previousTrack:function(e){return e.previousTrack()},nextTrack:function(e){return e.nextTrack()},seek:function(e,t){return e.seek(t)},getVolume:function(e){return e.getVolume()},setVolume:function(e,t){return e.setVolume(t)}};r("99af"),r("e9c4"),r("b65f"),r("159b"),r("ac1f"),r("1276"),r("b0c0");function W(e){var t="";return e&&JSON.parse(JSON.stringify(e),(function(e,r){e&&(t+="".concat(e,"=").concat(r,"&"))})),t}function H(e,t){var r=Math.trunc(e/36e5),a=Math.trunc((e-36e5*r)/6e4),n=Math.trunc((e-36e5*r-6e4*a)/1e3),c=":",o=":",s="";t&&(c="h ",o="m ",s="s");var i="";return r?(i+="".concat(r).concat(c),i+=a<10?"0".concat(a).concat(o):"".concat(a).concat(o)):i+="".concat(a).concat(o),i+=n<10?"0".concat(n).concat(s):"".concat(n).concat(s),i}function Y(e,t){var r="";if(e&&"images"in e){var a=e.images;if(r=a[0].url,a[0].height){var n=a[0].height;a.forEach((function(e){e.height&&(t?e.height>=n&&(r=e.url,n=e.height):e.height<=n&&(r=e.url,n=e.height))}))}}return r}function X(e){var t=e.split(":");return{type:t[1],val:t[2]}}function Q(e){var t=[];return e.forEach((function(e){var r={name:e.name,duration:H(e.duration_ms,!1),artists:e.artists,image:Y(e.album,!1),uri:e.uri};t.push(r)})),t}var Z="https://api.spotify.com/v1",ee=function(e){var t=e.method,r=Z+e.path;return fetch(r,{method:t,headers:{Authorization:"Bearer "+localStorage.getItem("access_token")},body:e.body?e.body:null}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(){return null}))},te=ee,re={getAlbum:function(e){var t=W(e.query),r={method:"GET",path:"/albums/".concat(e.params.id,"?").concat(t)};return te(r)},getAlbums:function(e){var t=W(e.query),r={method:"GET",path:"/albums?".concat(t)};return te(r)},getAlbumsTracks:function(e){var t=W(e.query),r={method:"GET",path:"/albums/".concat(e.params.id,"/tracks?").concat(t)};return te(r)},getSavedAlbums:function(e){var t=W(e.query),r={method:"GET",path:"/me/albums?".concat(t)};return te(r)},saveAlbums:function(e){var t={method:"PUT",path:"/me/albums",body:JSON.stringify(e.body)};return te(t)},removeAlbums:function(e){var t={method:"DELETE",path:"/me/albums",body:JSON.stringify(e.body)};return te(t)},checkSavedAlbums:function(e){var t=W(e.query),r={method:"GET",path:"/me/albums/contains?".concat(t)};return te(r)},getNewReleases:function(e){var t=W(e.query),r={method:"GET",path:"/browse/new-releases?".concat(t)};return te(r)}},ae={getArtist:function(e){var t={method:"GET",path:"/artists/".concat(e.params.id)};return te(t)},getArtists:function(e){var t=W(e.query),r={method:"GET",path:"/artists?".concat(t)};return te(r)},getArtistAlbums:function(e){var t=W(e.query),r={method:"GET",path:"/artists/".concat(e.params.id,"/albums?").concat(t)};return te(r)},getArtistTopTracks:function(e){var t=W(e.query),r={method:"GET",path:"/artists/".concat(e.params.id,"/top-tracks?").concat(t)};return te(r)},getArtistRelatedArtists:function(e){var t={method:"GET",path:"/artists/".concat(e.params.id,"/related-artists")};return te(t)}},ne={getTrack:function(e){var t=W(e.query),r={method:"GET",path:"/tracks/".concat(e.params.id,"?").concat(t)};return te(r)},getTracks:function(e){var t=W(e.query),r={method:"GET",path:"/tracks?".concat(t)};return te(r)},getSavedTracks:function(e){var t=W(e.query),r={method:"GET",path:"/me/tracks?".concat(t)};return te(r)},saveTracks:function(e){var t={method:"PUT",path:"/me/tracks",body:JSON.stringify(e.body)};return te(t)},removeTracks:function(e){var t={method:"DELETE",path:"/me/tracks",body:JSON.stringify(e.body)};return te(t)},checkSavedTracks:function(e){var t=W(e.query),r={method:"GET",path:"/me/tracks/contains?".concat(t)};return te(r)},getTracksAudioFeatures:function(e){var t=W(e.query),r={method:"GET",path:"/audio-features?".concat(t)};return te(r)},getTrackAudioFeatures:function(e){var t={method:"GET",path:"/audio-features/".concat(e.params.id)};return te(t)},getTrackAudioAnalysis:function(e){var t={method:"GET",path:"/audio-analysis/".concat(e.params.id)};return te(t)},getRecommendations:function(e){var t=W(e.query),r={method:"GET",path:"/recommendations?".concat(t)};return te(r)}},ce={search:function(e){var t=W(e.query),r={method:"GET",path:"/search?".concat(t)};return te(r)}},oe={getCurrentUsersProfile:function(){var e={method:"GET",path:"/me"};return te(e)},getUserTopArtists:function(e){var t=W(e.query),r={method:"GET",path:"/me/top/artists?".concat(t)};return te(r)},getUserTopTracks:function(e){var t=W(e.query),r={method:"GET",path:"/me/top/tracks?".concat(t)};return te(r)},getUserProfile:function(e){var t={method:"GET",path:"/users/".concat(e.params.user_id)};return te(t)},followPlaylist:function(e){var t={method:"PUT",path:"/playlists/".concat(e.params.playlist_id,"/followers"),body:JSON.stringify(e)};return te(t)},unfollowPlaylist:function(e){var t={method:"DELETE",path:"/playlists/".concat(e.params.playlist_id,"/followers")};return te(t)},getFollowedArtists:function(e){var t=W(e.query),r={method:"GET",path:"/me/following?".concat(t)};return te(r)},followArtistsOrUsers:function(e){var t=W(e.query),r={method:"PUT",path:"/me/following?".concat(t)};return te(r)},unfollowArtistsOrUsers:function(e){var t=W(e.query),r={method:"DELETE",path:"/me/following?".concat(t)};return te(r)},checkUserFollowArtistsOrUsers:function(e){var t=W(e.query),r={method:"GET",path:"/me/following/contains?".concat(t)};return te(r)},checkUsersFollowPlaylist:function(e){var t=W(e.query),r={method:"GET",path:"/playlists/".concat(e.params.playlist_id,"/followers/contains?").concat(t)};return te(r)}},se={getPlaylist:function(e){var t=W(e.query),r={method:"GET",path:"/playlists/".concat(e.params.playlist_id,"?").concat(t)};return te(r)},changePlaylistDetails:function(e){var t={method:"PUT",path:"/playlists/".concat(e.params.playlist_id),body:JSON.stringify(e.body)};return te(t)},getPlaylistTracks:function(e){var t=W(e.query),r={method:"GET",path:"/playlists/".concat(e.params.playlist_id,"/tracks?").concat(t)};return te(r)},addTracksToPlaylist:function(e){var t={method:"POST",path:"/playlists/".concat(e.params.playlist_id,"/tracks"),body:JSON.stringify(e.body)};return te(t)},reorderPlaylistTracks:function(e){var t={method:"PUT",path:"/playlists/".concat(e.params.playlist_id,"/tracks"),body:JSON.stringify(e.body)};return te(t)},replacePlaylistTracks:function(e){var t={method:"PUT",path:"/playlists/".concat(e.params.playlist_id,"/tracks"),body:JSON.stringify(e.body)};return te(t)},removePlaylistTracks:function(e){var t={method:"DELETE",path:"/playlists/".concat(e.params.playlist_id,"/tracks"),body:JSON.stringify(e.body)};return te(t)},getCurrentUserPlaylists:function(e){var t=W(e.query),r={method:"GET",path:"/me/playlists?".concat(t)};return te(r)},getUserPlaylists:function(e){var t=W(e.query),r={method:"GET",path:"/users/".concat(e.params.user_id,"/playlists?").concat(t)};return te(r)},createPlaylist:function(e){var t={method:"POST",path:"/users/".concat(e.params.user_id,"/playlists"),body:JSON.stringify(e.body)};return te(t)},getFeaturedPlaylists:function(e){var t=W(e.query),r={method:"GET",path:"/browse/featured-playlists?".concat(t)};return te(r)},getCategorysPlaylists:function(e){var t=W(e.query),r={method:"GET",path:"/browse/categories/".concat(e.params.category_id,"/playlists?").concat(t)};return te(r)},getPlaylistImage:function(e){var t={method:"GET",path:"/playlists/".concat(e.params.playlist_id,"/images")};return te(t)},setPlaylistImage:function(e){var t={method:"PUT",path:"/playlists/".concat(e.params.playlist_id,"/images")};return te(t)}},ie={getAvailableGenreSeeds:function(){var e={method:"GET",path:"/recommendations/available-genre-seeds"};return te(e)}},le={getPlaybackState:function(e){var t=W(e.query),r={method:"GET",path:"/me/player?".concat(t)};return te(r)},transferPlayback:function(e){var t={method:"PUT",path:"/me/player",body:JSON.stringify(e.body)};return te(t)},getAvailableDevices:function(){var e={method:"GET",path:"/me/player/devices"};return te(e)},getCurrentTrack:function(e){var t=W(e.query),r={method:"GET",path:"/me/player/currently-playing?".concat(t)};return te(r)},startPlayback:function(e){var t=W(e.query),r={method:"PUT",path:"/me/player/play?".concat(t),body:JSON.stringify(e.body)};return te(r)},pausePlayback:function(e){var t=W(e.query),r={method:"PUT",path:"/me/player/pause?".concat(t)};return te(r)},nextTrack:function(e){var t=W(e.query),r={method:"POST",path:"/me/player/next?".concat(t)};return te(r)},prevTrack:function(e){var t=W(e.query),r={method:"POST",path:"/me/player/previous?".concat(t)};return te(r)},seek:function(e){var t=W(e.query),r={method:"PUT",path:"/me/player/seek?".concat(t)};return te(r)},setRepeatMode:function(e){var t=W(e.query),r={method:"PUT",path:"/me/player/repeat?".concat(t)};return te(r)},setVolume:function(e){var t=W(e.query),r={method:"PUT",path:"/me/player/volume?".concat(t)};return te(r)},togglePlaybackShuffle:function(e){var t=W(e.query),r={method:"PUT",path:"/me/player/shuffle?".concat(t)};return te(r)},getRecentlyPlayedTracks:function(e){var t=W(e.query),r={method:"GET",path:"/me/player/recently-played?".concat(t)};return te(r)},addToPlaybackQueue:function(e){var t=W(e.query),r={method:"POST",path:"/me/player/queue?".concat(t)};return te(r)}},ue={SDK:F,albums:re,artists:ae,tracks:ne,search:ce,users:oe,playlists:se,genres:ie,player:le},pe={backend:J,spotify:ue},de=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);de=Object(u["a"])([Object(p["a"])({computed:Object(c["a"])({},Object(d["c"])({player:"player/getPlayer",device_id:"player/getDeviceId",playback:"player/getPlayback",playback_state:"player/getPlaybackState"})),methods:{playPause:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.playback_state){t.next=5;break}return t.next=3,pe.spotify.SDK.togglePlay(e.player);case 3:t.next=12;break;case 5:if(!e.playback.is_playing){t.next=10;break}return t.next=8,pe.spotify.player.pausePlayback({});case 8:t.next=12;break;case 10:return t.next=12,pe.spotify.player.startPlayback({});case 12:case"end":return t.stop()}}),t)})))()},previousTrack:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.playback_state){t.next=5;break}return t.next=3,pe.spotify.SDK.previousTrack(e.player);case 3:t.next=7;break;case 5:return t.next=7,pe.spotify.player.prevTrack({});case 7:case"end":return t.stop()}}),t)})))()},nextTrack:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.playback_state){t.next=5;break}return t.next=3,pe.spotify.SDK.nextTrack(e.player);case 3:t.next=7;break;case 5:return t.next=7,pe.spotify.player.nextTrack({});case 7:case"end":return t.stop()}}),t)})))()},toggleShuffle:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pe.spotify.player.togglePlaybackShuffle({query:{state:!e.playback.shuffle_state}});case 2:case"end":return t.stop()}}),t)})))()},toggleRepeatMode:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r="",t.t0=e.playback.repeat_state,t.next="off"===t.t0?4:"context"===t.t0?6:"track"===t.t0?8:10;break;case 4:return r="context",t.abrupt("break",10);case 6:return r="track",t.abrupt("break",10);case 8:return r="off",t.abrupt("break",10);case 10:return t.next=12,pe.spotify.player.setRepeatMode({query:{state:r}});case 12:case"end":return t.stop()}}),t)})))()}}})],de);var be=de;r("d731");const me=y()(be,[["render",G],["__scopeId","data-v-d6efeb38"]]);var fe=me,ye={class:"cb-playback"},he={class:"cb-progress-time"},ve={class:"cb-progress-bar"},ge={class:"cb-progress-time"};function ke(e,t,r,n,c,o){var s=Object(a["resolveComponent"])("Slider");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ye,[Object(a["createElementVNode"])("div",he,Object(a["toDisplayString"])(e.getTime(e.progress)),1),Object(a["createElementVNode"])("div",ve,[Object(a["createVNode"])(s,{modelValue:e.progress,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.progress=t}),style_bg:{backgroundColor:"var(--color-control)"},style_fg:{backgroundColor:"var(--color-accent)"},style_dot:{backgroundColor:"var(--color-control-light)"},max:e.duration,onUp:e.onProgressChange},null,8,["modelValue","style_bg","style_fg","style_dot","max","onUp"])]),Object(a["createElementVNode"])("div",ge,Object(a["toDisplayString"])(e.getTime(e.duration)),1)])}function Oe(e,t,r,n,c,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"slider",style:Object(a["normalizeStyle"])(e.style.general),ref:"slider",onMouseover:t[0]||(t[0]=function(){return e.onSliderOver&&e.onSliderOver.apply(e,arguments)}),onMouseout:t[1]||(t[1]=function(){return e.onSliderOut&&e.onSliderOut.apply(e,arguments)}),onMousedown:t[2]||(t[2]=function(){return e.onSliderDown&&e.onSliderDown.apply(e,arguments)})},[Object(a["createElementVNode"])("div",{class:"slider-backgroound",style:Object(a["normalizeStyle"])(e.style.bg)},[Object(a["createElementVNode"])("div",{class:"slider-fill",style:Object(a["normalizeStyle"])(e.style.fg)},null,4)],4),Object(a["createElementVNode"])("div",{class:"slider-dot",style:Object(a["normalizeStyle"])(e.style.dot)},null,4)],36)}r("a9e3");var je=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);je=Object(u["a"])([Object(p["a"])({props:{style_bg:Object,style_fg:Object,style_dot:Object,height:Number,dot_size:Number,min:Number,max:Number,modelValue:Number},emits:["update:modelValue","down","up","move"],data:function(){return{_dot_size:12,_min:0,_max:100,slider_pressed:!1,slider_over:!1,style:{}}},methods:{setValue:function(e){e<this._min?e=this._min:e>this._max&&(e=this._max),this.$emit("update:modelValue",e)},updateSlider:function(){var e=(this.modelValue-this._min)/(this._max-this._min)*100;this.style.fg.transform="translateX(calc(-100% + ".concat(e,"%))"),this.style.dot.left="".concat(e,"%"),this.slider_over?this.style.dot.display="block":this.slider_pressed||(this.style.dot.display="none")},onSliderDown:function(){this.slider_pressed=!0,window.addEventListener("mouseup",this.onSliderUp),window.addEventListener("mousemove",this.onSliderMove),this.$emit("down")},onSliderUp:function(e){this.slider_pressed=!1,window.removeEventListener("mouseup",this.onSliderUp),window.removeEventListener("mousemove",this.onSliderMove),this.onSliderMove(e),this.updateSlider(),this.$emit("up")},onSliderMove:function(e){var t=this.$refs.slider.getBoundingClientRect(),r=e.clientX-t.left;r<0&&(r=0),r>t.width&&(r=t.width);var a=r/t.width;this.setValue((this._max-this._min)*a+this._min),this.$emit("move");var n=window.getSelection();null!==n&&n.removeAllRanges()},onSliderOver:function(){this.slider_over=!0,this.updateSlider()},onSliderOut:function(){this.slider_over=!1,this.updateSlider()}},mounted:function(){this.min&&(this._min=this.min),this.max&&(this._max=this.max),this.dot_size&&(this._dot_size=this.dot_size),this.style={general:{height:"".concat(this.height+8,"px")},bg:{},fg:{},dot:{width:"".concat(this._dot_size,"px"),height:"".concat(this._dot_size,"px"),top:"calc(-50% - ".concat(this._dot_size/2,"px)"),transform:"translateX(-".concat(this._dot_size/2,"px)")}},Object.assign(this.style.bg,this.style_bg),Object.assign(this.style.fg,this.style_fg),Object.assign(this.style.dot,this.style_dot),this.updateSlider()},watch:{min:function(){this._min=this.min,this.updateSlider()},max:function(){this._max=this.max,this.updateSlider()},modelValue:function(){this.updateSlider()}}})],je);var _e=je;r("366c");const Te=y()(_e,[["render",Oe],["__scopeId","data-v-3ff17a22"]]);var Se=Te,Ee=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);Ee=Object(u["a"])([Object(p["a"])({data:function(){return{progress:0,duration:0,inverval:null}},components:{Slider:Se},computed:Object(c["a"])(Object(c["a"])({},Object(d["c"])({player:"player/getPlayer",device_id:"player/getDeviceId",playback:"player/getPlayback",playback_state:"player/getPlaybackState"})),{},{context:function(){return this.playback}}),methods:{updateProgress:function(){var e=this;clearInterval(this.inverval),this.duration=this.playback.item.duration_ms,this.progress=this.playback.progress_ms,this.playback.is_playing&&(this.inverval=setInterval((function(){e.progress+1e3<=e.duration&&(e.progress+=1e3)}),1e3))},onProgressChange:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.playback_state){t.next=5;break}return t.next=3,pe.spotify.SDK.seek(e.player,e.progress);case 3:t.next=7;break;case 5:return t.next=7,pe.spotify.player.seek({query:{position_ms:Math.trunc(e.progress)}});case 7:case"end":return t.stop()}}),t)})))()},getTime:function(e){return H(e,!1)}},watch:{context:function(){this.updateProgress()}},created:function(){this.updateProgress()}})],Ee);var xe=Ee;r("411d");const we=y()(xe,[["render",ke],["__scopeId","data-v-4e3f37f9"]]);var Pe=we,Ne={class:"cb-volume"};function Ve(e,t,r,n,c,o){var s=Object(a["resolveComponent"])("Slider");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ne,[Object(a["createVNode"])(s,{modelValue:e.volume,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.volume=t}),style_bg:{backgroundColor:"var(--color-control)"},style_fg:{backgroundColor:"var(--color-accent)"},style_dot:{backgroundColor:"var(--color-control-light)"},max:1,onUp:e.onVolumeChange,onMove:e.onVolumeChange},null,8,["modelValue","style_bg","style_fg","style_dot","onUp","onMove"])])}var Ce=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);Ce=Object(u["a"])([Object(p["a"])({data:function(){return{volume:0}},components:{Slider:Se},computed:Object(c["a"])(Object(c["a"])({},Object(d["c"])({player:"player/getPlayer",playback:"player/getPlayback",playback_state:"player/getPlaybackState"})),{},{context:function(){return this.playback}}),methods:{onVolumeChange:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.playback_state){t.next=5;break}return t.next=3,pe.spotify.SDK.setVolume(e.player,e.volume);case 3:t.next=7;break;case 5:return t.next=7,pe.spotify.player.setVolume({query:{volume_percent:Math.trunc(100*e.volume)}});case 7:case"end":return t.stop()}}),t)})))()}},watch:{context:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.playback_state){t.next=6;break}return t.next=3,pe.spotify.SDK.getVolume(e.player);case 3:e.volume=t.sent,t.next=7;break;case 6:e.volume=e.playback.device.volume_percent/100;case 7:case"end":return t.stop()}}),t)})))()}}})],Ce);var Ae=Ce;r("a7e9");const Be=y()(Ae,[["render",Ve],["__scopeId","data-v-53533f88"]]);var Ie=Be,Re={class:"cb-track"},De=["src"],Ue={class:"cb-track-info"};function Le(e,t,r,n,c,o){var s=Object(a["resolveComponent"])("router-link"),i=Object(a["resolveComponent"])("ArtistsList");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Re,[Object(a["createVNode"])(s,{to:e.context_link},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("img",{src:e.track_image},null,8,De)]})),_:1},8,["to"]),Object(a["createElementVNode"])("div",Ue,[Object(a["createVNode"])(s,{to:e.album_link,class:"cb-track-name"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.track_name),1)]})),_:1},8,["to"]),Object(a["createVNode"])(i,{class:"cb-track-artists",artists:e.track_artists},null,8,["artists"])])])}var qe={class:"artists-list"},Ge={key:0};function Me(e,t,r,n,c,o){var s=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",qe,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.artists,(function(t,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("span",{key:r,class:"artist"},[r>0?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",Ge,", ")):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(s,{to:"/artist/"+e.spotifyUriParse(t.uri).val},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.name),1)]})),_:2},1032,["to"])])})),128))])}var ze=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);ze=Object(u["a"])([Object(p["a"])({props:{artists:Array},methods:{spotifyUriParse:function(e){return X(e)}}})],ze);var Ke=ze;r("5982");const $e=y()(Ke,[["render",Me],["__scopeId","data-v-d642d86c"]]);var Je=$e,Fe=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);Fe=Object(u["a"])([Object(p["a"])({data:function(){return{album_link:"",track_name:"",track_artists:[],track_image:"",context_link:""}},components:{ArtistsList:Je},computed:Object(c["a"])(Object(c["a"])({},Object(d["c"])({playback:"player/getPlayback"})),{},{item:function(){return this.playback.item}}),methods:{getTrackAlbumId:function(e){var t=e.album.uri,r=X(t);return r.val},getTrackMinImageUrl:function(e){var t=e.album;return Y(t,!1)},updateContext:function(){var e=this.playback.item;this.album_link="/album/"+e.album.id,this.track_name=e.name,this.track_artists=e.artists,this.track_image=this.getTrackMinImageUrl(e);var t="";t=this.playback.context?this.playback.context.uri:this.playback.item.artists[0].uri;var r=X(t);this.context_link="/".concat(r.type,"/").concat(r.val)}},created:function(){this.updateContext()},watch:{item:function(){this.updateContext()}}})],Fe);var We=Fe;r("c976");const He=y()(We,[["render",Le],["__scopeId","data-v-36305a09"]]);var Ye=He,Xe=function(e){return Object(a["pushScopeId"])("data-v-4cdd6940"),e=e(),Object(a["popScopeId"])(),e},Qe={class:"cb-device"},Ze=Xe((function(){return Object(a["createElementVNode"])("span",{class:"cd-device-header"},"DEVICES:",-1)})),et=["onClick"];function tt(e,t,n,c,o,s){var i=Object(a["resolveComponent"])("inline-svg");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Qe,[Object(a["createVNode"])(i,{onClick:t[0]||(t[0]=function(t){return e.getDevices()}),src:r("3e22")},null,8,["src"]),Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["cd-device-container",{open:e.is_open}])},[Ze,(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.devices,(function(t,n){return Object(a["openBlock"])(),Object(a["createElementBlock"])("span",{key:n,class:Object(a["normalizeClass"])([{active:t.is_active},"cb-device-device"]),onClick:function(t){return e.transferToDevice(n)}},["Computer"===t.type?(Object(a["openBlock"])(),Object(a["createBlock"])(i,{key:0,src:r("3e22")},null,8,["src"])):(Object(a["openBlock"])(),Object(a["createBlock"])(i,{key:1,src:r("acb8")},null,8,["src"])),Object(a["createElementVNode"])("p",null,Object(a["toDisplayString"])(t.name),1)],10,et)})),128))],2)])}var rt=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);rt=Object(u["a"])([Object(p["a"])({data:function(){return{devices:[],is_open:!1}},computed:Object(c["a"])({},Object(d["c"])({player:"player/getPlayer",device_id:"player/getDeviceId",playback_state:"player/getPlaybackState"})),methods:{getDevices:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.is_open){t.next=6;break}return t.next=3,pe.spotify.player.getAvailableDevices();case 3:r=t.sent,console.log("[debug] ControlDevice devices: ",r),r&&"devices"in r&&(e.devices=r.devices);case 6:e.is_open=!e.is_open;case 7:case"end":return t.stop()}}),t)})))()},transferToDevice:function(e){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.devices[e].is_active){r.next=3;break}return r.next=3,pe.spotify.player.transferPlayback({body:{device_ids:[t.devices[e].id]}});case 3:case"end":return r.stop()}}),r)})))()}}})],rt);var at=rt;r("faac");const nt=y()(at,[["render",tt],["__scopeId","data-v-4cdd6940"]]);var ct=nt,ot=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);ot=Object(u["a"])([Object(p["a"])({components:{ControlButtons:fe,ControlPlayback:Pe,ControlVolume:Ie,ControlCurrentTrack:Ye,ControlDevice:ct}})],ot);var st=ot;r("893e");const it=y()(st,[["render",L],["__scopeId","data-v-2d0c2a28"]]);var lt=it,ut=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);ut=Object(u["a"])([Object(p["a"])({components:{CircleLoader:x,InfoBar:B,ControlBar:lt},computed:Object(c["a"])({},Object(d["c"])({status:"app/getStatus"})),methods:Object(c["a"])({},Object(d["b"])({playerInit:"player/init",userInit:"user/init"})),created:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("[debug] AppLayout (created)"),"not-logged"!==e.status){t.next=5;break}e.$router.push({name:"Login"}),t.next=10;break;case 5:if("loaded"===e.status){t.next=10;break}return t.next=8,e.playerInit();case 8:return t.next=10,e.userInit();case 10:case"end":return t.stop()}}),t)})))()}})],ut);var pt=ut;r("edcd");const dt=y()(pt,[["render",j],["__scopeId","data-v-622b189e"]]);var bt=dt,mt={class:"home"};function ft(e,t,r,n,c,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",mt)}var yt=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);yt=Object(u["a"])([Object(p["a"])({created:function(){console.log("[debug] Home (created)")}})],yt);var ht=yt;r("9017");const vt=y()(ht,[["render",ft],["__scopeId","data-v-64f7f41c"]]);var gt=vt,kt=function(e){return Object(a["pushScopeId"])("data-v-7610a826"),e=e(),Object(a["popScopeId"])(),e},Ot={class:"login",ref:"login"},jt=kt((function(){return Object(a["createElementVNode"])("h1",null,"Пожалуйста, авторизуйтесь через Spotify.",-1)}));function _t(e,t,r,n,c,o){var s=Object(a["resolveComponent"])("CircleLoader");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[this.process?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:0})):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",Ot,[jt,Object(a["createElementVNode"])("button",{onClick:t[0]||(t[0]=function(){return e.login&&e.login.apply(e,arguments)}),class:"btn"},"Войти")],512)],64)}r("9911");var Tt=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);Tt=Object(u["a"])([Object(p["a"])({data:function(){return{process:!1}},components:{CircleLoader:x},computed:Object(c["a"])({},Object(d["c"])({status:"app/getStatus"})),methods:Object(c["a"])(Object(c["a"])({},Object(d["b"])({setStatus:"app/setStatus",setAccessToken:"auth/setAccessToken",setRefreshToken:"auth/setRefreshToken"})),{},{popupEvent:function(e){var t=e.data;switch(t.status){case"ok":console.log("[debug] Login (all ok)"),window.removeEventListener("message",this.popupEvent),this.setAccessToken(localStorage.getItem("access_token")),this.setRefreshToken(localStorage.getItem("refresh_token")),this.setStatus("logged"),this.$router.push({name:"Home"});break;default:console.log("switch (data.status): default")}},login:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var r,a,n,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$refs.login.querySelector(".login h1"),a=e.$refs.login.querySelector(".login button"),r.style.transform="translateX(-100vw)",a.style.transform="translateX(100vw)",e.process=!0,t.next=7,pe.backend.auth.getUserAuthURL();case 7:n=t.sent,n.state&&(localStorage.setItem(n.state_key,n.state),c=window.open(n.link,"Login with Spotify","width=800,height=600"),c&&window.addEventListener("message",e.popupEvent,!1));case 9:case"end":return t.stop()}}),t)})))()}}),created:function(){console.log("[debug] Login (created)"),"logged"!==this.status&&"loaded"!==this.status||this.$router.push({name:"Home"})}})],Tt);var St=Tt;r("cfe4");const Et=y()(St,[["render",_t],["__scopeId","data-v-7610a826"]]);var xt=Et,wt={class:"callback"};function Pt(e,t,r,n,c,o){var s=Object(a["resolveComponent"])("CircleLoader");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",wt,[Object(a["createVNode"])(s)])}var Nt=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);Nt=Object(u["a"])([Object(p["a"])({components:{CircleLoader:x},created:function(){console.log("[debug] Callback (start)");var e=this.$route.query;console.log("[debug] Callback query: ",e),window.opener&&(console.log("[debug] Callback (1 if)"),e&&e.access_token?(console.log("[debug] Callback (2 if)"),localStorage.setItem("access_token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token),window.opener.postMessage({status:"ok"})):e.error?window.opener.postMessage({status:e.error}):window.opener.postMessage({status:"invalid query"}),localStorage.removeItem("spotify_auth_state"),window.close()),console.log("[debug] Callback (end)")}})],Nt);var Vt=Nt;r("e74c");const Ct=y()(Vt,[["render",Pt],["__scopeId","data-v-29c03a3e"]]);var At=Ct,Bt=function(e){return Object(a["pushScopeId"])("data-v-54c14b51"),e=e(),Object(a["popScopeId"])(),e},It={class:"not-found"},Rt=Bt((function(){return Object(a["createElementVNode"])("h1",null,"404",-1)})),Dt=Bt((function(){return Object(a["createElementVNode"])("h2",null,"Страница не найдена",-1)}));function Ut(e,t,r,n,c,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",It,[Rt,Dt,Object(a["createElementVNode"])("button",{onClick:t[0]||(t[0]=function(){return e.goHome&&e.goHome.apply(e,arguments)}),class:"btn"},"На главную")])}var Lt=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);Lt=Object(u["a"])([Object(p["a"])({methods:{goHome:function(){this.$router.push({name:"Home"})}}})],Lt);var qt=Lt;r("44e8");const Gt=y()(qt,[["render",Ut],["__scopeId","data-v-54c14b51"]]);var Mt=Gt,zt={key:0,class:"album"},Kt={class:"album-info"},$t=["src"],Jt={class:"album-playlist"},Ft={class:"album-title"};function Wt(e,t,r,n,c,o){var s=Object(a["resolveComponent"])("ArtistsList"),i=Object(a["resolveComponent"])("TrackList");return e.loaded?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",zt,[Object(a["createElementVNode"])("div",Kt,[Object(a["createElementVNode"])("img",{src:e.album_image},null,8,$t),Object(a["createElementVNode"])("span",null,[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(e.album.total_tracks)+" songs, ",1),Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(e.msToTime(e.album_duration,!0)),1)])]),Object(a["createElementVNode"])("div",Jt,[Object(a["createElementVNode"])("h2",Ft,Object(a["toDisplayString"])(e.album.name),1),Object(a["createVNode"])(s,{class:"album-artists",artists:e.album.artists},null,8,["artists"]),Object(a["createVNode"])(i,{tracks:e.tracks,context_uri:e.context_uri},null,8,["tracks","context_uri"])])])):Object(a["createCommentVNode"])("",!0)}var Ht={class:"track-list"},Yt={class:"track-list-general"},Xt=["src"],Qt={class:"track-list-info"},Zt={class:"track-list-duration"};function er(e,t,r,n,c,o){var s=Object(a["resolveComponent"])("TrackListPlayback"),i=Object(a["resolveComponent"])("ArtistsList");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ht,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.tracks,(function(t,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:r,class:"track-list-row"},[Object(a["createVNode"])(s,{track:t,num:r,uris:e.uris,context_uri:e.context_uri},null,8,["track","num","uris","context_uri"]),Object(a["createElementVNode"])("span",Yt,[t.image?(Object(a["openBlock"])(),Object(a["createElementBlock"])("img",{key:0,src:t.image,class:"track-list-img"},null,8,Xt)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("span",Qt,[Object(a["createElementVNode"])("span",{class:Object(a["normalizeClass"])(["track-list-name",{"track-list-active":e.isCurrentTrack(r)}])},Object(a["toDisplayString"])(t.name),3),Object(a["createVNode"])(i,{artists:t.artists,class:"track-list-artists"},null,8,["artists"])])]),Object(a["createElementVNode"])("span",Zt,Object(a["toDisplayString"])(t.duration),1)])})),128))])}var tr={key:0},rr={key:1},ar={class:"track-list-num"};function nr(e,t,n,c,o,s){var i=Object(a["resolveComponent"])("inline-svg");return Object(a["openBlock"])(),Object(a["createElementBlock"])("span",{onClick:t[0]||(t[0]=function(t){return e.startPauseTrack(e.num)}),class:"track-list-index"},[e.isCurrentTrack()&&e.playback.is_playing?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",tr,[Object(a["createVNode"])(i,{class:"track-list-current",src:r("9a9c")},null,8,["src"]),Object(a["createVNode"])(i,{class:"track-list-control",src:r("27c6")},null,8,["src"])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",rr,[Object(a["createElementVNode"])("span",ar,Object(a["toDisplayString"])(e.num+1),1),Object(a["createVNode"])(i,{class:"track-list-control",src:r("ac3a")},null,8,["src"])]))])}var cr=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);cr=Object(u["a"])([Object(p["a"])({props:{track:{type:Object,required:!0},context_uri:String,uris:Array,num:Number},computed:Object(c["a"])({},Object(d["c"])({playback_state:"player/getPlaybackState",player:"player/getPlayer",playback:"player/getPlayback"})),methods:{isCurrentTrack:function(){return this.track.uri===this.playback.item.uri},startPauseTrack:function(e){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.isCurrentTrack()){r.next=7;break}return a={},a=t.uris?{body:{uris:t.uris,offset:{position:e}}}:{body:{context_uri:t.context_uri,offset:{position:e}}},r.next=5,pe.spotify.player.startPlayback(a);case 5:r.next=19;break;case 7:if(!t.playback_state){r.next=12;break}return r.next=10,pe.spotify.SDK.togglePlay(t.player);case 10:r.next=19;break;case 12:if(!t.playback.is_playing){r.next=17;break}return r.next=15,pe.spotify.player.pausePlayback({});case 15:r.next=19;break;case 17:return r.next=19,pe.spotify.player.startPlayback({});case 19:case"end":return r.stop()}}),r)})))()}},created:function(){console.log("[debug] TrackListPlayback (created)")}})],cr);var or=cr;r("9a4a");const sr=y()(or,[["render",nr],["__scopeId","data-v-4eb608c0"]]);var ir=sr,lr=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);lr=Object(u["a"])([Object(p["a"])({props:{tracks:{type:Array,required:!0},context_uri:String,uris:Array},components:{TrackListPlayback:ir,ArtistsList:Je},computed:Object(c["a"])({},Object(d["c"])({playback_state:"player/getPlaybackState",player:"player/getPlayer",playback:"player/getPlayback"})),methods:{isCurrentTrack:function(e){return this.tracks[e].uri===this.playback.item.uri}},created:function(){console.log("[debug] TrackList (created) tracks:",this.tracks)}})],lr);var ur=lr;r("80d4");const pr=y()(ur,[["render",er],["__scopeId","data-v-c0c9b6e2"]]);var dr=pr,br=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);br=Object(u["a"])([Object(p["a"])({data:function(){return{loaded:!1,album:null,album_image:"",album_duration:0,tracks:[],context_uri:""}},components:{TrackList:dr,ArtistsList:Je},computed:{album_id:function(){return this.$route.params.id}},methods:{getAlbumMaxImageUrl:function(e){return Y(e,!0)},getAlbumDuration:function(e){var t=e.tracks.items,r=0;return t.forEach((function(e){r+=e.duration_ms})),r},msToTime:function(e,t){return H(e,t)},setAlbumParams:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loaded=!1,t.next=3,pe.spotify.albums.getAlbum({params:{id:e.album_id}});case 3:e.album=t.sent,e.album_image=e.getAlbumMaxImageUrl(e.album),e.album_duration=e.getAlbumDuration(e.album),e.context_uri=e.album.uri,r=Q(e.album.tracks.items),e.tracks=r,e.loaded=!0;case 10:case"end":return t.stop()}}),t)})))()}},created:function(){this.setAlbumParams()},watch:{album_id:function(){this.setAlbumParams()}}})],br);var mr=br;r("949d");const fr=y()(mr,[["render",Wt],["__scopeId","data-v-3b0f825c"]]);var yr=fr,hr={key:0,class:"artist"},vr={class:"artist-header"},gr=["src"],kr={class:"artist-top-tracks"};function Or(e,t,r,n,c,o){var s=Object(a["resolveComponent"])("TrackList");return e.loaded?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",hr,[Object(a["createElementVNode"])("div",vr,[Object(a["createElementVNode"])("img",{src:e.artist_image},null,8,gr),Object(a["createElementVNode"])("h1",null,Object(a["toDisplayString"])(e.artist.name),1)]),Object(a["createElementVNode"])("div",kr,[Object(a["createVNode"])(s,{tracks:e.tracks,uris:e.tracks_uris},null,8,["tracks","uris"])])])):Object(a["createCommentVNode"])("",!0)}r("fb6a");var jr=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);jr=Object(u["a"])([Object(p["a"])({data:function(){return{loaded:!1,artist:null,artist_image:"",tracks:[],tracks_uris:[]}},components:{TrackList:dr},computed:{artist_id:function(){return this.$route.params.id}},methods:{getTracksUris:function(){var e=[];return this.tracks.forEach((function(t){e.push(t.uri)})),e},getArtistMaxImageUrl:function(){return Y(this.artist,!0)},setArtistParams:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var r,a,n,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loaded=!1,t.next=3,pe.spotify.artists.getArtist({params:{id:e.artist_id}});case 3:return e.artist=t.sent,e.artist_image=e.getArtistMaxImageUrl(),t.next=7,pe.spotify.artists.getArtistAlbums({params:{id:e.artist_id}});case 7:return r=t.sent,t.next=10,pe.spotify.artists.getArtistTopTracks({params:{id:e.artist_id},query:{market:"ES"}});case 10:a=t.sent,a&&"tracks"in a&&(n=a.tracks.slice(0,10),c=Q(n),e.tracks=c),e.tracks_uris=e.getTracksUris(),e.loaded=!0,console.log("[debug] Artist\nartist_info: ",e.artist,"\nartist_albums: ",r,"\nartist_top: ",a);case 15:case"end":return t.stop()}}),t)})))()}},created:function(){this.setArtistParams()},watch:{artist_id:function(){this.setArtistParams()}}})],jr);var _r=jr;r("56f5");const Tr=y()(_r,[["render",Or],["__scopeId","data-v-0b6b07ac"]]);var Sr=Tr,Er=(r("a4d3"),r("e01a"),{key:0,class:"playlist"}),xr={class:"playlist-info"},wr=["src"],Pr={class:"playlist-playlist"},Nr={class:"playlist-title"},Vr={class:"playlist-description"};function Cr(e,t,r,n,c,o){var s=Object(a["resolveComponent"])("TrackList");return e.loaded?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Er,[Object(a["createElementVNode"])("div",xr,[Object(a["createElementVNode"])("img",{src:e.playlist_image},null,8,wr),Object(a["createElementVNode"])("span",null,[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(e.playlist.total_tracks)+" songs, ",1),Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(e.msToTime(e.playlist_duration,!0)),1)])]),Object(a["createElementVNode"])("div",Pr,[Object(a["createElementVNode"])("h2",Nr,Object(a["toDisplayString"])(e.playlist.name),1),Object(a["createElementVNode"])("div",Vr,Object(a["toDisplayString"])(e.playlist.description),1),Object(a["createVNode"])(s,{tracks:e.tracks,context_uri:e.context_uri},null,8,["tracks","context_uri"])])])):Object(a["createCommentVNode"])("",!0)}var Ar=function(e){Object(i["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r)}(p["b"]);Ar=Object(u["a"])([Object(p["a"])({data:function(){return{loaded:!1,playlist:null,playlist_image:"",playlist_duration:0,tracks:[],context_uri:""}},components:{TrackList:dr},computed:{playlist_id:function(){return this.$route.params.id}},methods:{getPlaylistMaxImageUrl:function(e){return Y(e,!0)},getPlaylistDuration:function(e){var t=e.tracks.items,r=0;return t.forEach((function(e){r+=e.track.duration_ms})),r},msToTime:function(e,t){return H(e,t)},prepareTracks:function(){var e=[],t=this.playlist.tracks.items;return t.forEach((function(t){e.push(t.track)})),e},setPlaylistParams:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loaded=!1,t.next=3,pe.spotify.playlists.getPlaylist({params:{playlist_id:e.playlist_id}});case 3:e.playlist=t.sent,e.playlist_image=e.getPlaylistMaxImageUrl(e.playlist),e.playlist_duration=e.getPlaylistDuration(e.playlist),e.context_uri=e.playlist.uri,r=e.prepareTracks(),a=Q(r),e.tracks=a,e.loaded=!0;case 11:case"end":return t.stop()}}),t)})))()}},created:function(){this.setPlaylistParams()},watch:{playlist_id:function(){this.setPlaylistParams()}}})],Ar);var Br=Ar;r("9aa8");const Ir=y()(Br,[["render",Cr],["__scopeId","data-v-c35320d2"]]);var Rr=Ir,Dr=[{path:"/",name:"Home",component:bt,children:[{path:"",component:gt},{path:"album/:id",component:yr},{path:"artist/:id",component:Sr},{path:"playlist/:id",component:Rr}]},{path:"/login",name:"Login",component:xt},{path:"/callback",name:"Callback",component:At},{path:"/:catchAll(.*)",name:"NotFound",component:Mt}],Ur=Object(g["a"])({history:Object(g["b"])(),routes:Dr}),Lr=Ur,qr=r("6d5e"),Gr=r.n(qr),Mr={inited:!1,status:null};function zr(e){return e.inited}function Kr(e){return e.status}var $r={getInitState:zr,getStatus:Kr};function Jr(e,t){e.inited=t}function Fr(e,t){e.status=t}var Wr={SET_INIT_STATE:Jr,SET_STATUS:Fr};function Hr(e){return Yr.apply(this,arguments)}function Yr(){return Yr=Object(_["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,console.log("[debug] app/init (start)"),e.next=4,r("auth/init",null,{root:!0});case 4:r("setInitState",!0),console.log("[debug] app/init (end)");case 6:case"end":return e.stop()}}),e)}))),Yr.apply(this,arguments)}function Xr(e,t){var r=e.commit;console.log("[debug] app/setInitState: ",t),r("SET_INIT_STATE",t)}function Qr(e,t){var r=e.commit;console.log("[debug] app/setStatus: ",t),r("SET_STATUS",t)}var Zr={init:Hr,setInitState:Xr,setStatus:Qr},ea={namespaced:!0,state:Mr,getters:$r,mutations:Wr,actions:Zr},ta={access_token:null,refresh_token:null};function ra(e){return e.access_token}function aa(e){return e.refresh_token}var na={getAccessToken:ra,getRefreshToken:aa};function ca(e,t){e.access_token=t}function oa(e,t){e.refresh_token=t}var sa={SET_ACCESS_TOKEN:ca,SET_REFRESH_TOKEN:oa};function ia(e){return la.apply(this,arguments)}function la(){return la=Object(_["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.dispatch,console.log("[debug] auth/init (start)"),r("app/setStatus","not-logged",{root:!0}),a=localStorage.getItem("access_token"),n=localStorage.getItem("refresh_token"),!a||!n){e.next=20;break}return console.log("[debug] auth/init (check start)"),e.next=9,pe.backend.auth.checkToken(a);case 9:if(c=e.sent,"ok"!==c.status){e.next=15;break}r("setAccessToken",a),r("app/setStatus","logged",{root:!0}),e.next=19;break;case 15:return e.next=17,pe.backend.auth.refreshToken(n);case 17:o=e.sent,"access_token"in o&&(localStorage.setItem("access_token",o.access_token),r("setAccessToken",o.access_token),r("app/setStatus","logged",{root:!0}));case 19:console.log("[debug] auth/init (check end)");case 20:console.log("[debug] auth/init (end)");case 21:case"end":return e.stop()}}),e)}))),la.apply(this,arguments)}function ua(e,t){var r=e.commit;console.log("[debug] auth/setAccessToken: ",t),r("SET_ACCESS_TOKEN",t)}function pa(e,t){var r=e.commit;r("SET_REFRESH_TOKEN",t)}var da={init:ia,setAccessToken:ua,setRefreshToken:pa},ba={namespaced:!0,state:ta,getters:na,mutations:sa,actions:da},ma={player:null,device_id:null,playback:null,playback_state:null};function fa(e){return e.player}function ya(e){return e.device_id}function ha(e){return e.playback}function va(e){return e.playback_state}var ga={getPlayer:fa,getDeviceId:ya,getPlayback:ha,getPlaybackState:va};function ka(e,t){e.player=t}function Oa(e,t){e.device_id=t}function ja(e,t){e.playback=t}function _a(e,t){e.playback_state=t}var Ta={SET_PLAYER:ka,SET_DEVICE_ID:Oa,SET_PLAYBACK:ja,SET_PLAYBACK_STATE:_a};function Sa(e){return Ea.apply(this,arguments)}function Ea(){return Ea=Object(_["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,c,o,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,a=t.rootGetters,console.log("[debug] player/init (start)"),n=function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("[debug] player/waitTransferComplete"),e.abrupt("return",new Promise((function(e){var t=setInterval(Object(_["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=ma.playback_state,null!==a&&(clearInterval(t),e(a));case 2:case"end":return r.stop()}}),r)}))))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=setInterval(Object(_["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("Wait playback..."),a=ma.playback_state,null===a){t.next=6;break}clearInterval(e),t.next=8;break;case 6:return t.next=8,r("setPlayback");case 8:case"end":return t.stop()}}),t)}))),2e3)},o=document.createElement("script"),o.src="https://sdk.scdn.co/spotify-player.js",o.async=!0,document.body.appendChild(o),s=a["auth/getAccessToken"],e.next=11,pe.spotify.SDK.init(s);case 11:return i=e.sent,i.addListener("initialization_error",(function(e){var t=e.message;console.error("[Spotify WPS] ",t)})),i.addListener("authentication_error",(function(e){var t=e.message;console.error("[Spotify WPS] ",t)})),i.addListener("account_error",(function(e){var t=e.message;console.error("[Spotify WPS] ",t)})),i.addListener("playback_error",(function(e){var t=e.message;console.error("[Spotify WPS] ",t)})),i.addListener("ready",(function(e){var t=e.device_id;console.log("[Spotify WPS] Ready with Device ID",t),r("setPlayer",i),r("setDeviceId",t),pe.spotify.player.transferPlayback({body:{device_ids:[t]}})})),i.addListener("not_ready",(function(e){var t=e.device_id;console.log("[Spotify WPS] Device ID has gone offline",t)})),i.addListener("player_state_changed",(function(e){console.log("[Spotify WPS] Playback State changed",e),r("setPlaybackState",e),r("setPlayback"),e||c()})),i.addListener("autoplay_failed",(function(){console.log("[Spotify WPS] Autoplay is not allowed by the browser autoplay rules")})),e.next=22,pe.spotify.SDK.connect(i);case 22:return e.next=24,n();case 24:return e.next=26,r("setPlayback");case 26:r("app/setStatus","loaded",{root:!0}),console.log("[debug] player/init (end)");case 28:case"end":return e.stop()}}),e)}))),Ea.apply(this,arguments)}function xa(e,t){var r=e.commit;console.log("[debug] player/setPlayer: ",t),r("SET_PLAYER",t)}function wa(e,t){var r=e.commit;console.log("[debug] player/setDeviceId: ",t),r("SET_DEVICE_ID",t)}function Pa(e){return Na.apply(this,arguments)}function Na(){return Na=Object(_["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,pe.spotify.player.getPlaybackState({});case 3:a=e.sent,console.log("[debug] player/setPlayback: ",a),r("SET_PLAYBACK",a);case 6:case"end":return e.stop()}}),e)}))),Na.apply(this,arguments)}function Va(e,t){var r=e.commit;console.log("[debug] player/setPlaybackState: ",t),r("SET_PLAYBACK_STATE",t)}var Ca={init:Sa,setPlayer:xa,setDeviceId:wa,setPlayback:Pa,setPlaybackState:Va},Aa={namespaced:!0,state:ma,getters:ga,mutations:Ta,actions:Ca},Ba={user:null};function Ia(e){return e.user}var Ra={getUser:Ia};function Da(e,t){e.user=t}var Ua={SET_USER:Da};function La(e){return qa.apply(this,arguments)}function qa(){return qa=Object(_["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.rootGetters,console.log("[debug] user/init (start)"),e.next=4,pe.spotify.users.getCurrentUsersProfile();case 4:a=e.sent,a&&r("setUser",a),console.log("[debug] user/init user: ",Ba.user),console.log("[debug] user/init (end)");case 8:case"end":return e.stop()}}),e)}))),qa.apply(this,arguments)}function Ga(e,t){var r=e.commit;r("SET_USER",t)}var Ma={init:La,setUser:Ga},za={namespaced:!0,state:Ba,getters:Ra,mutations:Ua,actions:Ma},Ka=Object(d["a"])({state:{},mutations:{},actions:{},modules:{app:ea,auth:ba,player:Aa,user:za}});Object(a["createApp"])(v).use(Lr).use(Ka).component("inline-svg",Gr.a).mount("#app")},ce1e:function(e,t,r){e.exports=r.p+"img/control-forward.0892bb3f.svg"},cfe4:function(e,t,r){"use strict";r("96bc")},d08e:function(e,t,r){e.exports=r.p+"img/control-play.2f25944e.svg"},d731:function(e,t,r){"use strict";r("6d33")},d852:function(e,t,r){},daed:function(e,t,r){},dce3:function(e,t,r){},dd7f:function(e,t,r){e.exports=r.p+"img/control-pause.e75d8a30.svg"},df66:function(e,t,r){e.exports=r.p+"img/info-bar-home.617d1d9f.svg"},e74c:function(e,t,r){"use strict";r("49d8")},edcd:function(e,t,r){"use strict";r("d852")},faac:function(e,t,r){"use strict";r("9e13")}});
//# sourceMappingURL=app.ff8a1024.js.map